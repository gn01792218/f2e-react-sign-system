import{B as p,a as w,I as x}from"./Btn.6e018204.js";import{F as m,u as T}from"./FileUpload.8741d4c9.js";import{j as c,r as M,a as C}from"./index.2248b049.js";function D(u){const{width:h,height:o,signCanvas:e,ctx:n,handleMouseDown:a,handleMouseMove:r,handleTouchStart:s,handleTouchMove:i,setDrawing:d}=u.signCanvasObj;return c("canvas",{ref:e,className:"signCanvas",width:h,height:o,onMouseDown:a,onMouseMove:r,onTouchStart:s,onTouchMove:i,onTouchEnd:()=>d(!1),onMouseUp:()=>d(!1),onMouseOut:()=>d(!1),children:"Your browser does not support th canvas element"})}function b(){function u(n){return[n.clientX,n.clientY]}function h(n){return[n.touches[0].clientX,n.touches[0].clientX]}function o(n,a){let[r,s]=u(a),i=n.getBoundingClientRect();return r-=i.left,s-=i.top,[r,s]}function e(n,a){let[r,s]=h(a),i=n.getBoundingClientRect();return r-=i.left,s-=i.top,[r,s]}return{getMousePos:u,getCanvasMousePos:o,getCanvasTouchPos:e}}function y(){var v;const{getCanvasMousePos:u,getCanvasTouchPos:h}=b(),o=M.exports.useRef(null),e=(v=o.current)==null?void 0:v.getContext("2d"),[n,a]=M.exports.useState(!0);function r(t){const l=t.getContext("2d");l==null||l.clearRect(0,0,t.width,t.height)}function s(t){a(!0);let[l,g]=u(o.current,t);!e||(e.beginPath(),e.moveTo(l,g),t.preventDefault())}function i(t){if(!n)return;let[l,g]=u(o.current,t);!e||(e.lineWidth=2,e.lineCap="round",e.lineJoin="round",e.strokeStyle="yellow",e.shadowBlur=1,e.shadowColor="white",e.lineTo(l,g),e.stroke())}function d(t){a(!0);let[l,g]=h(o.current,t);!e||(e.beginPath(),e.moveTo(l,g),t.preventDefault())}function f(t){if(!n)return;let[l,g]=h(o.current,t);!e||(e.lineWidth=2,e.lineCap="round",e.lineJoin="round",e.shadowBlur=1,e.shadowColor="black",e.lineTo(l,g),e.stroke())}return{signCanvas:o,ctx:e,setDrawing:a,clearCanvas:r,handleMouseMove:i,handleMouseDown:s,handleTouchStart:d,handleTouchMove:f}}function j(){const{signCanvas:u,ctx:h,setDrawing:o,clearCanvas:e,handleMouseDown:n,handleMouseMove:a,handleTouchMove:r,handleTouchStart:s}=y(),{downloadImg:i,converCanvasToImage:d}=T(),[f,v]=M.exports.useState(""),t={width:500,height:200};return C("main",{className:"text-white bg-black flex",children:[c("h1",{className:"text-lg",children:"\u5EFA\u7ACB\u7C3D\u540D"}),C("section",{children:[c("h2",{children:"\u624B\u5BEB"}),c(D,{signCanvasObj:{width:t.width,height:t.height,signCanvas:u,ctx:h,setDrawing:o,handleMouseDown:n,handleMouseMove:a,handleTouchMove:r,handleTouchStart:s}}),C("div",{className:"flex",children:[c(p,{btnObj:{type:w.SECONDARY,title:"\u6E05\u9664\u7C3D\u540D",clickHandler:()=>e(u.current)}}),c(p,{btnObj:{type:w.PRIMARY,title:"\u8F49\u5316\u6210\u5716",clickHandler:()=>v(d(u.current))}})]}),f?C("div",{children:[c("img",{src:f,alt:"\u624B\u7E6A\u7C3D\u540D",width:t.width,height:t.height}),c(p,{btnObj:{type:w.PRIMARY,title:"\u4E0B\u8F09\u5716\u7247",clickHandler:()=>i(f)}})]}):null]}),C("section",{children:[c("h2",{children:"\u4E0A\u50B3\u5716\u7247"}),c(m,{fileUploadObj:{type:x.PDF}})]})]})}export{j as default};
