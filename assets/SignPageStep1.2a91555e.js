import{_ as _defineProperty,g as useImageUtil,u as useMsgBox,a as useAppDispatch,S as Status,o as loadBGImg,j as jsx,r as react,b as useAppSelector,f as useSignStep,c as jsxs,I as Input,e as InputType,B as Btn,d as BtnType}from"./index.5d52dcb5.js";import{c as commonjsGlobal,a as commonjsRequire,r as require$$2}from"./___vite-browser-external_commonjs-proxy.9a402ed9.js";var pdf={exports:{}};(function(module,exports){(function(n,e){module.exports=e()})(commonjsGlobal,function(){return(()=>{var __webpack_modules__=[,(s,n,e)=>{function r(R){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?r=function(o){return typeof o}:r=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},r(R)}Object.defineProperty(n,"__esModule",{value:!0}),n.StatTimer=n.RenderingCancelledException=n.PixelsPerInch=n.PageViewport=n.PDFDateString=n.LinkTarget=n.DOMStandardFontDataFactory=n.DOMSVGFactory=n.DOMCanvasFactory=n.DOMCMapReaderFactory=void 0,n.addLinkAttributes=X,n.deprecated=be,n.getFilenameFromUrl=A,n.getPdfFilenameFromUrl=E,n.getXfaPageViewport=z,n.isDataScheme=P,n.isPdfFile=v,n.isValidFetchUrl=re,n.loadScript=Y;var i=S(e(2)),f=e(4),m=e(135);function S(R){return R&&R.__esModule?R:{default:R}}function D(R,d){var o=typeof Symbol!="undefined"&&R[Symbol.iterator]||R["@@iterator"];if(!o){if(Array.isArray(R)||(o=M(R))||d&&R&&typeof R.length=="number"){o&&(R=o);var g=0,F=function(){};return{s:F,n:function(){return g>=R.length?{done:!0}:{done:!1,value:R[g++]}},e:function(ye){throw ye},f:F}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var N=!0,J=!1,le;return{s:function(){o=o.call(R)},n:function(){var ye=o.next();return N=ye.done,ye},e:function(ye){J=!0,le=ye},f:function(){try{!N&&o.return!=null&&o.return()}finally{if(J)throw le}}}}function M(R,d){if(!!R){if(typeof R=="string")return j(R,d);var o=Object.prototype.toString.call(R).slice(8,-1);if(o==="Object"&&R.constructor&&(o=R.constructor.name),o==="Map"||o==="Set")return Array.from(R);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return j(R,d)}}function j(R,d){(d==null||d>R.length)&&(d=R.length);for(var o=0,g=new Array(d);o<d;o++)g[o]=R[o];return g}function W(R,d,o,g,F,N,J){try{var le=R[N](J),ve=le.value}catch(ye){o(ye);return}le.done?d(ve):Promise.resolve(ve).then(g,F)}function V(R){return function(){var d=this,o=arguments;return new Promise(function(g,F){var N=R.apply(d,o);function J(ve){W(N,g,F,J,le,"next",ve)}function le(ve){W(N,g,F,J,le,"throw",ve)}J(void 0)})}}function O(R,d){if(!(R instanceof d))throw new TypeError("Cannot call a class as a function")}function w(R,d){for(var o=0;o<d.length;o++){var g=d[o];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(R,g.key,g)}}function x(R,d,o){return d&&w(R.prototype,d),o&&w(R,o),R}function k(R,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");R.prototype=Object.create(d&&d.prototype,{constructor:{value:R,writable:!0,configurable:!0}}),d&&L(R,d)}function L(R,d){return L=Object.setPrototypeOf||function(g,F){return g.__proto__=F,g},L(R,d)}function _(R){var d=l();return function(){var g=u(R),F;if(d){var N=u(this).constructor;F=Reflect.construct(g,arguments,N)}else F=g.apply(this,arguments);return B(this,F)}}function B(R,d){if(d&&(r(d)==="object"||typeof d=="function"))return d;if(d!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h(R)}function h(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}function l(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function u(R){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},u(R)}var y="noopener noreferrer nofollow",p="http://www.w3.org/2000/svg",c={CSS:96,PDF:72,get PDF_TO_CSS_UNITS(){return(0,f.shadow)(this,"PDF_TO_CSS_UNITS",this.CSS/this.PDF)}};n.PixelsPerInch=c;var b=function(R){k(o,R);var d=_(o);function o(){var g,F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},N=F.ownerDocument,J=N===void 0?globalThis.document:N;return O(this,o),g=d.call(this),g._document=J,g}return x(o,[{key:"_createCanvas",value:function(F,N){var J=this._document.createElement("canvas");return J.width=F,J.height=N,J}}]),o}(m.BaseCanvasFactory);n.DOMCanvasFactory=b;function C(R){return G.apply(this,arguments)}function G(){return G=V(i.default.mark(function R(d){var o,g,F=arguments;return i.default.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(o=F.length>1&&F[1]!==void 0?F[1]:!1,!re(d,document.baseURI)){J.next=21;break}return J.next=4,fetch(d);case 4:if(g=J.sent,g.ok){J.next=7;break}throw new Error(g.statusText);case 7:if(!o){J.next=15;break}return J.t1=Uint8Array,J.next=11,g.arrayBuffer();case 11:J.t2=J.sent,J.t0=new J.t1(J.t2),J.next=20;break;case 15:return J.t3=f.stringToBytes,J.next=18,g.text();case 18:J.t4=J.sent,J.t0=(0,J.t3)(J.t4);case 20:return J.abrupt("return",J.t0);case 21:return J.abrupt("return",new Promise(function(le,ve){var ye=new XMLHttpRequest;ye.open("GET",d,!0),o&&(ye.responseType="arraybuffer"),ye.onreadystatechange=function(){if(ye.readyState===XMLHttpRequest.DONE){if(ye.status===200||ye.status===0){var pe;if(o&&ye.response?pe=new Uint8Array(ye.response):!o&&ye.responseText&&(pe=(0,f.stringToBytes)(ye.responseText)),pe){le(pe);return}}ve(new Error(ye.statusText))}},ye.send(null)}));case 22:case"end":return J.stop()}},R)})),G.apply(this,arguments)}var I=function(R){k(o,R);var d=_(o);function o(){return O(this,o),d.apply(this,arguments)}return x(o,[{key:"_fetchData",value:function(F,N){return C(F,this.isCompressed).then(function(J){return{cMapData:J,compressionType:N}})}}]),o}(m.BaseCMapReaderFactory);n.DOMCMapReaderFactory=I;var $=function(R){k(o,R);var d=_(o);function o(){return O(this,o),d.apply(this,arguments)}return x(o,[{key:"_fetchData",value:function(F){return C(F,!0)}}]),o}(m.BaseStandardFontDataFactory);n.DOMStandardFontDataFactory=$;var ee=function(R){k(o,R);var d=_(o);function o(){return O(this,o),d.apply(this,arguments)}return x(o,[{key:"_createSVG",value:function(F){return document.createElementNS(p,F)}}]),o}(m.BaseSVGFactory);n.DOMSVGFactory=ee;var Z=function(){function R(d){var o=d.viewBox,g=d.scale,F=d.rotation,N=d.offsetX,J=N===void 0?0:N,le=d.offsetY,ve=le===void 0?0:le,ye=d.dontFlip,pe=ye===void 0?!1:ye;O(this,R),this.viewBox=o,this.scale=g,this.rotation=F,this.offsetX=J,this.offsetY=ve;var Ae=(o[2]+o[0])/2,Te=(o[3]+o[1])/2,Ee,Fe,Ie,We;switch(F%=360,F<0&&(F+=360),F){case 180:Ee=-1,Fe=0,Ie=0,We=1;break;case 90:Ee=0,Fe=1,Ie=1,We=0;break;case 270:Ee=0,Fe=-1,Ie=-1,We=0;break;case 0:Ee=1,Fe=0,Ie=0,We=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}pe&&(Ie=-Ie,We=-We);var je,fe,de,U;Ee===0?(je=Math.abs(Te-o[1])*g+J,fe=Math.abs(Ae-o[0])*g+ve,de=Math.abs(o[3]-o[1])*g,U=Math.abs(o[2]-o[0])*g):(je=Math.abs(Ae-o[0])*g+J,fe=Math.abs(Te-o[1])*g+ve,de=Math.abs(o[2]-o[0])*g,U=Math.abs(o[3]-o[1])*g),this.transform=[Ee*g,Fe*g,Ie*g,We*g,je-Ee*g*Ae-Ie*g*Te,fe-Fe*g*Ae-We*g*Te],this.width=de,this.height=U}return x(R,[{key:"clone",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=o.scale,F=g===void 0?this.scale:g,N=o.rotation,J=N===void 0?this.rotation:N,le=o.offsetX,ve=le===void 0?this.offsetX:le,ye=o.offsetY,pe=ye===void 0?this.offsetY:ye,Ae=o.dontFlip,Te=Ae===void 0?!1:Ae;return new R({viewBox:this.viewBox.slice(),scale:F,rotation:J,offsetX:ve,offsetY:pe,dontFlip:Te})}},{key:"convertToViewportPoint",value:function(o,g){return f.Util.applyTransform([o,g],this.transform)}},{key:"convertToViewportRectangle",value:function(o){var g=f.Util.applyTransform([o[0],o[1]],this.transform),F=f.Util.applyTransform([o[2],o[3]],this.transform);return[g[0],g[1],F[0],F[1]]}},{key:"convertToPdfPoint",value:function(o,g){return f.Util.applyInverseTransform([o,g],this.transform)}}]),R}();n.PageViewport=Z;var ie=function(R){k(o,R);var d=_(o);function o(g,F){var N;return O(this,o),N=d.call(this,g,"RenderingCancelledException"),N.type=F,N}return o}(f.BaseException);n.RenderingCancelledException=ie;var H={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};n.LinkTarget=H;function X(R){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=d.url,g=d.target,F=d.rel,N=d.enabled,J=N===void 0?!0:N;(0,f.assert)(o&&typeof o=="string",'addLinkAttributes: A valid "url" parameter must provided.');var le=(0,f.removeNullCharacters)(o);J?R.href=R.title=le:(R.href="",R.title="Disabled: ".concat(le),R.onclick=function(){return!1});var ve="";switch(g){case H.NONE:break;case H.SELF:ve="_self";break;case H.BLANK:ve="_blank";break;case H.PARENT:ve="_parent";break;case H.TOP:ve="_top";break}R.target=ve,R.rel=typeof F=="string"?F:y}function P(R){for(var d=R.length,o=0;o<d&&R[o].trim()==="";)o++;return R.substring(o,o+5).toLowerCase()==="data:"}function v(R){return typeof R=="string"&&/\.pdf$/i.test(R)}function A(R){var d=R.indexOf("#"),o=R.indexOf("?"),g=Math.min(d>0?d:R.length,o>0?o:R.length);return R.substring(R.lastIndexOf("/",g)+1,g)}function E(R){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"document.pdf";if(typeof R!="string")return d;if(P(R))return(0,f.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),d;var o=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,g=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,F=o.exec(R),N=g.exec(F[1])||g.exec(F[2])||g.exec(F[3]);if(N&&(N=N[0],N.includes("%")))try{N=g.exec(decodeURIComponent(N))[0]}catch{}return N||d}var q=function(){function R(){O(this,R),this.started=Object.create(null),this.times=[]}return x(R,[{key:"time",value:function(o){o in this.started&&(0,f.warn)("Timer is already running for ".concat(o)),this.started[o]=Date.now()}},{key:"timeEnd",value:function(o){o in this.started||(0,f.warn)("Timer has not been started for ".concat(o)),this.times.push({name:o,start:this.started[o],end:Date.now()}),delete this.started[o]}},{key:"toString",value:function(){var o=[],g=0,F=D(this.times),N;try{for(F.s();!(N=F.n()).done;){var J=N.value,le=J.name;le.length>g&&(g=le.length)}}catch(Te){F.e(Te)}finally{F.f()}var ve=D(this.times),ye;try{for(ve.s();!(ye=ve.n()).done;){var pe=ye.value,Ae=pe.end-pe.start;o.push("".concat(pe.name.padEnd(g)," ").concat(Ae,`ms
`))}}catch(Te){ve.e(Te)}finally{ve.f()}return o.join("")}}]),R}();n.StatTimer=q;function re(R,d){try{var o=d?new URL(R,d):new URL(R),g=o.protocol;return g==="http:"||g==="https:"}catch{return!1}}function Y(R){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return new Promise(function(o,g){var F=document.createElement("script");F.src=R,F.onload=function(N){d&&F.remove(),o(N)},F.onerror=function(){g(new Error("Cannot load script at: ".concat(F.src)))},(document.head||document.documentElement).appendChild(F)})}function be(R){console.log("Deprecated API usage: "+R)}var ke,we=function(){function R(){O(this,R)}return x(R,null,[{key:"toDateObject",value:function(o){if(!o||!(0,f.isString)(o))return null;ke||(ke=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));var g=ke.exec(o);if(!g)return null;var F=parseInt(g[1],10),N=parseInt(g[2],10);N=N>=1&&N<=12?N-1:0;var J=parseInt(g[3],10);J=J>=1&&J<=31?J:1;var le=parseInt(g[4],10);le=le>=0&&le<=23?le:0;var ve=parseInt(g[5],10);ve=ve>=0&&ve<=59?ve:0;var ye=parseInt(g[6],10);ye=ye>=0&&ye<=59?ye:0;var pe=g[7]||"Z",Ae=parseInt(g[8],10);Ae=Ae>=0&&Ae<=23?Ae:0;var Te=parseInt(g[9],10)||0;return Te=Te>=0&&Te<=59?Te:0,pe==="-"?(le+=Ae,ve+=Te):pe==="+"&&(le-=Ae,ve-=Te),new Date(Date.UTC(F,N,J,le,ve,ye))}}]),R}();n.PDFDateString=we;function z(R,d){var o=d.scale,g=o===void 0?1:o,F=d.rotation,N=F===void 0?0:F,J=R.attributes.style,le=J.width,ve=J.height,ye=[0,0,parseInt(le),parseInt(ve)];return new Z({viewBox:ye,scale:g,rotation:N})}},(s,n,e)=>{s.exports=e(3)},(s,n,e)=>{s=e.nmd(s);function r(f){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?r=function(S){return typeof S}:r=function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},r(f)}var i=function(f){var m=Object.prototype,S=m.hasOwnProperty,D,M=typeof Symbol=="function"?Symbol:{},j=M.iterator||"@@iterator",W=M.asyncIterator||"@@asyncIterator",V=M.toStringTag||"@@toStringTag";function O(v,A,E){return Object.defineProperty(v,A,{value:E,enumerable:!0,configurable:!0,writable:!0}),v[A]}try{O({},"")}catch{O=function(E,q,re){return E[q]=re}}function w(v,A,E,q){var re=A&&A.prototype instanceof l?A:l,Y=Object.create(re.prototype),be=new H(q||[]);return Y._invoke=$(v,E,be),Y}f.wrap=w;function x(v,A,E){try{return{type:"normal",arg:v.call(A,E)}}catch(q){return{type:"throw",arg:q}}}var k="suspendedStart",L="suspendedYield",_="executing",B="completed",h={};function l(){}function u(){}function y(){}var p={};O(p,j,function(){return this});var c=Object.getPrototypeOf,b=c&&c(c(X([])));b&&b!==m&&S.call(b,j)&&(p=b);var C=y.prototype=l.prototype=Object.create(p);u.prototype=y,O(C,"constructor",y),O(y,"constructor",u),u.displayName=O(y,V,"GeneratorFunction");function G(v){["next","throw","return"].forEach(function(A){O(v,A,function(E){return this._invoke(A,E)})})}f.isGeneratorFunction=function(v){var A=typeof v=="function"&&v.constructor;return A?A===u||(A.displayName||A.name)==="GeneratorFunction":!1},f.mark=function(v){return Object.setPrototypeOf?Object.setPrototypeOf(v,y):(v.__proto__=y,O(v,V,"GeneratorFunction")),v.prototype=Object.create(C),v},f.awrap=function(v){return{__await:v}};function I(v,A){function E(Y,be,ke,we){var z=x(v[Y],v,be);if(z.type==="throw")we(z.arg);else{var R=z.arg,d=R.value;return d&&r(d)==="object"&&S.call(d,"__await")?A.resolve(d.__await).then(function(o){E("next",o,ke,we)},function(o){E("throw",o,ke,we)}):A.resolve(d).then(function(o){R.value=o,ke(R)},function(o){return E("throw",o,ke,we)})}}var q;function re(Y,be){function ke(){return new A(function(we,z){E(Y,be,we,z)})}return q=q?q.then(ke,ke):ke()}this._invoke=re}G(I.prototype),O(I.prototype,W,function(){return this}),f.AsyncIterator=I,f.async=function(v,A,E,q,re){re===void 0&&(re=Promise);var Y=new I(w(v,A,E,q),re);return f.isGeneratorFunction(A)?Y:Y.next().then(function(be){return be.done?be.value:Y.next()})};function $(v,A,E){var q=k;return function(Y,be){if(q===_)throw new Error("Generator is already running");if(q===B){if(Y==="throw")throw be;return P()}for(E.method=Y,E.arg=be;;){var ke=E.delegate;if(ke){var we=ee(ke,E);if(we){if(we===h)continue;return we}}if(E.method==="next")E.sent=E._sent=E.arg;else if(E.method==="throw"){if(q===k)throw q=B,E.arg;E.dispatchException(E.arg)}else E.method==="return"&&E.abrupt("return",E.arg);q=_;var z=x(v,A,E);if(z.type==="normal"){if(q=E.done?B:L,z.arg===h)continue;return{value:z.arg,done:E.done}}else z.type==="throw"&&(q=B,E.method="throw",E.arg=z.arg)}}}function ee(v,A){var E=v.iterator[A.method];if(E===D){if(A.delegate=null,A.method==="throw"){if(v.iterator.return&&(A.method="return",A.arg=D,ee(v,A),A.method==="throw"))return h;A.method="throw",A.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var q=x(E,v.iterator,A.arg);if(q.type==="throw")return A.method="throw",A.arg=q.arg,A.delegate=null,h;var re=q.arg;if(!re)return A.method="throw",A.arg=new TypeError("iterator result is not an object"),A.delegate=null,h;if(re.done)A[v.resultName]=re.value,A.next=v.nextLoc,A.method!=="return"&&(A.method="next",A.arg=D);else return re;return A.delegate=null,h}G(C),O(C,V,"Generator"),O(C,j,function(){return this}),O(C,"toString",function(){return"[object Generator]"});function Z(v){var A={tryLoc:v[0]};1 in v&&(A.catchLoc=v[1]),2 in v&&(A.finallyLoc=v[2],A.afterLoc=v[3]),this.tryEntries.push(A)}function ie(v){var A=v.completion||{};A.type="normal",delete A.arg,v.completion=A}function H(v){this.tryEntries=[{tryLoc:"root"}],v.forEach(Z,this),this.reset(!0)}f.keys=function(v){var A=[];for(var E in v)A.push(E);return A.reverse(),function q(){for(;A.length;){var re=A.pop();if(re in v)return q.value=re,q.done=!1,q}return q.done=!0,q}};function X(v){if(v){var A=v[j];if(A)return A.call(v);if(typeof v.next=="function")return v;if(!isNaN(v.length)){var E=-1,q=function re(){for(;++E<v.length;)if(S.call(v,E))return re.value=v[E],re.done=!1,re;return re.value=D,re.done=!0,re};return q.next=q}}return{next:P}}f.values=X;function P(){return{value:D,done:!0}}return H.prototype={constructor:H,reset:function(A){if(this.prev=0,this.next=0,this.sent=this._sent=D,this.done=!1,this.delegate=null,this.method="next",this.arg=D,this.tryEntries.forEach(ie),!A)for(var E in this)E.charAt(0)==="t"&&S.call(this,E)&&!isNaN(+E.slice(1))&&(this[E]=D)},stop:function(){this.done=!0;var A=this.tryEntries[0],E=A.completion;if(E.type==="throw")throw E.arg;return this.rval},dispatchException:function(A){if(this.done)throw A;var E=this;function q(z,R){return be.type="throw",be.arg=A,E.next=z,R&&(E.method="next",E.arg=D),!!R}for(var re=this.tryEntries.length-1;re>=0;--re){var Y=this.tryEntries[re],be=Y.completion;if(Y.tryLoc==="root")return q("end");if(Y.tryLoc<=this.prev){var ke=S.call(Y,"catchLoc"),we=S.call(Y,"finallyLoc");if(ke&&we){if(this.prev<Y.catchLoc)return q(Y.catchLoc,!0);if(this.prev<Y.finallyLoc)return q(Y.finallyLoc)}else if(ke){if(this.prev<Y.catchLoc)return q(Y.catchLoc,!0)}else if(we){if(this.prev<Y.finallyLoc)return q(Y.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(A,E){for(var q=this.tryEntries.length-1;q>=0;--q){var re=this.tryEntries[q];if(re.tryLoc<=this.prev&&S.call(re,"finallyLoc")&&this.prev<re.finallyLoc){var Y=re;break}}Y&&(A==="break"||A==="continue")&&Y.tryLoc<=E&&E<=Y.finallyLoc&&(Y=null);var be=Y?Y.completion:{};return be.type=A,be.arg=E,Y?(this.method="next",this.next=Y.finallyLoc,h):this.complete(be)},complete:function(A,E){if(A.type==="throw")throw A.arg;return A.type==="break"||A.type==="continue"?this.next=A.arg:A.type==="return"?(this.rval=this.arg=A.arg,this.method="return",this.next="end"):A.type==="normal"&&E&&(this.next=E),h},finish:function(A){for(var E=this.tryEntries.length-1;E>=0;--E){var q=this.tryEntries[E];if(q.finallyLoc===A)return this.complete(q.completion,q.afterLoc),ie(q),h}},catch:function(A){for(var E=this.tryEntries.length-1;E>=0;--E){var q=this.tryEntries[E];if(q.tryLoc===A){var re=q.completion;if(re.type==="throw"){var Y=re.arg;ie(q)}return Y}}throw new Error("illegal catch attempt")},delegateYield:function(A,E,q){return this.delegate={iterator:X(A),resultName:E,nextLoc:q},this.method==="next"&&(this.arg=D),h}},f}(r(s)==="object"?s.exports:{});try{regeneratorRuntime=i}catch{(typeof globalThis=="undefined"?"undefined":r(globalThis))==="object"?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}},(s,n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.VerbosityLevel=n.Util=n.UnknownErrorException=n.UnexpectedResponseException=n.UNSUPPORTED_FEATURES=n.TextRenderingMode=n.StreamType=n.RenderingIntentFlag=n.PermissionFlag=n.PasswordResponses=n.PasswordException=n.PageActionEventType=n.OPS=n.MissingPDFException=n.IsLittleEndianCached=n.IsEvalSupportedCached=n.InvalidPDFException=n.ImageKind=n.IDENTITY_MATRIX=n.FormatError=n.FontType=n.FONT_IDENTITY_MATRIX=n.DocumentActionEventType=n.CMapCompressionType=n.BaseException=n.AnnotationType=n.AnnotationStateModelType=n.AnnotationReviewState=n.AnnotationReplyType=n.AnnotationMode=n.AnnotationMarkedState=n.AnnotationFlag=n.AnnotationFieldFlag=n.AnnotationBorderStyleType=n.AnnotationActionEventType=n.AbortException=void 0,n.arrayByteLength=ce,n.arraysToBytes=Se,n.assert=ye,n.bytesToString=Q,n.createObjectURL=wt,n.createPromiseCapability=At,n.createValidAbsoluteUrl=Te,n.escapeString=Je,n.getModificationDate=Xt,n.getVerbosityLevel=N,n.info=J,n.isArrayBuffer=xt,n.isArrayEqual=Ft,n.isAscii=rt,n.isBool=Rt,n.isNum=Yt,n.isSameOrigin=pe,n.isString=Ot,n.objectFromMap=Le,n.objectSize=De,n.removeNullCharacters=ne,n.setVerbosityLevel=F,n.shadow=Ee,n.string32=Re,n.stringToBytes=he,n.stringToPDFString=Xe,n.stringToUTF16BEString=it,n.stringToUTF8String=yt,n.unreachable=ve,n.utf8StringToString=ht,n.warn=le,e(5);function r(ue,Pe){for(var se=0;se<Pe.length;se++){var ge=Pe[se];ge.enumerable=ge.enumerable||!1,ge.configurable=!0,"value"in ge&&(ge.writable=!0),Object.defineProperty(ue,ge.key,ge)}}function i(ue,Pe,se){return Pe&&r(ue.prototype,Pe),se&&r(ue,se),ue}function f(ue){return D(ue)||S(ue)||w(ue)||m()}function m(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S(ue){if(typeof Symbol!="undefined"&&ue[Symbol.iterator]!=null||ue["@@iterator"]!=null)return Array.from(ue)}function D(ue){if(Array.isArray(ue))return x(ue)}function M(ue,Pe){return V(ue)||W(ue,Pe)||w(ue,Pe)||j()}function j(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W(ue,Pe){var se=ue==null?null:typeof Symbol!="undefined"&&ue[Symbol.iterator]||ue["@@iterator"];if(se!=null){var ge=[],Ue=!0,ze=!1,$e,qe;try{for(se=se.call(ue);!(Ue=($e=se.next()).done)&&(ge.push($e.value),!(Pe&&ge.length===Pe));Ue=!0);}catch(nt){ze=!0,qe=nt}finally{try{!Ue&&se.return!=null&&se.return()}finally{if(ze)throw qe}}return ge}}function V(ue){if(Array.isArray(ue))return ue}function O(ue,Pe){var se=typeof Symbol!="undefined"&&ue[Symbol.iterator]||ue["@@iterator"];if(!se){if(Array.isArray(ue)||(se=w(ue))||Pe&&ue&&typeof ue.length=="number"){se&&(ue=se);var ge=0,Ue=function(){};return{s:Ue,n:function(){return ge>=ue.length?{done:!0}:{done:!1,value:ue[ge++]}},e:function(ot){throw ot},f:Ue}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ze=!0,$e=!1,qe;return{s:function(){se=se.call(ue)},n:function(){var ot=se.next();return ze=ot.done,ot},e:function(ot){$e=!0,qe=ot},f:function(){try{!ze&&se.return!=null&&se.return()}finally{if($e)throw qe}}}}function w(ue,Pe){if(!!ue){if(typeof ue=="string")return x(ue,Pe);var se=Object.prototype.toString.call(ue).slice(8,-1);if(se==="Object"&&ue.constructor&&(se=ue.constructor.name),se==="Map"||se==="Set")return Array.from(ue);if(se==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(se))return x(ue,Pe)}}function x(ue,Pe){(Pe==null||Pe>ue.length)&&(Pe=ue.length);for(var se=0,ge=new Array(Pe);se<Pe;se++)ge[se]=ue[se];return ge}function k(ue){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?k=function(se){return typeof se}:k=function(se){return se&&typeof Symbol=="function"&&se.constructor===Symbol&&se!==Symbol.prototype?"symbol":typeof se},k(ue)}function L(ue,Pe){if(!(ue instanceof Pe))throw new TypeError("Cannot call a class as a function")}function _(ue,Pe){if(typeof Pe!="function"&&Pe!==null)throw new TypeError("Super expression must either be null or a function");ue.prototype=Object.create(Pe&&Pe.prototype,{constructor:{value:ue,writable:!0,configurable:!0}}),Pe&&B(ue,Pe)}function B(ue,Pe){return B=Object.setPrototypeOf||function(ge,Ue){return ge.__proto__=Ue,ge},B(ue,Pe)}function h(ue){var Pe=y();return function(){var ge=p(ue),Ue;if(Pe){var ze=p(this).constructor;Ue=Reflect.construct(ge,arguments,ze)}else Ue=ge.apply(this,arguments);return l(this,Ue)}}function l(ue,Pe){if(Pe&&(k(Pe)==="object"||typeof Pe=="function"))return Pe;if(Pe!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return u(ue)}function u(ue){if(ue===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ue}function y(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function p(ue){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(se){return se.__proto__||Object.getPrototypeOf(se)},p(ue)}var c=[1,0,0,1,0,0];n.IDENTITY_MATRIX=c;var b=[.001,0,0,.001,0,0];n.FONT_IDENTITY_MATRIX=b;var C={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};n.RenderingIntentFlag=C;var G={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};n.AnnotationMode=G;var I={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};n.PermissionFlag=I;var $={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};n.TextRenderingMode=$;var ee={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};n.ImageKind=ee;var Z={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};n.AnnotationType=Z;var ie={MARKED:"Marked",REVIEW:"Review"};n.AnnotationStateModelType=ie;var H={MARKED:"Marked",UNMARKED:"Unmarked"};n.AnnotationMarkedState=H;var X={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};n.AnnotationReviewState=X;var P={GROUP:"Group",REPLY:"R"};n.AnnotationReplyType=P;var v={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};n.AnnotationFlag=v;var A={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};n.AnnotationFieldFlag=A;var E={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};n.AnnotationBorderStyleType=E;var q={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};n.AnnotationActionEventType=q;var re={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};n.DocumentActionEventType=re;var Y={O:"PageOpen",C:"PageClose"};n.PageActionEventType=Y;var be={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};n.StreamType=be;var ke={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};n.FontType=ke;var we={ERRORS:0,WARNINGS:1,INFOS:5};n.VerbosityLevel=we;var z={NONE:0,BINARY:1,STREAM:2};n.CMapCompressionType=z;var R={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};n.OPS=R;var d={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};n.UNSUPPORTED_FEATURES=d;var o={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};n.PasswordResponses=o;var g=we.WARNINGS;function F(ue){Number.isInteger(ue)&&(g=ue)}function N(){return g}function J(ue){g>=we.INFOS&&console.log("Info: ".concat(ue))}function le(ue){g>=we.WARNINGS&&console.log("Warning: ".concat(ue))}function ve(ue){throw new Error(ue)}function ye(ue,Pe){ue||ve(Pe)}function pe(ue,Pe){var se;try{if(se=new URL(ue),!se.origin||se.origin==="null")return!1}catch{return!1}var ge=new URL(Pe,se);return se.origin===ge.origin}function Ae(ue){if(!ue)return!1;switch(ue.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Te(ue){var Pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!ue)return null;try{if(se&&typeof ue=="string"){if(se.addDefaultProtocol&&ue.startsWith("www.")){var ge=ue.match(/\./g);ge&&ge.length>=2&&(ue="http://".concat(ue))}if(se.tryConvertEncoding)try{ue=yt(ue)}catch{}}var Ue=Pe?new URL(ue,Pe):new URL(ue);if(Ae(Ue))return Ue}catch{}return null}function Ee(ue,Pe,se){return Object.defineProperty(ue,Pe,{value:se,enumerable:!0,configurable:!0,writable:!1}),se}var Fe=function(){function Pe(se,ge){this.constructor===Pe&&ve("Cannot initialize BaseException."),this.message=se,this.name=ge}return Pe.prototype=new Error,Pe.constructor=Pe,Pe}();n.BaseException=Fe;var Ie=function(ue){_(se,ue);var Pe=h(se);function se(ge,Ue){var ze;return L(this,se),ze=Pe.call(this,ge,"PasswordException"),ze.code=Ue,ze}return se}(Fe);n.PasswordException=Ie;var We=function(ue){_(se,ue);var Pe=h(se);function se(ge,Ue){var ze;return L(this,se),ze=Pe.call(this,ge,"UnknownErrorException"),ze.details=Ue,ze}return se}(Fe);n.UnknownErrorException=We;var je=function(ue){_(se,ue);var Pe=h(se);function se(ge){return L(this,se),Pe.call(this,ge,"InvalidPDFException")}return se}(Fe);n.InvalidPDFException=je;var fe=function(ue){_(se,ue);var Pe=h(se);function se(ge){return L(this,se),Pe.call(this,ge,"MissingPDFException")}return se}(Fe);n.MissingPDFException=fe;var de=function(ue){_(se,ue);var Pe=h(se);function se(ge,Ue){var ze;return L(this,se),ze=Pe.call(this,ge,"UnexpectedResponseException"),ze.status=Ue,ze}return se}(Fe);n.UnexpectedResponseException=de;var U=function(ue){_(se,ue);var Pe=h(se);function se(ge){return L(this,se),Pe.call(this,ge,"FormatError")}return se}(Fe);n.FormatError=U;var te=function(ue){_(se,ue);var Pe=h(se);function se(ge){return L(this,se),Pe.call(this,ge,"AbortException")}return se}(Fe);n.AbortException=te;var K=/\x00+/g,oe=/[\x01-\x1F]/g;function ne(ue){var Pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return typeof ue!="string"?(le("The argument for removeNullCharacters must be a string."),ue):(Pe&&(ue=ue.replace(oe," ")),ue.replace(K,""))}function Q(ue){ye(ue!==null&&k(ue)==="object"&&ue.length!==void 0,"Invalid argument for bytesToString");var Pe=ue.length,se=8192;if(Pe<se)return String.fromCharCode.apply(null,ue);for(var ge=[],Ue=0;Ue<Pe;Ue+=se){var ze=Math.min(Ue+se,Pe),$e=ue.subarray(Ue,ze);ge.push(String.fromCharCode.apply(null,$e))}return ge.join("")}function he(ue){ye(typeof ue=="string","Invalid argument for stringToBytes");for(var Pe=ue.length,se=new Uint8Array(Pe),ge=0;ge<Pe;++ge)se[ge]=ue.charCodeAt(ge)&255;return se}function ce(ue){return ue.length!==void 0?ue.length:(ye(ue.byteLength!==void 0,"arrayByteLength - invalid argument."),ue.byteLength)}function Se(ue){var Pe=ue.length;if(Pe===1&&ue[0]instanceof Uint8Array)return ue[0];for(var se=0,ge=0;ge<Pe;ge++)se+=ce(ue[ge]);for(var Ue=0,ze=new Uint8Array(se),$e=0;$e<Pe;$e++){var qe=ue[$e];qe instanceof Uint8Array||(typeof qe=="string"?qe=he(qe):qe=new Uint8Array(qe));var nt=qe.byteLength;ze.set(qe,Ue),Ue+=nt}return ze}function Re(ue){return String.fromCharCode(ue>>24&255,ue>>16&255,ue>>8&255,ue&255)}function De(ue){return Object.keys(ue).length}function Le(ue){var Pe=Object.create(null),se=O(ue),ge;try{for(se.s();!(ge=se.n()).done;){var Ue=M(ge.value,2),ze=Ue[0],$e=Ue[1];Pe[ze]=$e}}catch(qe){se.e(qe)}finally{se.f()}return Pe}function _e(){var ue=new Uint8Array(4);ue[0]=1;var Pe=new Uint32Array(ue.buffer,0,1);return Pe[0]===1}var Ge={get value(){return Ee(this,"value",_e())}};n.IsLittleEndianCached=Ge;function Oe(){try{return new Function(""),!0}catch{return!1}}var xe={get value(){return Ee(this,"value",Oe())}};n.IsEvalSupportedCached=xe;var Be=f(Array(256).keys()).map(function(ue){return ue.toString(16).padStart(2,"0")}),Ne=function(){function ue(){L(this,ue)}return i(ue,null,[{key:"makeHexColor",value:function(se,ge,Ue){return"#".concat(Be[se]).concat(Be[ge]).concat(Be[Ue])}},{key:"transform",value:function(se,ge){return[se[0]*ge[0]+se[2]*ge[1],se[1]*ge[0]+se[3]*ge[1],se[0]*ge[2]+se[2]*ge[3],se[1]*ge[2]+se[3]*ge[3],se[0]*ge[4]+se[2]*ge[5]+se[4],se[1]*ge[4]+se[3]*ge[5]+se[5]]}},{key:"applyTransform",value:function(se,ge){var Ue=se[0]*ge[0]+se[1]*ge[2]+ge[4],ze=se[0]*ge[1]+se[1]*ge[3]+ge[5];return[Ue,ze]}},{key:"applyInverseTransform",value:function(se,ge){var Ue=ge[0]*ge[3]-ge[1]*ge[2],ze=(se[0]*ge[3]-se[1]*ge[2]+ge[2]*ge[5]-ge[4]*ge[3])/Ue,$e=(-se[0]*ge[1]+se[1]*ge[0]+ge[4]*ge[1]-ge[5]*ge[0])/Ue;return[ze,$e]}},{key:"getAxialAlignedBoundingBox",value:function(se,ge){var Ue=ue.applyTransform(se,ge),ze=ue.applyTransform(se.slice(2,4),ge),$e=ue.applyTransform([se[0],se[3]],ge),qe=ue.applyTransform([se[2],se[1]],ge);return[Math.min(Ue[0],ze[0],$e[0],qe[0]),Math.min(Ue[1],ze[1],$e[1],qe[1]),Math.max(Ue[0],ze[0],$e[0],qe[0]),Math.max(Ue[1],ze[1],$e[1],qe[1])]}},{key:"inverseTransform",value:function(se){var ge=se[0]*se[3]-se[1]*se[2];return[se[3]/ge,-se[1]/ge,-se[2]/ge,se[0]/ge,(se[2]*se[5]-se[4]*se[3])/ge,(se[4]*se[1]-se[5]*se[0])/ge]}},{key:"apply3dTransform",value:function(se,ge){return[se[0]*ge[0]+se[1]*ge[1]+se[2]*ge[2],se[3]*ge[0]+se[4]*ge[1]+se[5]*ge[2],se[6]*ge[0]+se[7]*ge[1]+se[8]*ge[2]]}},{key:"singularValueDecompose2dScale",value:function(se){var ge=[se[0],se[2],se[1],se[3]],Ue=se[0]*ge[0]+se[1]*ge[2],ze=se[0]*ge[1]+se[1]*ge[3],$e=se[2]*ge[0]+se[3]*ge[2],qe=se[2]*ge[1]+se[3]*ge[3],nt=(Ue+qe)/2,ot=Math.sqrt(Math.pow(Ue+qe,2)-4*(Ue*qe-$e*ze))/2,vt=nt+ot||1,ft=nt-ot||1;return[Math.sqrt(vt),Math.sqrt(ft)]}},{key:"normalizeRect",value:function(se){var ge=se.slice(0);return se[0]>se[2]&&(ge[0]=se[2],ge[2]=se[0]),se[1]>se[3]&&(ge[1]=se[3],ge[3]=se[1]),ge}},{key:"intersect",value:function(se,ge){function Ue(nt,ot){return nt-ot}var ze=[se[0],se[2],ge[0],ge[2]].sort(Ue),$e=[se[1],se[3],ge[1],ge[3]].sort(Ue),qe=[];if(se=ue.normalizeRect(se),ge=ue.normalizeRect(ge),ze[0]===se[0]&&ze[1]===ge[0]||ze[0]===ge[0]&&ze[1]===se[0])qe[0]=ze[1],qe[2]=ze[2];else return null;if($e[0]===se[1]&&$e[1]===ge[1]||$e[0]===ge[1]&&$e[1]===se[1])qe[1]=$e[1],qe[3]=$e[2];else return null;return qe}},{key:"bezierBoundingBox",value:function(se,ge,Ue,ze,$e,qe,nt,ot){for(var vt=[],ft=[[],[]],_t,gt,It,at,jt,Gt,nr,qt,zt=0;zt<2;++zt){if(zt===0?(gt=6*se-12*Ue+6*$e,_t=-3*se+9*Ue-9*$e+3*nt,It=3*Ue-3*se):(gt=6*ge-12*ze+6*qe,_t=-3*ge+9*ze-9*qe+3*ot,It=3*ze-3*ge),Math.abs(_t)<1e-12){if(Math.abs(gt)<1e-12)continue;at=-It/gt,0<at&&at<1&&vt.push(at);continue}nr=gt*gt-4*It*_t,qt=Math.sqrt(nr),!(nr<0)&&(jt=(-gt+qt)/(2*_t),0<jt&&jt<1&&vt.push(jt),Gt=(-gt-qt)/(2*_t),0<Gt&&Gt<1&&vt.push(Gt))}for(var mt=vt.length,lt,Mt=mt;mt--;)at=vt[mt],lt=1-at,ft[0][mt]=lt*lt*lt*se+3*lt*lt*at*Ue+3*lt*at*at*$e+at*at*at*nt,ft[1][mt]=lt*lt*lt*ge+3*lt*lt*at*ze+3*lt*at*at*qe+at*at*at*ot;return ft[0][Mt]=se,ft[1][Mt]=ge,ft[0][Mt+1]=nt,ft[1][Mt+1]=ot,ft[0].length=ft[1].length=Mt+2,[Math.min.apply(Math,f(ft[0])),Math.min.apply(Math,f(ft[1])),Math.max.apply(Math,f(ft[0])),Math.max.apply(Math,f(ft[1]))]}}]),ue}();n.Util=Ne;var Ve=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Xe(ue){var Pe=ue.length,se=[];if(ue[0]==="\xFE"&&ue[1]==="\xFF")for(var ge=2;ge<Pe;ge+=2)se.push(String.fromCharCode(ue.charCodeAt(ge)<<8|ue.charCodeAt(ge+1)));else if(ue[0]==="\xFF"&&ue[1]==="\xFE")for(var Ue=2;Ue<Pe;Ue+=2)se.push(String.fromCharCode(ue.charCodeAt(Ue+1)<<8|ue.charCodeAt(Ue)));else for(var ze=0;ze<Pe;++ze){var $e=Ve[ue.charCodeAt(ze)];se.push($e?String.fromCharCode($e):ue.charAt(ze))}return se.join("")}function Je(ue){return ue.replace(/([()\\\n\r])/g,function(Pe){return Pe===`
`?"\\n":Pe==="\r"?"\\r":"\\".concat(Pe)})}function rt(ue){return/^[\x00-\x7F]*$/.test(ue)}function it(ue){for(var Pe=["\xFE\xFF"],se=0,ge=ue.length;se<ge;se++){var Ue=ue.charCodeAt(se);Pe.push(String.fromCharCode(Ue>>8&255),String.fromCharCode(Ue&255))}return Pe.join("")}function yt(ue){return decodeURIComponent(escape(ue))}function ht(ue){return unescape(encodeURIComponent(ue))}function Rt(ue){return typeof ue=="boolean"}function Yt(ue){return typeof ue=="number"}function Ot(ue){return typeof ue=="string"}function xt(ue){return k(ue)==="object"&&ue!==null&&ue.byteLength!==void 0}function Ft(ue,Pe){if(ue.length!==Pe.length)return!1;for(var se=0,ge=ue.length;se<ge;se++)if(ue[se]!==Pe[se])return!1;return!0}function Xt(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Date,Pe=[ue.getUTCFullYear().toString(),(ue.getUTCMonth()+1).toString().padStart(2,"0"),ue.getUTCDate().toString().padStart(2,"0"),ue.getUTCHours().toString().padStart(2,"0"),ue.getUTCMinutes().toString().padStart(2,"0"),ue.getUTCSeconds().toString().padStart(2,"0")];return Pe.join("")}function At(){var ue=Object.create(null),Pe=!1;return Object.defineProperty(ue,"settled",{get:function(){return Pe}}),ue.promise=new Promise(function(se,ge){ue.resolve=function(Ue){Pe=!0,se(Ue)},ue.reject=function(Ue){Pe=!0,ge(Ue)}}),ue}function wt(ue){var Pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(URL.createObjectURL&&typeof Blob!="undefined"&&!se)return URL.createObjectURL(new Blob([ue],{type:Pe}));for(var ge="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Ue="data:".concat(Pe,";base64,"),ze=0,$e=ue.length;ze<$e;ze+=3){var qe=ue[ze]&255,nt=ue[ze+1]&255,ot=ue[ze+2]&255,vt=qe>>2,ft=(qe&3)<<4|nt>>4,_t=ze+1<$e?(nt&15)<<2|ot>>6:64,gt=ze+2<$e?ot&63:64;Ue+=ge[vt]+ge[ft]+ge[_t]+ge[gt]}return Ue}},(s,n,e)=>{var r=e(6);(typeof globalThis=="undefined"||!globalThis._pdfjsCompatibilityChecked)&&((typeof globalThis=="undefined"||globalThis.Math!==Math)&&(globalThis=e(7)),globalThis._pdfjsCompatibilityChecked=!0,function(){globalThis.btoa||!r.isNodeJS||(globalThis.btoa=function(f){return Buffer.from(f,"binary").toString("base64")})}(),function(){globalThis.atob||!r.isNodeJS||(globalThis.atob=function(f){return Buffer.from(f,"base64").toString("binary")})}(),function(){globalThis.DOMMatrix||!r.isNodeJS||(globalThis.DOMMatrix=e(69))}(),function(){Object.fromEntries||e(70)}(),function(){globalThis.Promise.allSettled||(globalThis.Promise=e(97))}(),function(){globalThis.ReadableStream||!r.isNodeJS||(globalThis.ReadableStream=e(134).ReadableStream)}())},(s,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.isNodeJS=void 0;function e(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(m){return typeof m}:e=function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},e(i)}var r=(typeof process=="undefined"?"undefined":e(process))==="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");n.isNodeJS=r},(s,n,e)=>{e(8),s.exports=e(10)},(s,n,e)=>{var r=e(9),i=e(10);r({global:!0},{globalThis:i})},(s,n,e)=>{var r=e(10),i=e(11).f,f=e(47),m=e(50),S=e(41),D=e(57),M=e(68);s.exports=function(j,W){var V=j.target,O=j.global,w=j.stat,x,k,L,_,B,h;if(O?k=r:w?k=r[V]||S(V,{}):k=(r[V]||{}).prototype,k)for(L in W){if(B=W[L],j.noTargetGet?(h=i(k,L),_=h&&h.value):_=k[L],x=M(O?L:V+(w?".":"#")+L,j.forced),!x&&_!==void 0){if(typeof B==typeof _)continue;D(B,_)}(j.sham||_&&_.sham)&&f(B,"sham",!0),m(k,L,B,j)}}},s=>{var n=function(e){return e&&e.Math==Math&&e};s.exports=n(typeof globalThis=="object"&&globalThis)||n(typeof window=="object"&&window)||n(typeof self=="object"&&self)||n(typeof commonjsGlobal=="object"&&commonjsGlobal)||function(){return this}()||Function("return this")()},(s,n,e)=>{var r=e(12),i=e(14),f=e(15),m=e(16),S=e(17),D=e(22),M=e(42),j=e(45),W=Object.getOwnPropertyDescriptor;n.f=r?W:function(O,w){if(O=S(O),w=D(w),j)try{return W(O,w)}catch{}if(M(O,w))return m(!i(f.f,O,w),O[w])}},(s,n,e)=>{var r=e(13);s.exports=!r(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},s=>{s.exports=function(n){try{return!!n()}catch{return!0}}},s=>{var n=Function.prototype.call;s.exports=n.bind?n.bind(n):function(){return n.apply(n,arguments)}},(s,n)=>{var e={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!e.call({1:2},1);n.f=i?function(m){var S=r(this,m);return!!S&&S.enumerable}:e},s=>{s.exports=function(n,e){return{enumerable:!(n&1),configurable:!(n&2),writable:!(n&4),value:e}}},(s,n,e)=>{var r=e(18),i=e(21);s.exports=function(f){return r(i(f))}},(s,n,e)=>{var r=e(10),i=e(19),f=e(13),m=e(20),S=r.Object,D=i("".split);s.exports=f(function(){return!S("z").propertyIsEnumerable(0)})?function(M){return m(M)=="String"?D(M,""):S(M)}:S},s=>{var n=Function.prototype,e=n.bind,r=n.call,i=e&&e.bind(r);s.exports=e?function(f){return f&&i(r,f)}:function(f){return f&&function(){return r.apply(f,arguments)}}},(s,n,e)=>{var r=e(19),i=r({}.toString),f=r("".slice);s.exports=function(m){return f(i(m),8,-1)}},(s,n,e)=>{var r=e(10),i=r.TypeError;s.exports=function(f){if(f==null)throw i("Can't call method on "+f);return f}},(s,n,e)=>{var r=e(23),i=e(26);s.exports=function(f){var m=r(f,"string");return i(m)?m:m+""}},(s,n,e)=>{var r=e(10),i=e(14),f=e(24),m=e(26),S=e(33),D=e(36),M=e(37),j=r.TypeError,W=M("toPrimitive");s.exports=function(V,O){if(!f(V)||m(V))return V;var w=S(V,W),x;if(w){if(O===void 0&&(O="default"),x=i(w,V,O),!f(x)||m(x))return x;throw j("Can't convert object to primitive value")}return O===void 0&&(O="number"),D(V,O)}},(s,n,e)=>{var r=e(25);s.exports=function(i){return typeof i=="object"?i!==null:r(i)}},s=>{s.exports=function(n){return typeof n=="function"}},(s,n,e)=>{var r=e(10),i=e(27),f=e(25),m=e(28),S=e(29),D=r.Object;s.exports=S?function(M){return typeof M=="symbol"}:function(M){var j=i("Symbol");return f(j)&&m(j.prototype,D(M))}},(s,n,e)=>{var r=e(10),i=e(25),f=function(m){return i(m)?m:void 0};s.exports=function(m,S){return arguments.length<2?f(r[m]):r[m]&&r[m][S]}},(s,n,e)=>{var r=e(19);s.exports=r({}.isPrototypeOf)},(s,n,e)=>{var r=e(30);s.exports=r&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},(s,n,e)=>{var r=e(31),i=e(13);s.exports=!!Object.getOwnPropertySymbols&&!i(function(){var f=Symbol();return!String(f)||!(Object(f)instanceof Symbol)||!Symbol.sham&&r&&r<41})},(s,n,e)=>{var r=e(10),i=e(32),f=r.process,m=r.Deno,S=f&&f.versions||m&&m.version,D=S&&S.v8,M,j;D&&(M=D.split("."),j=M[0]>0&&M[0]<4?1:+(M[0]+M[1])),!j&&i&&(M=i.match(/Edge\/(\d+)/),(!M||M[1]>=74)&&(M=i.match(/Chrome\/(\d+)/),M&&(j=+M[1]))),s.exports=j},(s,n,e)=>{var r=e(27);s.exports=r("navigator","userAgent")||""},(s,n,e)=>{var r=e(34);s.exports=function(i,f){var m=i[f];return m==null?void 0:r(m)}},(s,n,e)=>{var r=e(10),i=e(25),f=e(35),m=r.TypeError;s.exports=function(S){if(i(S))return S;throw m(f(S)+" is not a function")}},(s,n,e)=>{var r=e(10),i=r.String;s.exports=function(f){try{return i(f)}catch{return"Object"}}},(s,n,e)=>{var r=e(10),i=e(14),f=e(25),m=e(24),S=r.TypeError;s.exports=function(D,M){var j,W;if(M==="string"&&f(j=D.toString)&&!m(W=i(j,D))||f(j=D.valueOf)&&!m(W=i(j,D))||M!=="string"&&f(j=D.toString)&&!m(W=i(j,D)))return W;throw S("Can't convert object to primitive value")}},(s,n,e)=>{var r=e(10),i=e(38),f=e(42),m=e(44),S=e(30),D=e(29),M=i("wks"),j=r.Symbol,W=j&&j.for,V=D?j:j&&j.withoutSetter||m;s.exports=function(O){if(!f(M,O)||!(S||typeof M[O]=="string")){var w="Symbol."+O;S&&f(j,O)?M[O]=j[O]:D&&W?M[O]=W(w):M[O]=V(w)}return M[O]}},(s,n,e)=>{var r=e(39),i=e(40);(s.exports=function(f,m){return i[f]||(i[f]=m!==void 0?m:{})})("versions",[]).push({version:"3.19.3",mode:r?"pure":"global",copyright:"\xA9 2021 Denis Pushkarev (zloirock.ru)"})},s=>{s.exports=!1},(s,n,e)=>{var r=e(10),i=e(41),f="__core-js_shared__",m=r[f]||i(f,{});s.exports=m},(s,n,e)=>{var r=e(10),i=Object.defineProperty;s.exports=function(f,m){try{i(r,f,{value:m,configurable:!0,writable:!0})}catch{r[f]=m}return m}},(s,n,e)=>{var r=e(19),i=e(43),f=r({}.hasOwnProperty);s.exports=Object.hasOwn||function(S,D){return f(i(S),D)}},(s,n,e)=>{var r=e(10),i=e(21),f=r.Object;s.exports=function(m){return f(i(m))}},(s,n,e)=>{var r=e(19),i=0,f=Math.random(),m=r(1 .toString);s.exports=function(S){return"Symbol("+(S===void 0?"":S)+")_"+m(++i+f,36)}},(s,n,e)=>{var r=e(12),i=e(13),f=e(46);s.exports=!r&&!i(function(){return Object.defineProperty(f("div"),"a",{get:function(){return 7}}).a!=7})},(s,n,e)=>{var r=e(10),i=e(24),f=r.document,m=i(f)&&i(f.createElement);s.exports=function(S){return m?f.createElement(S):{}}},(s,n,e)=>{var r=e(12),i=e(48),f=e(16);s.exports=r?function(m,S,D){return i.f(m,S,f(1,D))}:function(m,S,D){return m[S]=D,m}},(s,n,e)=>{var r=e(10),i=e(12),f=e(45),m=e(49),S=e(22),D=r.TypeError,M=Object.defineProperty;n.f=i?M:function(W,V,O){if(m(W),V=S(V),m(O),f)try{return M(W,V,O)}catch{}if("get"in O||"set"in O)throw D("Accessors not supported");return"value"in O&&(W[V]=O.value),W}},(s,n,e)=>{var r=e(10),i=e(24),f=r.String,m=r.TypeError;s.exports=function(S){if(i(S))return S;throw m(f(S)+" is not an object")}},(s,n,e)=>{var r=e(10),i=e(25),f=e(42),m=e(47),S=e(41),D=e(51),M=e(52),j=e(56).CONFIGURABLE,W=M.get,V=M.enforce,O=String(String).split("String");(s.exports=function(w,x,k,L){var _=L?!!L.unsafe:!1,B=L?!!L.enumerable:!1,h=L?!!L.noTargetGet:!1,l=L&&L.name!==void 0?L.name:x,u;if(i(k)&&(String(l).slice(0,7)==="Symbol("&&(l="["+String(l).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!f(k,"name")||j&&k.name!==l)&&m(k,"name",l),u=V(k),u.source||(u.source=O.join(typeof l=="string"?l:""))),w===r){B?w[x]=k:S(x,k);return}else _?!h&&w[x]&&(B=!0):delete w[x];B?w[x]=k:m(w,x,k)})(Function.prototype,"toString",function(){return i(this)&&W(this).source||D(this)})},(s,n,e)=>{var r=e(19),i=e(25),f=e(40),m=r(Function.toString);i(f.inspectSource)||(f.inspectSource=function(S){return m(S)}),s.exports=f.inspectSource},(s,n,e)=>{var r=e(53),i=e(10),f=e(19),m=e(24),S=e(47),D=e(42),M=e(40),j=e(54),W=e(55),V="Object already initialized",O=i.TypeError,w=i.WeakMap,x,k,L,_=function(c){return L(c)?k(c):x(c,{})},B=function(c){return function(b){var C;if(!m(b)||(C=k(b)).type!==c)throw O("Incompatible receiver, "+c+" required");return C}};if(r||M.state){var h=M.state||(M.state=new w),l=f(h.get),u=f(h.has),y=f(h.set);x=function(c,b){if(u(h,c))throw new O(V);return b.facade=c,y(h,c,b),b},k=function(c){return l(h,c)||{}},L=function(c){return u(h,c)}}else{var p=j("state");W[p]=!0,x=function(c,b){if(D(c,p))throw new O(V);return b.facade=c,S(c,p,b),b},k=function(c){return D(c,p)?c[p]:{}},L=function(c){return D(c,p)}}s.exports={set:x,get:k,has:L,enforce:_,getterFor:B}},(s,n,e)=>{var r=e(10),i=e(25),f=e(51),m=r.WeakMap;s.exports=i(m)&&/native code/.test(f(m))},(s,n,e)=>{var r=e(38),i=e(44),f=r("keys");s.exports=function(m){return f[m]||(f[m]=i(m))}},s=>{s.exports={}},(s,n,e)=>{var r=e(12),i=e(42),f=Function.prototype,m=r&&Object.getOwnPropertyDescriptor,S=i(f,"name"),D=S&&function(){}.name==="something",M=S&&(!r||r&&m(f,"name").configurable);s.exports={EXISTS:S,PROPER:D,CONFIGURABLE:M}},(s,n,e)=>{var r=e(42),i=e(58),f=e(11),m=e(48);s.exports=function(S,D){for(var M=i(D),j=m.f,W=f.f,V=0;V<M.length;V++){var O=M[V];r(S,O)||j(S,O,W(D,O))}}},(s,n,e)=>{var r=e(27),i=e(19),f=e(59),m=e(67),S=e(49),D=i([].concat);s.exports=r("Reflect","ownKeys")||function(j){var W=f.f(S(j)),V=m.f;return V?D(W,V(j)):W}},(s,n,e)=>{var r=e(60),i=e(66),f=i.concat("length","prototype");n.f=Object.getOwnPropertyNames||function(S){return r(S,f)}},(s,n,e)=>{var r=e(19),i=e(42),f=e(17),m=e(61).indexOf,S=e(55),D=r([].push);s.exports=function(M,j){var W=f(M),V=0,O=[],w;for(w in W)!i(S,w)&&i(W,w)&&D(O,w);for(;j.length>V;)i(W,w=j[V++])&&(~m(O,w)||D(O,w));return O}},(s,n,e)=>{var r=e(17),i=e(62),f=e(64),m=function(S){return function(D,M,j){var W=r(D),V=f(W),O=i(j,V),w;if(S&&M!=M){for(;V>O;)if(w=W[O++],w!=w)return!0}else for(;V>O;O++)if((S||O in W)&&W[O]===M)return S||O||0;return!S&&-1}};s.exports={includes:m(!0),indexOf:m(!1)}},(s,n,e)=>{var r=e(63),i=Math.max,f=Math.min;s.exports=function(m,S){var D=r(m);return D<0?i(D+S,0):f(D,S)}},s=>{var n=Math.ceil,e=Math.floor;s.exports=function(r){var i=+r;return i!==i||i===0?0:(i>0?e:n)(i)}},(s,n,e)=>{var r=e(65);s.exports=function(i){return r(i.length)}},(s,n,e)=>{var r=e(63),i=Math.min;s.exports=function(f){return f>0?i(r(f),9007199254740991):0}},s=>{s.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},(s,n)=>{n.f=Object.getOwnPropertySymbols},(s,n,e)=>{var r=e(13),i=e(25),f=/#|\.prototype\./,m=function(W,V){var O=D[S(W)];return O==j?!0:O==M?!1:i(V)?r(V):!!V},S=m.normalize=function(W){return String(W).replace(f,".").toLowerCase()},D=m.data={},M=m.NATIVE="N",j=m.POLYFILL="P";s.exports=m},(s,n,e)=>{var r,i;function f(m){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?f=function(D){return typeof D}:f=function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},f(m)}(function(m,S){f(n)==="object"?s.exports=S():(r=S,i=typeof r=="function"?r.call(n,e,n,s):r,i!==void 0&&(s.exports=i))})(void 0,function(){function m(h){var l=new k,u=Array.from(h);if(!u.every(function(we){return!Number.isNaN(we)}))throw TypeError('CSSMatrix: "'+h+'" must only have numbers.');if(u.length===16){var y=u[0],p=u[1],c=u[2],b=u[3],C=u[4],G=u[5],I=u[6],$=u[7],ee=u[8],Z=u[9],ie=u[10],H=u[11],X=u[12],P=u[13],v=u[14],A=u[15];l.m11=y,l.a=y,l.m21=C,l.c=C,l.m31=ee,l.m41=X,l.e=X,l.m12=p,l.b=p,l.m22=G,l.d=G,l.m32=Z,l.m42=P,l.f=P,l.m13=c,l.m23=I,l.m33=ie,l.m43=v,l.m14=b,l.m24=$,l.m34=H,l.m44=A}else if(u.length===6){var E=u[0],q=u[1],re=u[2],Y=u[3],be=u[4],ke=u[5];l.m11=E,l.a=E,l.m12=q,l.b=q,l.m21=re,l.c=re,l.m22=Y,l.d=Y,l.m41=be,l.e=be,l.m42=ke,l.f=ke}else throw new TypeError("CSSMatrix: expecting an Array of 6/16 values.");return l}function S(h){var l=Object.keys(new k);if(f(h)==="object"&&l.every(function(u){return u in h}))return m([h.m11,h.m12,h.m13,h.m14,h.m21,h.m22,h.m23,h.m24,h.m31,h.m32,h.m33,h.m34,h.m41,h.m42,h.m43,h.m44]);throw TypeError('CSSMatrix: "'+h+'" is not a DOMMatrix / CSSMatrix / JSON compatible object.')}function D(h){if(typeof h!="string")throw TypeError('CSSMatrix: "'+h+'" is not a string.');var l=String(h).replace(/\s/g,""),u=new k,y='CSSMatrix: invalid transform string "'+h+'"';return l.split(")").filter(function(p){return p}).forEach(function(p){var c=p.split("("),b=c[0],C=c[1];if(!C)throw TypeError(y);var G=C.split(",").map(function(Y){return Y.includes("rad")?parseFloat(Y)*(180/Math.PI):parseFloat(Y)}),I=G[0],$=G[1],ee=G[2],Z=G[3],ie=[I,$,ee],H=[I,$,ee,Z];if(b==="perspective"&&I&&[$,ee].every(function(Y){return Y===void 0}))u.m34=-1/I;else if(b.includes("matrix")&&[6,16].includes(G.length)&&G.every(function(Y){return!Number.isNaN(+Y)})){var X=G.map(function(Y){return Math.abs(Y)<1e-6?0:Y});u=u.multiply(m(X))}else if(b==="translate3d"&&ie.every(function(Y){return!Number.isNaN(+Y)}))u=u.translate(I,$,ee);else if(b==="translate"&&I&&ee===void 0)u=u.translate(I,$||0,0);else if(b==="rotate3d"&&H.every(function(Y){return!Number.isNaN(+Y)})&&Z)u=u.rotateAxisAngle(I,$,ee,Z);else if(b==="rotate"&&I&&[$,ee].every(function(Y){return Y===void 0}))u=u.rotate(0,0,I);else if(b==="scale3d"&&ie.every(function(Y){return!Number.isNaN(+Y)})&&ie.some(function(Y){return Y!==1}))u=u.scale(I,$,ee);else if(b==="scale"&&!Number.isNaN(I)&&I!==1&&ee===void 0){var P=Number.isNaN(+$),v=P?I:$;u=u.scale(I,v,1)}else if(b==="skew"&&I&&ee===void 0)u=u.skewX(I),u=$?u.skewY($):u;else if(/[XYZ]/.test(b)&&I&&[$,ee].every(function(Y){return Y===void 0})&&["translate","rotate","scale","skew"].some(function(Y){return b.includes(Y)}))if(["skewX","skewY"].includes(b))u=u[b](I);else{var A=b.replace(/[XYZ]/,""),E=b.replace(A,""),q=["X","Y","Z"].indexOf(E),re=[q===0?I:0,q===1?I:0,q===2?I:0];u=u[A].apply(u,re)}else throw TypeError(y)}),u}function M(h,l,u){var y=new k;return y.m41=h,y.e=h,y.m42=l,y.f=l,y.m43=u,y}function j(h,l,u){var y=new k,p=Math.PI/180,c=h*p,b=l*p,C=u*p,G=Math.cos(c),I=-Math.sin(c),$=Math.cos(b),ee=-Math.sin(b),Z=Math.cos(C),ie=-Math.sin(C),H=$*Z,X=-$*ie;y.m11=H,y.a=H,y.m12=X,y.b=X,y.m13=ee;var P=I*ee*Z+G*ie;y.m21=P,y.c=P;var v=G*Z-I*ee*ie;return y.m22=v,y.d=v,y.m23=-I*$,y.m31=I*ie-G*ee*Z,y.m32=I*Z+G*ee*ie,y.m33=G*$,y}function W(h,l,u,y){var p=new k,c=y*(Math.PI/360),b=Math.sin(c),C=Math.cos(c),G=b*b,I=Math.sqrt(h*h+l*l+u*u),$=h,ee=l,Z=u;I===0?($=0,ee=0,Z=1):($/=I,ee/=I,Z/=I);var ie=$*$,H=ee*ee,X=Z*Z,P=1-2*(H+X)*G;p.m11=P,p.a=P;var v=2*($*ee*G+Z*b*C);p.m12=v,p.b=v,p.m13=2*($*Z*G-ee*b*C);var A=2*(ee*$*G-Z*b*C);p.m21=A,p.c=A;var E=1-2*(X+ie)*G;return p.m22=E,p.d=E,p.m23=2*(ee*Z*G+$*b*C),p.m31=2*(Z*$*G+ee*b*C),p.m32=2*(Z*ee*G-$*b*C),p.m33=1-2*(ie+H)*G,p}function V(h,l,u){var y=new k;return y.m11=h,y.a=h,y.m22=l,y.d=l,y.m33=u,y}function O(h){var l=new k,u=h*Math.PI/180,y=Math.tan(u);return l.m21=y,l.c=y,l}function w(h){var l=new k,u=h*Math.PI/180,y=Math.tan(u);return l.m12=y,l.b=y,l}function x(h,l){var u=l.m11*h.m11+l.m12*h.m21+l.m13*h.m31+l.m14*h.m41,y=l.m11*h.m12+l.m12*h.m22+l.m13*h.m32+l.m14*h.m42,p=l.m11*h.m13+l.m12*h.m23+l.m13*h.m33+l.m14*h.m43,c=l.m11*h.m14+l.m12*h.m24+l.m13*h.m34+l.m14*h.m44,b=l.m21*h.m11+l.m22*h.m21+l.m23*h.m31+l.m24*h.m41,C=l.m21*h.m12+l.m22*h.m22+l.m23*h.m32+l.m24*h.m42,G=l.m21*h.m13+l.m22*h.m23+l.m23*h.m33+l.m24*h.m43,I=l.m21*h.m14+l.m22*h.m24+l.m23*h.m34+l.m24*h.m44,$=l.m31*h.m11+l.m32*h.m21+l.m33*h.m31+l.m34*h.m41,ee=l.m31*h.m12+l.m32*h.m22+l.m33*h.m32+l.m34*h.m42,Z=l.m31*h.m13+l.m32*h.m23+l.m33*h.m33+l.m34*h.m43,ie=l.m31*h.m14+l.m32*h.m24+l.m33*h.m34+l.m34*h.m44,H=l.m41*h.m11+l.m42*h.m21+l.m43*h.m31+l.m44*h.m41,X=l.m41*h.m12+l.m42*h.m22+l.m43*h.m32+l.m44*h.m42,P=l.m41*h.m13+l.m42*h.m23+l.m43*h.m33+l.m44*h.m43,v=l.m41*h.m14+l.m42*h.m24+l.m43*h.m34+l.m44*h.m44;return m([u,y,p,c,b,C,G,I,$,ee,Z,ie,H,X,P,v])}var k=function(){for(var l=[],u=arguments.length;u--;)l[u]=arguments[u];var y=this;if(y.a=1,y.b=0,y.c=0,y.d=1,y.e=0,y.f=0,y.m11=1,y.m12=0,y.m13=0,y.m14=0,y.m21=0,y.m22=1,y.m23=0,y.m24=0,y.m31=0,y.m32=0,y.m33=1,y.m34=0,y.m41=0,y.m42=0,y.m43=0,y.m44=1,l&&l.length){var p=[16,6].some(function(c){return c===l.length})?l:l[0];return y.setMatrixValue(p)}return y},L={isIdentity:{configurable:!0},is2D:{configurable:!0}};L.isIdentity.set=function(h){this.isIdentity=h},L.isIdentity.get=function(){var h=this;return h.m11===1&&h.m12===0&&h.m13===0&&h.m14===0&&h.m21===0&&h.m22===1&&h.m23===0&&h.m24===0&&h.m31===0&&h.m32===0&&h.m33===1&&h.m34===0&&h.m41===0&&h.m42===0&&h.m43===0&&h.m44===1},L.is2D.get=function(){var h=this;return h.m31===0&&h.m32===0&&h.m33===1&&h.m34===0&&h.m43===0&&h.m44===1},L.is2D.set=function(h){this.is2D=h},k.prototype.setMatrixValue=function(l){var u=this;return[Array,Float64Array,Float32Array].some(function(y){return l instanceof y})?m(l):typeof l=="string"&&l.length&&l!=="none"?D(l):f(l)==="object"?S(l):u},k.prototype.toArray=function(){var l=this,u=Math.pow(10,6),y;return l.is2D?y=[l.a,l.b,l.c,l.d,l.e,l.f]:y=[l.m11,l.m12,l.m13,l.m14,l.m21,l.m22,l.m23,l.m24,l.m31,l.m32,l.m33,l.m34,l.m41,l.m42,l.m43,l.m44],y.map(function(p){return Math.abs(p)<1e-6?0:(p*u>>0)/u})},k.prototype.toString=function(){var l=this,u=l.toArray(),y=l.is2D?"matrix":"matrix3d";return y+"("+u+")"},k.prototype.toJSON=function(){var l=this,u=l.is2D,y=l.isIdentity;return Object.assign({},l,{is2D:u,isIdentity:y})},k.prototype.multiply=function(l){return x(this,l)},k.prototype.translate=function(l,u,y){var p=l,c=u,b=y;return b===void 0&&(b=0),c===void 0&&(c=0),x(this,M(p,c,b))},k.prototype.scale=function(l,u,y){var p=l,c=u,b=y;return c===void 0&&(c=l),b===void 0&&(b=1),x(this,V(p,c,b))},k.prototype.rotate=function(l,u,y){var p=l,c=u,b=y;return c===void 0&&(c=0),b===void 0&&(b=p,p=0),x(this,j(p,c,b))},k.prototype.rotateAxisAngle=function(l,u,y,p){if([l,u,y,p].some(function(c){return Number.isNaN(c)}))throw new TypeError("CSSMatrix: expecting 4 values");return x(this,W(l,u,y,p))},k.prototype.skewX=function(l){return x(this,O(l))},k.prototype.skewY=function(l){return x(this,w(l))},k.prototype.transformPoint=function(l){var u=this,y=M(l.x,l.y,l.z);return y.m44=l.w||1,y=u.multiply(y),{x:y.m41,y:y.m42,z:y.m43,w:y.m44}},k.prototype.transform=function(l){var u=this,y=u.m11*l.x+u.m12*l.y+u.m13*l.z+u.m14*l.w,p=u.m21*l.x+u.m22*l.y+u.m23*l.z+u.m24*l.w,c=u.m31*l.x+u.m32*l.y+u.m33*l.z+u.m34*l.w,b=u.m41*l.x+u.m42*l.y+u.m43*l.z+u.m44*l.w;return{x:y/b,y:p/b,z:c/b,w:b}},Object.defineProperties(k.prototype,L),Object.assign(k,{Translate:M,Rotate:j,RotateAxisAngle:W,Scale:V,SkewX:O,SkewY:w,Multiply:x,fromArray:m,fromMatrix:S,fromString:D});var _="0.0.24",B=_;return Object.assign(k,{Version:B}),k})},(s,n,e)=>{e(71),e(86);var r=e(96);s.exports=r.Object.fromEntries},(s,n,e)=>{var r=e(17),i=e(72),f=e(77),m=e(52),S=e(78),D="Array Iterator",M=m.set,j=m.getterFor(D);s.exports=S(Array,"Array",function(W,V){M(this,{type:D,target:r(W),index:0,kind:V})},function(){var W=j(this),V=W.target,O=W.kind,w=W.index++;return!V||w>=V.length?(W.target=void 0,{value:void 0,done:!0}):O=="keys"?{value:w,done:!1}:O=="values"?{value:V[w],done:!1}:{value:[w,V[w]],done:!1}},"values"),f.Arguments=f.Array,i("keys"),i("values"),i("entries")},(s,n,e)=>{var r=e(37),i=e(73),f=e(48),m=r("unscopables"),S=Array.prototype;S[m]==null&&f.f(S,m,{configurable:!0,value:i(null)}),s.exports=function(D){S[m][D]=!0}},(s,n,e)=>{var r=e(49),i=e(74),f=e(66),m=e(55),S=e(76),D=e(46),M=e(54),j=">",W="<",V="prototype",O="script",w=M("IE_PROTO"),x=function(){},k=function(l){return W+O+j+l+W+"/"+O+j},L=function(l){l.write(k("")),l.close();var u=l.parentWindow.Object;return l=null,u},_=function(){var l=D("iframe"),u="java"+O+":",y;return l.style.display="none",S.appendChild(l),l.src=String(u),y=l.contentWindow.document,y.open(),y.write(k("document.F=Object")),y.close(),y.F},B,h=function(){try{B=new ActiveXObject("htmlfile")}catch{}h=typeof document!="undefined"?document.domain&&B?L(B):_():L(B);for(var l=f.length;l--;)delete h[V][f[l]];return h()};m[w]=!0,s.exports=Object.create||function(u,y){var p;return u!==null?(x[V]=r(u),p=new x,x[V]=null,p[w]=u):p=h(),y===void 0?p:i(p,y)}},(s,n,e)=>{var r=e(12),i=e(48),f=e(49),m=e(17),S=e(75);s.exports=r?Object.defineProperties:function(M,j){f(M);for(var W=m(j),V=S(j),O=V.length,w=0,x;O>w;)i.f(M,x=V[w++],W[x]);return M}},(s,n,e)=>{var r=e(60),i=e(66);s.exports=Object.keys||function(m){return r(m,i)}},(s,n,e)=>{var r=e(27);s.exports=r("document","documentElement")},s=>{s.exports={}},(s,n,e)=>{var r=e(9),i=e(14),f=e(39),m=e(56),S=e(25),D=e(79),M=e(81),j=e(84),W=e(83),V=e(47),O=e(50),w=e(37),x=e(77),k=e(80),L=m.PROPER,_=m.CONFIGURABLE,B=k.IteratorPrototype,h=k.BUGGY_SAFARI_ITERATORS,l=w("iterator"),u="keys",y="values",p="entries",c=function(){return this};s.exports=function(b,C,G,I,$,ee,Z){D(G,C,I);var ie=function(be){if(be===$&&A)return A;if(!h&&be in P)return P[be];switch(be){case u:return function(){return new G(this,be)};case y:return function(){return new G(this,be)};case p:return function(){return new G(this,be)}}return function(){return new G(this)}},H=C+" Iterator",X=!1,P=b.prototype,v=P[l]||P["@@iterator"]||$&&P[$],A=!h&&v||ie($),E=C=="Array"&&P.entries||v,q,re,Y;if(E&&(q=M(E.call(new b)),q!==Object.prototype&&q.next&&(!f&&M(q)!==B&&(j?j(q,B):S(q[l])||O(q,l,c)),W(q,H,!0,!0),f&&(x[H]=c))),L&&$==y&&v&&v.name!==y&&(!f&&_?V(P,"name",y):(X=!0,A=function(){return i(v,this)})),$)if(re={values:ie(y),keys:ee?A:ie(u),entries:ie(p)},Z)for(Y in re)(h||X||!(Y in P))&&O(P,Y,re[Y]);else r({target:C,proto:!0,forced:h||X},re);return(!f||Z)&&P[l]!==A&&O(P,l,A,{name:$}),x[C]=A,re}},(s,n,e)=>{var r=e(80).IteratorPrototype,i=e(73),f=e(16),m=e(83),S=e(77),D=function(){return this};s.exports=function(M,j,W,V){var O=j+" Iterator";return M.prototype=i(r,{next:f(+!V,W)}),m(M,O,!1,!0),S[O]=D,M}},(s,n,e)=>{var r=e(13),i=e(25),f=e(73),m=e(81),S=e(50),D=e(37),M=e(39),j=D("iterator"),W=!1,V,O,w;[].keys&&(w=[].keys(),"next"in w?(O=m(m(w)),O!==Object.prototype&&(V=O)):W=!0);var x=V==null||r(function(){var k={};return V[j].call(k)!==k});x?V={}:M&&(V=f(V)),i(V[j])||S(V,j,function(){return this}),s.exports={IteratorPrototype:V,BUGGY_SAFARI_ITERATORS:W}},(s,n,e)=>{var r=e(10),i=e(42),f=e(25),m=e(43),S=e(54),D=e(82),M=S("IE_PROTO"),j=r.Object,W=j.prototype;s.exports=D?j.getPrototypeOf:function(V){var O=m(V);if(i(O,M))return O[M];var w=O.constructor;return f(w)&&O instanceof w?w.prototype:O instanceof j?W:null}},(s,n,e)=>{var r=e(13);s.exports=!r(function(){function i(){}return i.prototype.constructor=null,Object.getPrototypeOf(new i)!==i.prototype})},(s,n,e)=>{var r=e(48).f,i=e(42),f=e(37),m=f("toStringTag");s.exports=function(S,D,M){S&&!i(S=M?S:S.prototype,m)&&r(S,m,{configurable:!0,value:D})}},(s,n,e)=>{var r=e(19),i=e(49),f=e(85);s.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var m=!1,S={},D;try{D=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),D(S,[]),m=S instanceof Array}catch{}return function(j,W){return i(j),f(W),m?D(j,W):j.__proto__=W,j}}():void 0)},(s,n,e)=>{var r=e(10),i=e(25),f=r.String,m=r.TypeError;s.exports=function(S){if(typeof S=="object"||i(S))return S;throw m("Can't set "+f(S)+" as a prototype")}},(s,n,e)=>{var r=e(9),i=e(87),f=e(95);r({target:"Object",stat:!0},{fromEntries:function(S){var D={};return i(S,function(M,j){f(D,M,j)},{AS_ENTRIES:!0}),D}})},(s,n,e)=>{var r=e(10),i=e(88),f=e(14),m=e(49),S=e(35),D=e(89),M=e(64),j=e(28),W=e(90),V=e(91),O=e(94),w=r.TypeError,x=function(L,_){this.stopped=L,this.result=_},k=x.prototype;s.exports=function(L,_,B){var h=B&&B.that,l=!!(B&&B.AS_ENTRIES),u=!!(B&&B.IS_ITERATOR),y=!!(B&&B.INTERRUPTED),p=i(_,h),c,b,C,G,I,$,ee,Z=function(H){return c&&O(c,"normal",H),new x(!0,H)},ie=function(H){return l?(m(H),y?p(H[0],H[1],Z):p(H[0],H[1])):y?p(H,Z):p(H)};if(u)c=L;else{if(b=V(L),!b)throw w(S(L)+" is not iterable");if(D(b)){for(C=0,G=M(L);G>C;C++)if(I=ie(L[C]),I&&j(k,I))return I;return new x(!1)}c=W(L,b)}for($=c.next;!(ee=f($,c)).done;){try{I=ie(ee.value)}catch(H){O(c,"throw",H)}if(typeof I=="object"&&I&&j(k,I))return I}return new x(!1)}},(s,n,e)=>{var r=e(19),i=e(34),f=r(r.bind);s.exports=function(m,S){return i(m),S===void 0?m:f?f(m,S):function(){return m.apply(S,arguments)}}},(s,n,e)=>{var r=e(37),i=e(77),f=r("iterator"),m=Array.prototype;s.exports=function(S){return S!==void 0&&(i.Array===S||m[f]===S)}},(s,n,e)=>{var r=e(10),i=e(14),f=e(34),m=e(49),S=e(35),D=e(91),M=r.TypeError;s.exports=function(j,W){var V=arguments.length<2?D(j):W;if(f(V))return m(i(V,j));throw M(S(j)+" is not iterable")}},(s,n,e)=>{var r=e(92),i=e(33),f=e(77),m=e(37),S=m("iterator");s.exports=function(D){if(D!=null)return i(D,S)||i(D,"@@iterator")||f[r(D)]}},(s,n,e)=>{var r=e(10),i=e(93),f=e(25),m=e(20),S=e(37),D=S("toStringTag"),M=r.Object,j=m(function(){return arguments}())=="Arguments",W=function(V,O){try{return V[O]}catch{}};s.exports=i?m:function(V){var O,w,x;return V===void 0?"Undefined":V===null?"Null":typeof(w=W(O=M(V),D))=="string"?w:j?m(O):(x=m(O))=="Object"&&f(O.callee)?"Arguments":x}},(s,n,e)=>{var r=e(37),i=r("toStringTag"),f={};f[i]="z",s.exports=String(f)==="[object z]"},(s,n,e)=>{var r=e(14),i=e(49),f=e(33);s.exports=function(m,S,D){var M,j;i(m);try{if(M=f(m,"return"),!M){if(S==="throw")throw D;return D}M=r(M,m)}catch(W){j=!0,M=W}if(S==="throw")throw D;if(j)throw M;return i(M),D}},(s,n,e)=>{var r=e(22),i=e(48),f=e(16);s.exports=function(m,S,D){var M=r(S);M in m?i.f(m,M,f(0,D)):m[M]=D}},(s,n,e)=>{var r=e(10);s.exports=r},(s,n,e)=>{e(98),e(71),e(105),e(107),e(129),e(130),e(131),e(132);var r=e(96);s.exports=r.Promise},(s,n,e)=>{var r=e(9),i=e(10),f=e(28),m=e(81),S=e(84),D=e(57),M=e(73),j=e(47),W=e(16),V=e(99),O=e(101),w=e(87),x=e(102),k=e(37),L=e(104),_=k("toStringTag"),B=i.Error,h=[].push,l=function(p,c){var b=arguments.length>2?arguments[2]:void 0,C=f(u,this),G;S?G=S(new B(void 0),C?m(this):u):(G=C?this:M(u),j(G,_,"Error")),j(G,"message",x(c,"")),L&&j(G,"stack",V(G.stack,1)),O(G,b);var I=[];return w(p,h,{that:I}),j(G,"errors",I),G};S?S(l,B):D(l,B);var u=l.prototype=M(B.prototype,{constructor:W(1,l),message:W(1,""),name:W(1,"AggregateError")});r({global:!0},{AggregateError:l})},(s,n,e)=>{var r=e(19),i=e(100),f=r("".replace),m=r("".split),S=r([].join),D=function(V){return String(Error(V).stack)}("zxcasd"),M=/\n\s*at [^:]*:[^\n]*/,j=M.test(D),W=/@[^\n]*\n/.test(D)&&!/zxcasd/.test(D);s.exports=function(V,O){if(typeof V!="string")return V;if(j)for(;O--;)V=f(V,M,"");else if(W)return S(i(m(V,`
`),O),`
`);return V}},(s,n,e)=>{var r=e(10),i=e(62),f=e(64),m=e(95),S=r.Array,D=Math.max;s.exports=function(M,j,W){for(var V=f(M),O=i(j,V),w=i(W===void 0?V:W,V),x=S(D(w-O,0)),k=0;O<w;O++,k++)m(x,k,M[O]);return x.length=k,x}},(s,n,e)=>{var r=e(24),i=e(47);s.exports=function(f,m){r(m)&&"cause"in m&&i(f,"cause",m.cause)}},(s,n,e)=>{var r=e(103);s.exports=function(i,f){return i===void 0?arguments.length<2?"":f:r(i)}},(s,n,e)=>{var r=e(10),i=e(92),f=r.String;s.exports=function(m){if(i(m)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return f(m)}},(s,n,e)=>{var r=e(13),i=e(16);s.exports=!r(function(){var f=Error("a");return"stack"in f?(Object.defineProperty(f,"stack",i(1,7)),f.stack!==7):!0})},(s,n,e)=>{var r=e(93),i=e(50),f=e(106);r||i(Object.prototype,"toString",f,{unsafe:!0})},(s,n,e)=>{var r=e(93),i=e(92);s.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},(s,n,e)=>{var r=e(9),i=e(39),f=e(10),m=e(27),S=e(14),D=e(108),M=e(50),j=e(109),W=e(84),V=e(83),O=e(110),w=e(34),x=e(25),k=e(24),L=e(111),_=e(51),B=e(87),h=e(112),l=e(113),u=e(116).set,y=e(121),p=e(124),c=e(126),b=e(125),C=e(127),G=e(52),I=e(68),$=e(37),ee=e(128),Z=e(120),ie=e(31),H=$("species"),X="Promise",P=G.getterFor(X),v=G.set,A=G.getterFor(X),E=D&&D.prototype,q=D,re=E,Y=f.TypeError,be=f.document,ke=f.process,we=b.f,z=we,R=!!(be&&be.createEvent&&f.dispatchEvent),d=x(f.PromiseRejectionEvent),o="unhandledrejection",g="rejectionhandled",F=0,N=1,J=2,le=1,ve=2,ye=!1,pe,Ae,Te,Ee,Fe=I(X,function(){var Q=_(q),he=Q!==String(q);if(!he&&ie===66||i&&!re.finally)return!0;if(ie>=51&&/native code/.test(Q))return!1;var ce=new q(function(De){De(1)}),Se=function(De){De(function(){},function(){})},Re=ce.constructor={};return Re[H]=Se,ye=ce.then(function(){})instanceof Se,ye?!he&&ee&&!d:!0}),Ie=Fe||!h(function(Q){q.all(Q).catch(function(){})}),We=function(Q){var he;return k(Q)&&x(he=Q.then)?he:!1},je=function(Q,he){if(!Q.notified){Q.notified=!0;var ce=Q.reactions;y(function(){for(var Se=Q.value,Re=Q.state==N,De=0;ce.length>De;){var Le=ce[De++],_e=Re?Le.ok:Le.fail,Ge=Le.resolve,Oe=Le.reject,xe=Le.domain,Be,Ne,Ve;try{_e?(Re||(Q.rejection===ve&&te(Q),Q.rejection=le),_e===!0?Be=Se:(xe&&xe.enter(),Be=_e(Se),xe&&(xe.exit(),Ve=!0)),Be===Le.promise?Oe(Y("Promise-chain cycle")):(Ne=We(Be))?S(Ne,Be,Ge,Oe):Ge(Be)):Oe(Se)}catch(Xe){xe&&!Ve&&xe.exit(),Oe(Xe)}}Q.reactions=[],Q.notified=!1,he&&!Q.rejection&&de(Q)})}},fe=function(Q,he,ce){var Se,Re;R?(Se=be.createEvent("Event"),Se.promise=he,Se.reason=ce,Se.initEvent(Q,!1,!0),f.dispatchEvent(Se)):Se={promise:he,reason:ce},!d&&(Re=f["on"+Q])?Re(Se):Q===o&&c("Unhandled promise rejection",ce)},de=function(Q){S(u,f,function(){var he=Q.facade,ce=Q.value,Se=U(Q),Re;if(Se&&(Re=C(function(){Z?ke.emit("unhandledRejection",ce,he):fe(o,he,ce)}),Q.rejection=Z||U(Q)?ve:le,Re.error))throw Re.value})},U=function(Q){return Q.rejection!==le&&!Q.parent},te=function(Q){S(u,f,function(){var he=Q.facade;Z?ke.emit("rejectionHandled",he):fe(g,he,Q.value)})},K=function(Q,he,ce){return function(Se){Q(he,Se,ce)}},oe=function(Q,he,ce){Q.done||(Q.done=!0,ce&&(Q=ce),Q.value=he,Q.state=J,je(Q,!0))},ne=function(Q,he,ce){if(!Q.done){Q.done=!0,ce&&(Q=ce);try{if(Q.facade===he)throw Y("Promise can't be resolved itself");var Se=We(he);Se?y(function(){var Re={done:!1};try{S(Se,he,K(ne,Re,Q),K(oe,Re,Q))}catch(De){oe(Re,De,Q)}}):(Q.value=he,Q.state=N,je(Q,!1))}catch(Re){oe({done:!1},Re,Q)}}};if(Fe&&(q=function(he){L(this,re),w(he),S(pe,this);var ce=P(this);try{he(K(ne,ce),K(oe,ce))}catch(Se){oe(ce,Se)}},re=q.prototype,pe=function(he){v(this,{type:X,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:F,value:void 0})},pe.prototype=j(re,{then:function(he,ce){var Se=A(this),Re=Se.reactions,De=we(l(this,q));return De.ok=x(he)?he:!0,De.fail=x(ce)&&ce,De.domain=Z?ke.domain:void 0,Se.parent=!0,Re[Re.length]=De,Se.state!=F&&je(Se,!1),De.promise},catch:function(Q){return this.then(void 0,Q)}}),Ae=function(){var Q=new pe,he=P(Q);this.promise=Q,this.resolve=K(ne,he),this.reject=K(oe,he)},b.f=we=function(Q){return Q===q||Q===Te?new Ae(Q):z(Q)},!i&&x(D)&&E!==Object.prototype)){Ee=E.then,ye||(M(E,"then",function(he,ce){var Se=this;return new q(function(Re,De){S(Ee,Se,Re,De)}).then(he,ce)},{unsafe:!0}),M(E,"catch",re.catch,{unsafe:!0}));try{delete E.constructor}catch{}W&&W(E,re)}r({global:!0,wrap:!0,forced:Fe},{Promise:q}),V(q,X,!1,!0),O(X),Te=m(X),r({target:X,stat:!0,forced:Fe},{reject:function(he){var ce=we(this);return S(ce.reject,void 0,he),ce.promise}}),r({target:X,stat:!0,forced:i||Fe},{resolve:function(he){return p(i&&this===Te?q:this,he)}}),r({target:X,stat:!0,forced:Ie},{all:function(he){var ce=this,Se=we(ce),Re=Se.resolve,De=Se.reject,Le=C(function(){var _e=w(ce.resolve),Ge=[],Oe=0,xe=1;B(he,function(Be){var Ne=Oe++,Ve=!1;xe++,S(_e,ce,Be).then(function(Xe){Ve||(Ve=!0,Ge[Ne]=Xe,--xe||Re(Ge))},De)}),--xe||Re(Ge)});return Le.error&&De(Le.value),Se.promise},race:function(he){var ce=this,Se=we(ce),Re=Se.reject,De=C(function(){var Le=w(ce.resolve);B(he,function(_e){S(Le,ce,_e).then(Se.resolve,Re)})});return De.error&&Re(De.value),Se.promise}})},(s,n,e)=>{var r=e(10);s.exports=r.Promise},(s,n,e)=>{var r=e(50);s.exports=function(i,f,m){for(var S in f)r(i,S,f[S],m);return i}},(s,n,e)=>{var r=e(27),i=e(48),f=e(37),m=e(12),S=f("species");s.exports=function(D){var M=r(D),j=i.f;m&&M&&!M[S]&&j(M,S,{configurable:!0,get:function(){return this}})}},(s,n,e)=>{var r=e(10),i=e(28),f=r.TypeError;s.exports=function(m,S){if(i(S,m))return m;throw f("Incorrect invocation")}},(s,n,e)=>{var r=e(37),i=r("iterator"),f=!1;try{var m=0,S={next:function(){return{done:!!m++}},return:function(){f=!0}};S[i]=function(){return this},Array.from(S,function(){throw 2})}catch{}s.exports=function(D,M){if(!M&&!f)return!1;var j=!1;try{var W={};W[i]=function(){return{next:function(){return{done:j=!0}}}},D(W)}catch{}return j}},(s,n,e)=>{var r=e(49),i=e(114),f=e(37),m=f("species");s.exports=function(S,D){var M=r(S).constructor,j;return M===void 0||(j=r(M)[m])==null?D:i(j)}},(s,n,e)=>{var r=e(10),i=e(115),f=e(35),m=r.TypeError;s.exports=function(S){if(i(S))return S;throw m(f(S)+" is not a constructor")}},(s,n,e)=>{var r=e(19),i=e(13),f=e(25),m=e(92),S=e(27),D=e(51),M=function(){},j=[],W=S("Reflect","construct"),V=/^\s*(?:class|function)\b/,O=r(V.exec),w=!V.exec(M),x=function(L){if(!f(L))return!1;try{return W(M,j,L),!0}catch{return!1}},k=function(L){if(!f(L))return!1;switch(m(L)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return w||!!O(V,D(L))};s.exports=!W||i(function(){var L;return x(x.call)||!x(Object)||!x(function(){L=!0})||L})?k:x},(s,n,e)=>{var r=e(10),i=e(117),f=e(88),m=e(25),S=e(42),D=e(13),M=e(76),j=e(118),W=e(46),V=e(119),O=e(120),w=r.setImmediate,x=r.clearImmediate,k=r.process,L=r.Dispatch,_=r.Function,B=r.MessageChannel,h=r.String,l=0,u={},y="onreadystatechange",p,c,b,C;try{p=r.location}catch{}var G=function(Z){if(S(u,Z)){var ie=u[Z];delete u[Z],ie()}},I=function(Z){return function(){G(Z)}},$=function(Z){G(Z.data)},ee=function(Z){r.postMessage(h(Z),p.protocol+"//"+p.host)};(!w||!x)&&(w=function(ie){var H=j(arguments,1);return u[++l]=function(){i(m(ie)?ie:_(ie),void 0,H)},c(l),l},x=function(ie){delete u[ie]},O?c=function(Z){k.nextTick(I(Z))}:L&&L.now?c=function(Z){L.now(I(Z))}:B&&!V?(b=new B,C=b.port2,b.port1.onmessage=$,c=f(C.postMessage,C)):r.addEventListener&&m(r.postMessage)&&!r.importScripts&&p&&p.protocol!=="file:"&&!D(ee)?(c=ee,r.addEventListener("message",$,!1)):y in W("script")?c=function(Z){M.appendChild(W("script"))[y]=function(){M.removeChild(this),G(Z)}}:c=function(Z){setTimeout(I(Z),0)}),s.exports={set:w,clear:x}},s=>{var n=Function.prototype,e=n.apply,r=n.bind,i=n.call;s.exports=typeof Reflect=="object"&&Reflect.apply||(r?i.bind(e):function(){return i.apply(e,arguments)})},(s,n,e)=>{var r=e(19);s.exports=r([].slice)},(s,n,e)=>{var r=e(32);s.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},(s,n,e)=>{var r=e(20),i=e(10);s.exports=r(i.process)=="process"},(s,n,e)=>{var r=e(10),i=e(88),f=e(11).f,m=e(116).set,S=e(119),D=e(122),M=e(123),j=e(120),W=r.MutationObserver||r.WebKitMutationObserver,V=r.document,O=r.process,w=r.Promise,x=f(r,"queueMicrotask"),k=x&&x.value,L,_,B,h,l,u,y,p;k||(L=function(){var c,b;for(j&&(c=O.domain)&&c.exit();_;){b=_.fn,_=_.next;try{b()}catch(C){throw _?h():B=void 0,C}}B=void 0,c&&c.enter()},!S&&!j&&!M&&W&&V?(l=!0,u=V.createTextNode(""),new W(L).observe(u,{characterData:!0}),h=function(){u.data=l=!l}):!D&&w&&w.resolve?(y=w.resolve(void 0),y.constructor=w,p=i(y.then,y),h=function(){p(L)}):j?h=function(){O.nextTick(L)}:(m=i(m,r),h=function(){m(L)})),s.exports=k||function(c){var b={fn:c,next:void 0};B&&(B.next=b),_||(_=b,h()),B=b}},(s,n,e)=>{var r=e(32),i=e(10);s.exports=/ipad|iphone|ipod/i.test(r)&&i.Pebble!==void 0},(s,n,e)=>{var r=e(32);s.exports=/web0s(?!.*chrome)/i.test(r)},(s,n,e)=>{var r=e(49),i=e(24),f=e(125);s.exports=function(m,S){if(r(m),i(S)&&S.constructor===m)return S;var D=f.f(m),M=D.resolve;return M(S),D.promise}},(s,n,e)=>{var r=e(34),i=function(f){var m,S;this.promise=new f(function(D,M){if(m!==void 0||S!==void 0)throw TypeError("Bad Promise constructor");m=D,S=M}),this.resolve=r(m),this.reject=r(S)};s.exports.f=function(f){return new i(f)}},(s,n,e)=>{var r=e(10);s.exports=function(i,f){var m=r.console;m&&m.error&&(arguments.length==1?m.error(i):m.error(i,f))}},s=>{s.exports=function(n){try{return{error:!1,value:n()}}catch(e){return{error:!0,value:e}}}},s=>{s.exports=typeof window=="object"},(s,n,e)=>{var r=e(9),i=e(14),f=e(34),m=e(125),S=e(127),D=e(87);r({target:"Promise",stat:!0},{allSettled:function(j){var W=this,V=m.f(W),O=V.resolve,w=V.reject,x=S(function(){var k=f(W.resolve),L=[],_=0,B=1;D(j,function(h){var l=_++,u=!1;B++,i(k,W,h).then(function(y){u||(u=!0,L[l]={status:"fulfilled",value:y},--B||O(L))},function(y){u||(u=!0,L[l]={status:"rejected",reason:y},--B||O(L))})}),--B||O(L)});return x.error&&w(x.value),V.promise}})},(s,n,e)=>{var r=e(9),i=e(34),f=e(27),m=e(14),S=e(125),D=e(127),M=e(87),j="No one promise resolved";r({target:"Promise",stat:!0},{any:function(V){var O=this,w=f("AggregateError"),x=S.f(O),k=x.resolve,L=x.reject,_=D(function(){var B=i(O.resolve),h=[],l=0,u=1,y=!1;M(V,function(p){var c=l++,b=!1;u++,m(B,O,p).then(function(C){b||y||(y=!0,k(C))},function(C){b||y||(b=!0,h[c]=C,--u||L(new w(h,j)))})}),--u||L(new w(h,j))});return _.error&&L(_.value),x.promise}})},(s,n,e)=>{var r=e(9),i=e(39),f=e(108),m=e(13),S=e(27),D=e(25),M=e(113),j=e(124),W=e(50),V=!!f&&m(function(){f.prototype.finally.call({then:function(){}},function(){})});if(r({target:"Promise",proto:!0,real:!0,forced:V},{finally:function(w){var x=M(this,S("Promise")),k=D(w);return this.then(k?function(L){return j(x,w()).then(function(){return L})}:w,k?function(L){return j(x,w()).then(function(){throw L})}:w)}}),!i&&D(f)){var O=S("Promise").prototype.finally;f.prototype.finally!==O&&W(f.prototype,"finally",O,{unsafe:!0})}},(s,n,e)=>{var r=e(133).charAt,i=e(103),f=e(52),m=e(78),S="String Iterator",D=f.set,M=f.getterFor(S);m(String,"String",function(j){D(this,{type:S,string:i(j),index:0})},function(){var W=M(this),V=W.string,O=W.index,w;return O>=V.length?{value:void 0,done:!0}:(w=r(V,O),W.index+=w.length,{value:w,done:!1})})},(s,n,e)=>{var r=e(19),i=e(63),f=e(103),m=e(21),S=r("".charAt),D=r("".charCodeAt),M=r("".slice),j=function(W){return function(V,O){var w=f(m(V)),x=i(O),k=w.length,L,_;return x<0||x>=k?W?"":void 0:(L=D(w,x),L<55296||L>56319||x+1===k||(_=D(w,x+1))<56320||_>57343?W?S(w,x):L:W?M(w,x,x+2):(L-55296<<10)+(_-56320)+65536)}};s.exports={codeAt:j(!1),charAt:j(!0)}},function(s,n){(function(e,r){r(n)})(this,function(e){var r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:function(t){return"Symbol("+t+")"};function i(){}function f(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal!="undefined")return commonjsGlobal}var m=f();function S(t){return typeof t=="object"&&t!==null||typeof t=="function"}var D=i,M=Promise,j=Promise.prototype.then,W=Promise.resolve.bind(M),V=Promise.reject.bind(M);function O(t){return new M(t)}function w(t){return W(t)}function x(t){return V(t)}function k(t,a,T){return j.call(t,a,T)}function L(t,a,T){k(k(t,a,T),void 0,D)}function _(t,a){L(t,a)}function B(t,a){L(t,void 0,a)}function h(t,a,T){return k(t,a,T)}function l(t){k(t,void 0,D)}var u=function(){var t=m&&m.queueMicrotask;if(typeof t=="function")return t;var a=w(void 0);return function(T){return k(a,T)}}();function y(t,a,T){if(typeof t!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(t,a,T)}function p(t,a,T){try{return w(y(t,a,T))}catch(ae){return x(ae)}}var c=16384,b=function(){function t(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}return Object.defineProperty(t.prototype,"length",{get:function(){return this._size},enumerable:!1,configurable:!0}),t.prototype.push=function(a){var T=this._back,ae=T;T._elements.length===c-1&&(ae={_elements:[],_next:void 0}),T._elements.push(a),ae!==T&&(this._back=ae,T._next=ae),++this._size},t.prototype.shift=function(){var a=this._front,T=a,ae=this._cursor,me=ae+1,Ce=a._elements,Me=Ce[ae];return me===c&&(T=a._next,me=0),--this._size,this._cursor=me,a!==T&&(this._front=T),Ce[ae]=void 0,Me},t.prototype.forEach=function(a){for(var T=this._cursor,ae=this._front,me=ae._elements;(T!==me.length||ae._next!==void 0)&&!(T===me.length&&(ae=ae._next,me=ae._elements,T=0,me.length===0));)a(me[T]),++T},t.prototype.peek=function(){var a=this._front,T=this._cursor;return a._elements[T]},t}();function C(t,a){t._ownerReadableStream=a,a._reader=t,a._state==="readable"?ee(t):a._state==="closed"?ie(t):Z(t,a._storedError)}function G(t,a){var T=t._ownerReadableStream;return bt(T,a)}function I(t){t._ownerReadableStream._state==="readable"?H(t,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):X(t,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),t._ownerReadableStream._reader=void 0,t._ownerReadableStream=void 0}function $(t){return new TypeError("Cannot "+t+" a stream using a released reader")}function ee(t){t._closedPromise=O(function(a,T){t._closedPromise_resolve=a,t._closedPromise_reject=T})}function Z(t,a){ee(t),H(t,a)}function ie(t){ee(t),P(t)}function H(t,a){t._closedPromise_reject!==void 0&&(l(t._closedPromise),t._closedPromise_reject(a),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0)}function X(t,a){Z(t,a)}function P(t){t._closedPromise_resolve!==void 0&&(t._closedPromise_resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0)}var v=r("[[AbortSteps]]"),A=r("[[ErrorSteps]]"),E=r("[[CancelSteps]]"),q=r("[[PullSteps]]"),re=Number.isFinite||function(t){return typeof t=="number"&&isFinite(t)},Y=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};function be(t){return typeof t=="object"||typeof t=="function"}function ke(t,a){if(t!==void 0&&!be(t))throw new TypeError(a+" is not an object.")}function we(t,a){if(typeof t!="function")throw new TypeError(a+" is not a function.")}function z(t){return typeof t=="object"&&t!==null||typeof t=="function"}function R(t,a){if(!z(t))throw new TypeError(a+" is not an object.")}function d(t,a,T){if(t===void 0)throw new TypeError("Parameter "+a+" is required in '"+T+"'.")}function o(t,a,T){if(t===void 0)throw new TypeError(a+" is required in '"+T+"'.")}function g(t){return Number(t)}function F(t){return t===0?0:t}function N(t){return F(Y(t))}function J(t,a){var T=0,ae=Number.MAX_SAFE_INTEGER,me=Number(t);if(me=F(me),!re(me))throw new TypeError(a+" is not a finite number");if(me=N(me),me<T||me>ae)throw new TypeError(a+" is outside the accepted range of "+T+" to "+ae+", inclusive");return!re(me)||me===0?0:me}function le(t,a){if(!Nt(t))throw new TypeError(a+" is not a ReadableStream.")}function ve(t){return new Ee(t)}function ye(t,a){t._reader._readRequests.push(a)}function pe(t,a,T){var ae=t._reader,me=ae._readRequests.shift();T?me._closeSteps():me._chunkSteps(a)}function Ae(t){return t._reader._readRequests.length}function Te(t){var a=t._reader;return!(a===void 0||!Fe(a))}var Ee=function(){function t(a){if(d(a,1,"ReadableStreamDefaultReader"),le(a,"First parameter"),Bt(a))throw new TypeError("This stream has already been locked for exclusive reading by another reader");C(this,a),this._readRequests=new b}return Object.defineProperty(t.prototype,"closed",{get:function(){return Fe(this)?this._closedPromise:x(We("closed"))},enumerable:!1,configurable:!0}),t.prototype.cancel=function(a){return a===void 0&&(a=void 0),Fe(this)?this._ownerReadableStream===void 0?x($("cancel")):G(this,a):x(We("cancel"))},t.prototype.read=function(){if(!Fe(this))return x(We("read"));if(this._ownerReadableStream===void 0)return x($("read from"));var a,T,ae=O(function(Ce,Me){a=Ce,T=Me}),me={_chunkSteps:function(Ce){return a({value:Ce,done:!1})},_closeSteps:function(){return a({value:void 0,done:!0})},_errorSteps:function(Ce){return T(Ce)}};return Ie(this,me),ae},t.prototype.releaseLock=function(){if(!Fe(this))throw We("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");I(this)}},t}();Object.defineProperties(Ee.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Ee.prototype,r.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Fe(t){return!S(t)||!Object.prototype.hasOwnProperty.call(t,"_readRequests")?!1:t instanceof Ee}function Ie(t,a){var T=t._ownerReadableStream;T._disturbed=!0,T._state==="closed"?a._closeSteps():T._state==="errored"?a._errorSteps(T._storedError):T._readableStreamController[q](a)}function We(t){return new TypeError("ReadableStreamDefaultReader.prototype."+t+" can only be used on a ReadableStreamDefaultReader")}var je,fe;typeof r.asyncIterator=="symbol"&&(fe=(je={},je[r.asyncIterator]=function(){return this},je),Object.defineProperty(fe,r.asyncIterator,{enumerable:!1}));var de=function(){function t(a,T){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=a,this._preventCancel=T}return t.prototype.next=function(){var a=this,T=function(){return a._nextSteps()};return this._ongoingPromise=this._ongoingPromise?h(this._ongoingPromise,T,T):T(),this._ongoingPromise},t.prototype.return=function(a){var T=this,ae=function(){return T._returnSteps(a)};return this._ongoingPromise?h(this._ongoingPromise,ae,ae):ae()},t.prototype._nextSteps=function(){var a=this;if(this._isFinished)return Promise.resolve({value:void 0,done:!0});var T=this._reader;if(T._ownerReadableStream===void 0)return x($("iterate"));var ae,me,Ce=O(function(He,Ke){ae=He,me=Ke}),Me={_chunkSteps:function(He){a._ongoingPromise=void 0,u(function(){return ae({value:He,done:!1})})},_closeSteps:function(){a._ongoingPromise=void 0,a._isFinished=!0,I(T),ae({value:void 0,done:!0})},_errorSteps:function(He){a._ongoingPromise=void 0,a._isFinished=!0,I(T),me(He)}};return Ie(T,Me),Ce},t.prototype._returnSteps=function(a){if(this._isFinished)return Promise.resolve({value:a,done:!0});this._isFinished=!0;var T=this._reader;if(T._ownerReadableStream===void 0)return x($("finish iterating"));if(!this._preventCancel){var ae=G(T,a);return I(T),h(ae,function(){return{value:a,done:!0}})}return I(T),w({value:a,done:!0})},t}(),U={next:function(){return K(this)?this._asyncIteratorImpl.next():x(oe("next"))},return:function(t){return K(this)?this._asyncIteratorImpl.return(t):x(oe("return"))}};fe!==void 0&&Object.setPrototypeOf(U,fe);function te(t,a){var T=ve(t),ae=new de(T,a),me=Object.create(U);return me._asyncIteratorImpl=ae,me}function K(t){if(!S(t)||!Object.prototype.hasOwnProperty.call(t,"_asyncIteratorImpl"))return!1;try{return t._asyncIteratorImpl instanceof de}catch{return!1}}function oe(t){return new TypeError("ReadableStreamAsyncIterator."+t+" can only be used on a ReadableSteamAsyncIterator")}var ne=Number.isNaN||function(t){return t!==t};function Q(t){return t.slice()}function he(t,a,T,ae,me){new Uint8Array(t).set(new Uint8Array(T,ae,me),a)}function ce(t){return t}function Se(t){return!1}function Re(t,a,T){if(t.slice)return t.slice(a,T);var ae=T-a,me=new ArrayBuffer(ae);return he(me,0,t,a,ae),me}function De(t){return!(typeof t!="number"||ne(t)||t<0)}function Le(t){var a=Re(t.buffer,t.byteOffset,t.byteOffset+t.byteLength);return new Uint8Array(a)}function _e(t){var a=t._queue.shift();return t._queueTotalSize-=a.size,t._queueTotalSize<0&&(t._queueTotalSize=0),a.value}function Ge(t,a,T){if(!De(T)||T===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");t._queue.push({value:a,size:T}),t._queueTotalSize+=T}function Oe(t){var a=t._queue.peek();return a.value}function xe(t){t._queue=new b,t._queueTotalSize=0}var Be=function(){function t(){throw new TypeError("Illegal constructor")}return Object.defineProperty(t.prototype,"view",{get:function(){if(!Xe(this))throw It("view");return this._view},enumerable:!1,configurable:!0}),t.prototype.respond=function(a){if(!Xe(this))throw It("respond");if(d(a,1,"respond"),a=J(a,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Se(this._view.buffer),ot(this._associatedReadableByteStreamController,a)},t.prototype.respondWithNewView=function(a){if(!Xe(this))throw It("respondWithNewView");if(d(a,1,"respondWithNewView"),!ArrayBuffer.isView(a))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Se(a.buffer),vt(this._associatedReadableByteStreamController,a)},t}();Object.defineProperties(Be.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Be.prototype,r.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});var Ne=function(){function t(){throw new TypeError("Illegal constructor")}return Object.defineProperty(t.prototype,"byobRequest",{get:function(){if(!Ve(this))throw at("byobRequest");return qe(this)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"desiredSize",{get:function(){if(!Ve(this))throw at("desiredSize");return nt(this)},enumerable:!1,configurable:!0}),t.prototype.close=function(){if(!Ve(this))throw at("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var a=this._controlledReadableByteStream._state;if(a!=="readable")throw new TypeError("The stream (in "+a+" state) is not in the readable state and cannot be closed");Ue(this)},t.prototype.enqueue=function(a){if(!Ve(this))throw at("enqueue");if(d(a,1,"enqueue"),!ArrayBuffer.isView(a))throw new TypeError("chunk must be an array buffer view");if(a.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(a.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");var T=this._controlledReadableByteStream._state;if(T!=="readable")throw new TypeError("The stream (in "+T+" state) is not in the readable state and cannot be enqueued to");ze(this,a)},t.prototype.error=function(a){if(a===void 0&&(a=void 0),!Ve(this))throw at("error");$e(this,a)},t.prototype[E]=function(a){rt(this),xe(this);var T=this._cancelAlgorithm(a);return ge(this),T},t.prototype[q]=function(a){var T=this._controlledReadableByteStream;if(this._queueTotalSize>0){var ae=this._queue.shift();this._queueTotalSize-=ae.byteLength,Ot(this);var me=new Uint8Array(ae.buffer,ae.byteOffset,ae.byteLength);a._chunkSteps(me);return}var Ce=this._autoAllocateChunkSize;if(Ce!==void 0){var Me=void 0;try{Me=new ArrayBuffer(Ce)}catch(Ke){a._errorSteps(Ke);return}var He={buffer:Me,bufferByteLength:Ce,byteOffset:0,byteLength:Ce,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(He)}ye(T,a),Je(this)},t}();Object.defineProperties(Ne.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Ne.prototype,r.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function Ve(t){return!S(t)||!Object.prototype.hasOwnProperty.call(t,"_controlledReadableByteStream")?!1:t instanceof Ne}function Xe(t){return!S(t)||!Object.prototype.hasOwnProperty.call(t,"_associatedReadableByteStreamController")?!1:t instanceof Be}function Je(t){var a=se(t);if(!!a){if(t._pulling){t._pullAgain=!0;return}t._pulling=!0;var T=t._pullAlgorithm();L(T,function(){t._pulling=!1,t._pullAgain&&(t._pullAgain=!1,Je(t))},function(ae){$e(t,ae)})}}function rt(t){xt(t),t._pendingPullIntos=new b}function it(t,a){var T=!1;t._state==="closed"&&(T=!0);var ae=yt(a);a.readerType==="default"?pe(t,ae,T):nr(t,ae,T)}function yt(t){var a=t.bytesFilled,T=t.elementSize;return new t.viewConstructor(t.buffer,t.byteOffset,a/T)}function ht(t,a,T,ae){t._queue.push({buffer:a,byteOffset:T,byteLength:ae}),t._queueTotalSize+=ae}function Rt(t,a){var T=a.elementSize,ae=a.bytesFilled-a.bytesFilled%T,me=Math.min(t._queueTotalSize,a.byteLength-a.bytesFilled),Ce=a.bytesFilled+me,Me=Ce-Ce%T,He=me,Ke=!1;Me>ae&&(He=Me-a.bytesFilled,Ke=!0);for(var Qe=t._queue;He>0;){var Ze=Qe.peek(),et=Math.min(He,Ze.byteLength),ct=a.byteOffset+a.bytesFilled;he(a.buffer,ct,Ze.buffer,Ze.byteOffset,et),Ze.byteLength===et?Qe.shift():(Ze.byteOffset+=et,Ze.byteLength-=et),t._queueTotalSize-=et,Yt(t,et,a),He-=et}return Ke}function Yt(t,a,T){T.bytesFilled+=a}function Ot(t){t._queueTotalSize===0&&t._closeRequested?(ge(t),cr(t._controlledReadableByteStream)):Je(t)}function xt(t){t._byobRequest!==null&&(t._byobRequest._associatedReadableByteStreamController=void 0,t._byobRequest._view=null,t._byobRequest=null)}function Ft(t){for(;t._pendingPullIntos.length>0;){if(t._queueTotalSize===0)return;var a=t._pendingPullIntos.peek();Rt(t,a)&&(Pe(t),it(t._controlledReadableByteStream,a))}}function Xt(t,a,T){var ae=t._controlledReadableByteStream,me=1;a.constructor!==DataView&&(me=a.constructor.BYTES_PER_ELEMENT);var Ce=a.constructor,Me=a.buffer,He={buffer:Me,bufferByteLength:Me.byteLength,byteOffset:a.byteOffset,byteLength:a.byteLength,bytesFilled:0,elementSize:me,viewConstructor:Ce,readerType:"byob"};if(t._pendingPullIntos.length>0){t._pendingPullIntos.push(He),Gt(ae,T);return}if(ae._state==="closed"){var Ke=new Ce(He.buffer,He.byteOffset,0);T._closeSteps(Ke);return}if(t._queueTotalSize>0){if(Rt(t,He)){var Qe=yt(He);Ot(t),T._chunkSteps(Qe);return}if(t._closeRequested){var Ze=new TypeError("Insufficient bytes to fill elements in the given buffer");$e(t,Ze),T._errorSteps(Ze);return}}t._pendingPullIntos.push(He),Gt(ae,T),Je(t)}function At(t,a){var T=t._controlledReadableByteStream;if(zt(T))for(;qt(T)>0;){var ae=Pe(t);it(T,ae)}}function wt(t,a,T){if(Yt(t,a,T),!(T.bytesFilled<T.elementSize)){Pe(t);var ae=T.bytesFilled%T.elementSize;if(ae>0){var me=T.byteOffset+T.bytesFilled,Ce=Re(T.buffer,me-ae,me);ht(t,Ce,0,Ce.byteLength)}T.bytesFilled-=ae,it(t._controlledReadableByteStream,T),Ft(t)}}function ue(t,a){var T=t._pendingPullIntos.peek();xt(t);var ae=t._controlledReadableByteStream._state;ae==="closed"?At(t):wt(t,a,T),Je(t)}function Pe(t){var a=t._pendingPullIntos.shift();return a}function se(t){var a=t._controlledReadableByteStream;if(a._state!=="readable"||t._closeRequested||!t._started)return!1;if(Te(a)&&Ae(a)>0||zt(a)&&qt(a)>0)return!0;var T=nt(t);return T>0}function ge(t){t._pullAlgorithm=void 0,t._cancelAlgorithm=void 0}function Ue(t){var a=t._controlledReadableByteStream;if(!(t._closeRequested||a._state!=="readable")){if(t._queueTotalSize>0){t._closeRequested=!0;return}if(t._pendingPullIntos.length>0){var T=t._pendingPullIntos.peek();if(T.bytesFilled>0){var ae=new TypeError("Insufficient bytes to fill elements in the given buffer");throw $e(t,ae),ae}}ge(t),cr(a)}}function ze(t,a){var T=t._controlledReadableByteStream;if(!(t._closeRequested||T._state!=="readable")){var ae=a.buffer,me=a.byteOffset,Ce=a.byteLength,Me=ae;if(t._pendingPullIntos.length>0){var He=t._pendingPullIntos.peek();Se(He.buffer),He.buffer=He.buffer}if(xt(t),Te(T))if(Ae(T)===0)ht(t,Me,me,Ce);else{t._pendingPullIntos.length>0&&Pe(t);var Ke=new Uint8Array(Me,me,Ce);pe(T,Ke,!1)}else zt(T)?(ht(t,Me,me,Ce),Ft(t)):ht(t,Me,me,Ce);Je(t)}}function $e(t,a){var T=t._controlledReadableByteStream;T._state==="readable"&&(rt(t),xe(t),ge(t),bn(T,a))}function qe(t){if(t._byobRequest===null&&t._pendingPullIntos.length>0){var a=t._pendingPullIntos.peek(),T=new Uint8Array(a.buffer,a.byteOffset+a.bytesFilled,a.byteLength-a.bytesFilled),ae=Object.create(Be.prototype);gt(ae,t,T),t._byobRequest=ae}return t._byobRequest}function nt(t){var a=t._controlledReadableByteStream._state;return a==="errored"?null:a==="closed"?0:t._strategyHWM-t._queueTotalSize}function ot(t,a){var T=t._pendingPullIntos.peek(),ae=t._controlledReadableByteStream._state;if(ae==="closed"){if(a!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(a===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(T.bytesFilled+a>T.byteLength)throw new RangeError("bytesWritten out of range")}T.buffer=T.buffer,ue(t,a)}function vt(t,a){var T=t._pendingPullIntos.peek(),ae=t._controlledReadableByteStream._state;if(ae==="closed"){if(a.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(a.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(T.byteOffset+T.bytesFilled!==a.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(T.bufferByteLength!==a.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(T.bytesFilled+a.byteLength>T.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");var me=a.byteLength;T.buffer=a.buffer,ue(t,me)}function ft(t,a,T,ae,me,Ce,Me){a._controlledReadableByteStream=t,a._pullAgain=!1,a._pulling=!1,a._byobRequest=null,a._queue=a._queueTotalSize=void 0,xe(a),a._closeRequested=!1,a._started=!1,a._strategyHWM=Ce,a._pullAlgorithm=ae,a._cancelAlgorithm=me,a._autoAllocateChunkSize=Me,a._pendingPullIntos=new b,t._readableStreamController=a;var He=T();L(w(He),function(){a._started=!0,Je(a)},function(Ke){$e(a,Ke)})}function _t(t,a,T){var ae=Object.create(Ne.prototype),me=function(){},Ce=function(){return w(void 0)},Me=function(){return w(void 0)};a.start!==void 0&&(me=function(){return a.start(ae)}),a.pull!==void 0&&(Ce=function(){return a.pull(ae)}),a.cancel!==void 0&&(Me=function(Ke){return a.cancel(Ke)});var He=a.autoAllocateChunkSize;if(He===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");ft(t,ae,me,Ce,Me,T,He)}function gt(t,a,T){t._associatedReadableByteStreamController=a,t._view=T}function It(t){return new TypeError("ReadableStreamBYOBRequest.prototype."+t+" can only be used on a ReadableStreamBYOBRequest")}function at(t){return new TypeError("ReadableByteStreamController.prototype."+t+" can only be used on a ReadableByteStreamController")}function jt(t){return new mt(t)}function Gt(t,a){t._reader._readIntoRequests.push(a)}function nr(t,a,T){var ae=t._reader,me=ae._readIntoRequests.shift();T?me._closeSteps(a):me._chunkSteps(a)}function qt(t){return t._reader._readIntoRequests.length}function zt(t){var a=t._reader;return!(a===void 0||!lt(a))}var mt=function(){function t(a){if(d(a,1,"ReadableStreamBYOBReader"),le(a,"First parameter"),Bt(a))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!Ve(a._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");C(this,a),this._readIntoRequests=new b}return Object.defineProperty(t.prototype,"closed",{get:function(){return lt(this)?this._closedPromise:x(hr("closed"))},enumerable:!1,configurable:!0}),t.prototype.cancel=function(a){return a===void 0&&(a=void 0),lt(this)?this._ownerReadableStream===void 0?x($("cancel")):G(this,a):x(hr("cancel"))},t.prototype.read=function(a){if(!lt(this))return x(hr("read"));if(!ArrayBuffer.isView(a))return x(new TypeError("view must be an array buffer view"));if(a.byteLength===0)return x(new TypeError("view must have non-zero byteLength"));if(a.buffer.byteLength===0)return x(new TypeError("view's buffer must have non-zero byteLength"));if(Se(a.buffer),this._ownerReadableStream===void 0)return x($("read from"));var T,ae,me=O(function(Me,He){T=Me,ae=He}),Ce={_chunkSteps:function(Me){return T({value:Me,done:!1})},_closeSteps:function(Me){return T({value:Me,done:!0})},_errorSteps:function(Me){return ae(Me)}};return Mt(this,a,Ce),me},t.prototype.releaseLock=function(){if(!lt(this))throw hr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");I(this)}},t}();Object.defineProperties(mt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(mt.prototype,r.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function lt(t){return!S(t)||!Object.prototype.hasOwnProperty.call(t,"_readIntoRequests")?!1:t instanceof mt}function Mt(t,a,T){var ae=t._ownerReadableStream;ae._disturbed=!0,ae._state==="errored"?T._errorSteps(ae._storedError):Xt(ae._readableStreamController,a,T)}function hr(t){return new TypeError("ReadableStreamBYOBReader.prototype."+t+" can only be used on a ReadableStreamBYOBReader")}function ar(t,a){var T=t.highWaterMark;if(T===void 0)return a;if(ne(T)||T<0)throw new RangeError("Invalid highWaterMark");return T}function vr(t){var a=t.size;return a||function(){return 1}}function pr(t,a){ke(t,a);var T=t==null?void 0:t.highWaterMark,ae=t==null?void 0:t.size;return{highWaterMark:T===void 0?void 0:g(T),size:ae===void 0?void 0:In(ae,a+" has member 'size' that")}}function In(t,a){return we(t,a),function(T){return g(t(T))}}function Mn(t,a){ke(t,a);var T=t==null?void 0:t.abort,ae=t==null?void 0:t.close,me=t==null?void 0:t.start,Ce=t==null?void 0:t.type,Me=t==null?void 0:t.write;return{abort:T===void 0?void 0:Dn(T,t,a+" has member 'abort' that"),close:ae===void 0?void 0:Ln(ae,t,a+" has member 'close' that"),start:me===void 0?void 0:Nn(me,t,a+" has member 'start' that"),write:Me===void 0?void 0:Bn(Me,t,a+" has member 'write' that"),type:Ce}}function Dn(t,a,T){return we(t,T),function(ae){return p(t,a,[ae])}}function Ln(t,a,T){return we(t,T),function(){return p(t,a,[])}}function Nn(t,a,T){return we(t,T),function(ae){return y(t,a,[ae])}}function Bn(t,a,T){return we(t,T),function(ae,me){return p(t,a,[ae,me])}}function Kr(t,a){if(!Kt(t))throw new TypeError(a+" is not a WritableStream.")}function Wn(t){if(typeof t!="object"||t===null)return!1;try{return typeof t.aborted=="boolean"}catch{return!1}}var Un=typeof AbortController=="function";function jn(){if(Un)return new AbortController}var ir=function(){function t(a,T){a===void 0&&(a={}),T===void 0&&(T={}),a===void 0?a=null:R(a,"First parameter");var ae=pr(T,"Second parameter"),me=Mn(a,"First parameter");Jr(this);var Ce=me.type;if(Ce!==void 0)throw new RangeError("Invalid type is specified");var Me=vr(ae),He=ar(ae,1);ta(this,me,He,Me)}return Object.defineProperty(t.prototype,"locked",{get:function(){if(!Kt(this))throw Sr("locked");return Qt(this)},enumerable:!1,configurable:!0}),t.prototype.abort=function(a){return a===void 0&&(a=void 0),Kt(this)?Qt(this)?x(new TypeError("Cannot abort a stream that already has a writer")):yr(this,a):x(Sr("abort"))},t.prototype.close=function(){return Kt(this)?Qt(this)?x(new TypeError("Cannot close a stream that already has a writer")):kt(this)?x(new TypeError("Cannot close an already-closing stream")):Zr(this):x(Sr("close"))},t.prototype.getWriter=function(){if(!Kt(this))throw Sr("getWriter");return Qr(this)},t}();Object.defineProperties(ir.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(ir.prototype,r.toStringTag,{value:"WritableStream",configurable:!0});function Qr(t){return new or(t)}function Gn(t,a,T,ae,me,Ce){me===void 0&&(me=1),Ce===void 0&&(Ce=function(){return 1});var Me=Object.create(ir.prototype);Jr(Me);var He=Object.create(Jt.prototype);return on(Me,He,t,a,T,ae,me,Ce),Me}function Jr(t){t._state="writable",t._storedError=void 0,t._writer=void 0,t._writableStreamController=void 0,t._writeRequests=new b,t._inFlightWriteRequest=void 0,t._closeRequest=void 0,t._inFlightCloseRequest=void 0,t._pendingAbortRequest=void 0,t._backpressure=!1}function Kt(t){return!S(t)||!Object.prototype.hasOwnProperty.call(t,"_writableStreamController")?!1:t instanceof ir}function Qt(t){return t._writer!==void 0}function yr(t,a){var T;if(t._state==="closed"||t._state==="errored")return w(void 0);t._writableStreamController._abortReason=a,(T=t._writableStreamController._abortController)===null||T===void 0||T.abort();var ae=t._state;if(ae==="closed"||ae==="errored")return w(void 0);if(t._pendingAbortRequest!==void 0)return t._pendingAbortRequest._promise;var me=!1;ae==="erroring"&&(me=!0,a=void 0);var Ce=O(function(Me,He){t._pendingAbortRequest={_promise:void 0,_resolve:Me,_reject:He,_reason:a,_wasAlreadyErroring:me}});return t._pendingAbortRequest._promise=Ce,me||Lr(t,a),Ce}function Zr(t){var a=t._state;if(a==="closed"||a==="errored")return x(new TypeError("The stream (in "+a+" state) is not in the writable state and cannot be closed"));var T=O(function(me,Ce){var Me={_resolve:me,_reject:Ce};t._closeRequest=Me}),ae=t._writer;return ae!==void 0&&t._backpressure&&a==="writable"&&Vr(ae),ra(t._writableStreamController),T}function zn(t){var a=O(function(T,ae){var me={_resolve:T,_reject:ae};t._writeRequests.push(me)});return a}function Dr(t,a){var T=t._state;if(T==="writable"){Lr(t,a);return}Nr(t)}function Lr(t,a){var T=t._writableStreamController;t._state="erroring",t._storedError=a;var ae=t._writer;ae!==void 0&&tn(ae,a),!Xn(t)&&T._started&&Nr(t)}function Nr(t){t._state="errored",t._writableStreamController[A]();var a=t._storedError;if(t._writeRequests.forEach(function(me){me._reject(a)}),t._writeRequests=new b,t._pendingAbortRequest===void 0){gr(t);return}var T=t._pendingAbortRequest;if(t._pendingAbortRequest=void 0,T._wasAlreadyErroring){T._reject(a),gr(t);return}var ae=t._writableStreamController[v](T._reason);L(ae,function(){T._resolve(),gr(t)},function(me){T._reject(me),gr(t)})}function Hn(t){t._inFlightWriteRequest._resolve(void 0),t._inFlightWriteRequest=void 0}function Vn(t,a){t._inFlightWriteRequest._reject(a),t._inFlightWriteRequest=void 0,Dr(t,a)}function $n(t){t._inFlightCloseRequest._resolve(void 0),t._inFlightCloseRequest=void 0;var a=t._state;a==="erroring"&&(t._storedError=void 0,t._pendingAbortRequest!==void 0&&(t._pendingAbortRequest._resolve(),t._pendingAbortRequest=void 0)),t._state="closed";var T=t._writer;T!==void 0&&cn(T)}function Yn(t,a){t._inFlightCloseRequest._reject(a),t._inFlightCloseRequest=void 0,t._pendingAbortRequest!==void 0&&(t._pendingAbortRequest._reject(a),t._pendingAbortRequest=void 0),Dr(t,a)}function kt(t){return!(t._closeRequest===void 0&&t._inFlightCloseRequest===void 0)}function Xn(t){return!(t._inFlightWriteRequest===void 0&&t._inFlightCloseRequest===void 0)}function qn(t){t._inFlightCloseRequest=t._closeRequest,t._closeRequest=void 0}function Kn(t){t._inFlightWriteRequest=t._writeRequests.shift()}function gr(t){t._closeRequest!==void 0&&(t._closeRequest._reject(t._storedError),t._closeRequest=void 0);var a=t._writer;a!==void 0&&zr(a,t._storedError)}function Br(t,a){var T=t._writer;T!==void 0&&a!==t._backpressure&&(a?la(T):Vr(T)),t._backpressure=a}var or=function(){function t(a){if(d(a,1,"WritableStreamDefaultWriter"),Kr(a,"First parameter"),Qt(a))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=a,a._writer=this;var T=a._state;if(T==="writable")!kt(a)&&a._backpressure?_r(this):fn(this),Ar(this);else if(T==="erroring")Hr(this,a._storedError),Ar(this);else if(T==="closed")fn(this),sa(this);else{var ae=a._storedError;Hr(this,ae),ln(this,ae)}}return Object.defineProperty(t.prototype,"closed",{get:function(){return Ht(this)?this._closedPromise:x(Vt("closed"))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"desiredSize",{get:function(){if(!Ht(this))throw Vt("desiredSize");if(this._ownerWritableStream===void 0)throw sr("desiredSize");return ea(this)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ready",{get:function(){return Ht(this)?this._readyPromise:x(Vt("ready"))},enumerable:!1,configurable:!0}),t.prototype.abort=function(a){return a===void 0&&(a=void 0),Ht(this)?this._ownerWritableStream===void 0?x(sr("abort")):Qn(this,a):x(Vt("abort"))},t.prototype.close=function(){if(!Ht(this))return x(Vt("close"));var a=this._ownerWritableStream;return a===void 0?x(sr("close")):kt(a)?x(new TypeError("Cannot close an already-closing stream")):en(this)},t.prototype.releaseLock=function(){if(!Ht(this))throw Vt("releaseLock");var a=this._ownerWritableStream;a!==void 0&&rn(this)},t.prototype.write=function(a){return a===void 0&&(a=void 0),Ht(this)?this._ownerWritableStream===void 0?x(sr("write to")):nn(this,a):x(Vt("write"))},t}();Object.defineProperties(or.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(or.prototype,r.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function Ht(t){return!S(t)||!Object.prototype.hasOwnProperty.call(t,"_ownerWritableStream")?!1:t instanceof or}function Qn(t,a){var T=t._ownerWritableStream;return yr(T,a)}function en(t){var a=t._ownerWritableStream;return Zr(a)}function Jn(t){var a=t._ownerWritableStream,T=a._state;return kt(a)||T==="closed"?w(void 0):T==="errored"?x(a._storedError):en(t)}function Zn(t,a){t._closedPromiseState==="pending"?zr(t,a):ua(t,a)}function tn(t,a){t._readyPromiseState==="pending"?dn(t,a):ca(t,a)}function ea(t){var a=t._ownerWritableStream,T=a._state;return T==="errored"||T==="erroring"?null:T==="closed"?0:sn(a._writableStreamController)}function rn(t){var a=t._ownerWritableStream,T=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");tn(t,T),Zn(t,T),a._writer=void 0,t._ownerWritableStream=void 0}function nn(t,a){var T=t._ownerWritableStream,ae=T._writableStreamController,me=na(ae,a);if(T!==t._ownerWritableStream)return x(sr("write to"));var Ce=T._state;if(Ce==="errored")return x(T._storedError);if(kt(T)||Ce==="closed")return x(new TypeError("The stream is closing or closed and cannot be written to"));if(Ce==="erroring")return x(T._storedError);var Me=zn(T);return aa(ae,a,me),Me}var an={},Jt=function(){function t(){throw new TypeError("Illegal constructor")}return Object.defineProperty(t.prototype,"abortReason",{get:function(){if(!Wr(this))throw Gr("abortReason");return this._abortReason},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"signal",{get:function(){if(!Wr(this))throw Gr("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal},enumerable:!1,configurable:!0}),t.prototype.error=function(a){if(a===void 0&&(a=void 0),!Wr(this))throw Gr("error");var T=this._controlledWritableStream._state;T==="writable"&&un(this,a)},t.prototype[v]=function(a){var T=this._abortAlgorithm(a);return mr(this),T},t.prototype[A]=function(){xe(this)},t}();Object.defineProperties(Jt.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Jt.prototype,r.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function Wr(t){return!S(t)||!Object.prototype.hasOwnProperty.call(t,"_controlledWritableStream")?!1:t instanceof Jt}function on(t,a,T,ae,me,Ce,Me,He){a._controlledWritableStream=t,t._writableStreamController=a,a._queue=void 0,a._queueTotalSize=void 0,xe(a),a._abortReason=void 0,a._abortController=jn(),a._started=!1,a._strategySizeAlgorithm=He,a._strategyHWM=Me,a._writeAlgorithm=ae,a._closeAlgorithm=me,a._abortAlgorithm=Ce;var Ke=jr(a);Br(t,Ke);var Qe=T(),Ze=w(Qe);L(Ze,function(){a._started=!0,br(a)},function(et){a._started=!0,Dr(t,et)})}function ta(t,a,T,ae){var me=Object.create(Jt.prototype),Ce=function(){},Me=function(){return w(void 0)},He=function(){return w(void 0)},Ke=function(){return w(void 0)};a.start!==void 0&&(Ce=function(){return a.start(me)}),a.write!==void 0&&(Me=function(Qe){return a.write(Qe,me)}),a.close!==void 0&&(He=function(){return a.close()}),a.abort!==void 0&&(Ke=function(Qe){return a.abort(Qe)}),on(t,me,Ce,Me,He,Ke,T,ae)}function mr(t){t._writeAlgorithm=void 0,t._closeAlgorithm=void 0,t._abortAlgorithm=void 0,t._strategySizeAlgorithm=void 0}function ra(t){Ge(t,an,0),br(t)}function na(t,a){try{return t._strategySizeAlgorithm(a)}catch(T){return Ur(t,T),1}}function sn(t){return t._strategyHWM-t._queueTotalSize}function aa(t,a,T){try{Ge(t,a,T)}catch(Ce){Ur(t,Ce);return}var ae=t._controlledWritableStream;if(!kt(ae)&&ae._state==="writable"){var me=jr(t);Br(ae,me)}br(t)}function br(t){var a=t._controlledWritableStream;if(!!t._started&&a._inFlightWriteRequest===void 0){var T=a._state;if(T==="erroring"){Nr(a);return}if(t._queue.length!==0){var ae=Oe(t);ae===an?ia(t):oa(t,ae)}}}function Ur(t,a){t._controlledWritableStream._state==="writable"&&un(t,a)}function ia(t){var a=t._controlledWritableStream;qn(a),_e(t);var T=t._closeAlgorithm();mr(t),L(T,function(){$n(a)},function(ae){Yn(a,ae)})}function oa(t,a){var T=t._controlledWritableStream;Kn(T);var ae=t._writeAlgorithm(a);L(ae,function(){Hn(T);var me=T._state;if(_e(t),!kt(T)&&me==="writable"){var Ce=jr(t);Br(T,Ce)}br(t)},function(me){T._state==="writable"&&mr(t),Vn(T,me)})}function jr(t){var a=sn(t);return a<=0}function un(t,a){var T=t._controlledWritableStream;mr(t),Lr(T,a)}function Sr(t){return new TypeError("WritableStream.prototype."+t+" can only be used on a WritableStream")}function Gr(t){return new TypeError("WritableStreamDefaultController.prototype."+t+" can only be used on a WritableStreamDefaultController")}function Vt(t){return new TypeError("WritableStreamDefaultWriter.prototype."+t+" can only be used on a WritableStreamDefaultWriter")}function sr(t){return new TypeError("Cannot "+t+" a stream using a released writer")}function Ar(t){t._closedPromise=O(function(a,T){t._closedPromise_resolve=a,t._closedPromise_reject=T,t._closedPromiseState="pending"})}function ln(t,a){Ar(t),zr(t,a)}function sa(t){Ar(t),cn(t)}function zr(t,a){t._closedPromise_reject!==void 0&&(l(t._closedPromise),t._closedPromise_reject(a),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="rejected")}function ua(t,a){ln(t,a)}function cn(t){t._closedPromise_resolve!==void 0&&(t._closedPromise_resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="resolved")}function _r(t){t._readyPromise=O(function(a,T){t._readyPromise_resolve=a,t._readyPromise_reject=T}),t._readyPromiseState="pending"}function Hr(t,a){_r(t),dn(t,a)}function fn(t){_r(t),Vr(t)}function dn(t,a){t._readyPromise_reject!==void 0&&(l(t._readyPromise),t._readyPromise_reject(a),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="rejected")}function la(t){_r(t)}function ca(t,a){Hr(t,a)}function Vr(t){t._readyPromise_resolve!==void 0&&(t._readyPromise_resolve(void 0),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="fulfilled")}var hn=typeof DOMException!="undefined"?DOMException:void 0;function fa(t){if(!(typeof t=="function"||typeof t=="object"))return!1;try{return new t,!0}catch{return!1}}function da(){var t=function(T,ae){this.message=T||"",this.name=ae||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return t.prototype=Object.create(Error.prototype),Object.defineProperty(t.prototype,"constructor",{value:t,writable:!0,configurable:!0}),t}var ha=fa(hn)?hn:da();function vn(t,a,T,ae,me,Ce){var Me=ve(t),He=Qr(a);t._disturbed=!0;var Ke=!1,Qe=w(void 0);return O(function(Ze,et){var ct;if(Ce!==void 0){if(ct=function(){var Ye=new ha("Aborted","AbortError"),tt=[];ae||tt.push(function(){return a._state==="writable"?yr(a,Ye):w(void 0)}),me||tt.push(function(){return t._state==="readable"?bt(t,Ye):w(void 0)}),pt(function(){return Promise.all(tt.map(function(ut){return ut()}))},!0,Ye)},Ce.aborted){ct();return}Ce.addEventListener("abort",ct)}function St(){return O(function(Ye,tt){function ut(Ct){Ct?Ye():k(tr(),ut,tt)}ut(!1)})}function tr(){return Ke?w(!0):k(He._readyPromise,function(){return O(function(Ye,tt){Ie(Me,{_chunkSteps:function(ut){Qe=k(nn(He,ut),void 0,i),Ye(!1)},_closeSteps:function(){return Ye(!0)},_errorSteps:tt})})})}if(dt(t,Me._closedPromise,function(Ye){ae?Et(!0,Ye):pt(function(){return yr(a,Ye)},!0,Ye)}),dt(a,He._closedPromise,function(Ye){me?Et(!0,Ye):pt(function(){return bt(t,Ye)},!0,Ye)}),Pt(t,Me._closedPromise,function(){T?Et():pt(function(){return Jn(He)})}),kt(a)||a._state==="closed"){var Wt=new TypeError("the destination writable stream closed before all data could be piped to it");me?Et(!0,Wt):pt(function(){return bt(t,Wt)},!0,Wt)}l(St());function Tt(){var Ye=Qe;return k(Qe,function(){return Ye!==Qe?Tt():void 0})}function dt(Ye,tt,ut){Ye._state==="errored"?ut(Ye._storedError):B(tt,ut)}function Pt(Ye,tt,ut){Ye._state==="closed"?ut():_(tt,ut)}function pt(Ye,tt,ut){if(Ke)return;Ke=!0,a._state==="writable"&&!kt(a)?_(Tt(),Ct):Ct();function Ct(){L(Ye(),function(){return st(tt,ut)},function(Ut){return st(!0,Ut)})}}function Et(Ye,tt){Ke||(Ke=!0,a._state==="writable"&&!kt(a)?_(Tt(),function(){return st(Ye,tt)}):st(Ye,tt))}function st(Ye,tt){rn(He),I(Me),Ce!==void 0&&Ce.removeEventListener("abort",ct),Ye?et(tt):Ze(void 0)}})}var Zt=function(){function t(){throw new TypeError("Illegal constructor")}return Object.defineProperty(t.prototype,"desiredSize",{get:function(){if(!kr(this))throw Cr("desiredSize");return $r(this)},enumerable:!1,configurable:!0}),t.prototype.close=function(){if(!kr(this))throw Cr("close");if(!er(this))throw new TypeError("The stream is not in a state that permits close");lr(this)},t.prototype.enqueue=function(a){if(a===void 0&&(a=void 0),!kr(this))throw Cr("enqueue");if(!er(this))throw new TypeError("The stream is not in a state that permits enqueue");return Pr(this,a)},t.prototype.error=function(a){if(a===void 0&&(a=void 0),!kr(this))throw Cr("error");Dt(this,a)},t.prototype[E]=function(a){xe(this);var T=this._cancelAlgorithm(a);return Tr(this),T},t.prototype[q]=function(a){var T=this._controlledReadableStream;if(this._queue.length>0){var ae=_e(this);this._closeRequested&&this._queue.length===0?(Tr(this),cr(T)):ur(this),a._chunkSteps(ae)}else ye(T,a),ur(this)},t}();Object.defineProperties(Zt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Zt.prototype,r.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function kr(t){return!S(t)||!Object.prototype.hasOwnProperty.call(t,"_controlledReadableStream")?!1:t instanceof Zt}function ur(t){var a=pn(t);if(!!a){if(t._pulling){t._pullAgain=!0;return}t._pulling=!0;var T=t._pullAlgorithm();L(T,function(){t._pulling=!1,t._pullAgain&&(t._pullAgain=!1,ur(t))},function(ae){Dt(t,ae)})}}function pn(t){var a=t._controlledReadableStream;if(!er(t)||!t._started)return!1;if(Bt(a)&&Ae(a)>0)return!0;var T=$r(t);return T>0}function Tr(t){t._pullAlgorithm=void 0,t._cancelAlgorithm=void 0,t._strategySizeAlgorithm=void 0}function lr(t){if(!!er(t)){var a=t._controlledReadableStream;t._closeRequested=!0,t._queue.length===0&&(Tr(t),cr(a))}}function Pr(t,a){if(!!er(t)){var T=t._controlledReadableStream;if(Bt(T)&&Ae(T)>0)pe(T,a,!1);else{var ae=void 0;try{ae=t._strategySizeAlgorithm(a)}catch(me){throw Dt(t,me),me}try{Ge(t,a,ae)}catch(me){throw Dt(t,me),me}}ur(t)}}function Dt(t,a){var T=t._controlledReadableStream;T._state==="readable"&&(xe(t),Tr(t),bn(T,a))}function $r(t){var a=t._controlledReadableStream._state;return a==="errored"?null:a==="closed"?0:t._strategyHWM-t._queueTotalSize}function va(t){return!pn(t)}function er(t){var a=t._controlledReadableStream._state;return!t._closeRequested&&a==="readable"}function yn(t,a,T,ae,me,Ce,Me){a._controlledReadableStream=t,a._queue=void 0,a._queueTotalSize=void 0,xe(a),a._started=!1,a._closeRequested=!1,a._pullAgain=!1,a._pulling=!1,a._strategySizeAlgorithm=Me,a._strategyHWM=Ce,a._pullAlgorithm=ae,a._cancelAlgorithm=me,t._readableStreamController=a;var He=T();L(w(He),function(){a._started=!0,ur(a)},function(Ke){Dt(a,Ke)})}function pa(t,a,T,ae){var me=Object.create(Zt.prototype),Ce=function(){},Me=function(){return w(void 0)},He=function(){return w(void 0)};a.start!==void 0&&(Ce=function(){return a.start(me)}),a.pull!==void 0&&(Me=function(){return a.pull(me)}),a.cancel!==void 0&&(He=function(Ke){return a.cancel(Ke)}),yn(t,me,Ce,Me,He,T,ae)}function Cr(t){return new TypeError("ReadableStreamDefaultController.prototype."+t+" can only be used on a ReadableStreamDefaultController")}function ya(t,a){return Ve(t._readableStreamController)?ma(t):ga(t)}function ga(t,a){var T=ve(t),ae=!1,me=!1,Ce=!1,Me=!1,He,Ke,Qe,Ze,et,ct=O(function(dt){et=dt});function St(){if(ae)return me=!0,w(void 0);ae=!0;var dt={_chunkSteps:function(Pt){u(function(){me=!1;var pt=Pt,Et=Pt;Ce||Pr(Qe._readableStreamController,pt),Me||Pr(Ze._readableStreamController,Et),ae=!1,me&&St()})},_closeSteps:function(){ae=!1,Ce||lr(Qe._readableStreamController),Me||lr(Ze._readableStreamController),(!Ce||!Me)&&et(void 0)},_errorSteps:function(){ae=!1}};return Ie(T,dt),w(void 0)}function tr(dt){if(Ce=!0,He=dt,Me){var Pt=Q([He,Ke]),pt=bt(t,Pt);et(pt)}return ct}function Wt(dt){if(Me=!0,Ke=dt,Ce){var Pt=Q([He,Ke]),pt=bt(t,Pt);et(pt)}return ct}function Tt(){}return Qe=Yr(Tt,St,tr),Ze=Yr(Tt,St,Wt),B(T._closedPromise,function(dt){Dt(Qe._readableStreamController,dt),Dt(Ze._readableStreamController,dt),(!Ce||!Me)&&et(void 0)}),[Qe,Ze]}function ma(t){var a=ve(t),T=!1,ae=!1,me=!1,Ce=!1,Me=!1,He,Ke,Qe,Ze,et,ct=O(function(st){et=st});function St(st){B(st._closedPromise,function(Ye){st===a&&($e(Qe._readableStreamController,Ye),$e(Ze._readableStreamController,Ye),(!Ce||!Me)&&et(void 0))})}function tr(){lt(a)&&(I(a),a=ve(t),St(a));var st={_chunkSteps:function(Ye){u(function(){ae=!1,me=!1;var tt=Ye,ut=Ye;if(!Ce&&!Me)try{ut=Le(Ye)}catch(Ct){$e(Qe._readableStreamController,Ct),$e(Ze._readableStreamController,Ct),et(bt(t,Ct));return}Ce||ze(Qe._readableStreamController,tt),Me||ze(Ze._readableStreamController,ut),T=!1,ae?Tt():me&&dt()})},_closeSteps:function(){T=!1,Ce||Ue(Qe._readableStreamController),Me||Ue(Ze._readableStreamController),Qe._readableStreamController._pendingPullIntos.length>0&&ot(Qe._readableStreamController,0),Ze._readableStreamController._pendingPullIntos.length>0&&ot(Ze._readableStreamController,0),(!Ce||!Me)&&et(void 0)},_errorSteps:function(){T=!1}};Ie(a,st)}function Wt(st,Ye){Fe(a)&&(I(a),a=jt(t),St(a));var tt=Ye?Ze:Qe,ut=Ye?Qe:Ze,Ct={_chunkSteps:function(Ut){u(function(){ae=!1,me=!1;var rr=Ye?Me:Ce,dr=Ye?Ce:Me;if(dr)rr||vt(tt._readableStreamController,Ut);else{var Fn=void 0;try{Fn=Le(Ut)}catch(qr){$e(tt._readableStreamController,qr),$e(ut._readableStreamController,qr),et(bt(t,qr));return}rr||vt(tt._readableStreamController,Ut),ze(ut._readableStreamController,Fn)}T=!1,ae?Tt():me&&dt()})},_closeSteps:function(Ut){T=!1;var rr=Ye?Me:Ce,dr=Ye?Ce:Me;rr||Ue(tt._readableStreamController),dr||Ue(ut._readableStreamController),Ut!==void 0&&(rr||vt(tt._readableStreamController,Ut),!dr&&ut._readableStreamController._pendingPullIntos.length>0&&ot(ut._readableStreamController,0)),(!rr||!dr)&&et(void 0)},_errorSteps:function(){T=!1}};Mt(a,st,Ct)}function Tt(){if(T)return ae=!0,w(void 0);T=!0;var st=qe(Qe._readableStreamController);return st===null?tr():Wt(st._view,!1),w(void 0)}function dt(){if(T)return me=!0,w(void 0);T=!0;var st=qe(Ze._readableStreamController);return st===null?tr():Wt(st._view,!0),w(void 0)}function Pt(st){if(Ce=!0,He=st,Me){var Ye=Q([He,Ke]),tt=bt(t,Ye);et(tt)}return ct}function pt(st){if(Me=!0,Ke=st,Ce){var Ye=Q([He,Ke]),tt=bt(t,Ye);et(tt)}return ct}function Et(){}return Qe=mn(Et,Tt,Pt),Ze=mn(Et,dt,pt),St(a),[Qe,Ze]}function ba(t,a){ke(t,a);var T=t,ae=T==null?void 0:T.autoAllocateChunkSize,me=T==null?void 0:T.cancel,Ce=T==null?void 0:T.pull,Me=T==null?void 0:T.start,He=T==null?void 0:T.type;return{autoAllocateChunkSize:ae===void 0?void 0:J(ae,a+" has member 'autoAllocateChunkSize' that"),cancel:me===void 0?void 0:Sa(me,T,a+" has member 'cancel' that"),pull:Ce===void 0?void 0:Aa(Ce,T,a+" has member 'pull' that"),start:Me===void 0?void 0:_a(Me,T,a+" has member 'start' that"),type:He===void 0?void 0:ka(He,a+" has member 'type' that")}}function Sa(t,a,T){return we(t,T),function(ae){return p(t,a,[ae])}}function Aa(t,a,T){return we(t,T),function(ae){return p(t,a,[ae])}}function _a(t,a,T){return we(t,T),function(ae){return y(t,a,[ae])}}function ka(t,a){if(t=""+t,t!=="bytes")throw new TypeError(a+" '"+t+"' is not a valid enumeration value for ReadableStreamType");return t}function Ta(t,a){ke(t,a);var T=t==null?void 0:t.mode;return{mode:T===void 0?void 0:Pa(T,a+" has member 'mode' that")}}function Pa(t,a){if(t=""+t,t!=="byob")throw new TypeError(a+" '"+t+"' is not a valid enumeration value for ReadableStreamReaderMode");return t}function Ca(t,a){ke(t,a);var T=t==null?void 0:t.preventCancel;return{preventCancel:Boolean(T)}}function gn(t,a){ke(t,a);var T=t==null?void 0:t.preventAbort,ae=t==null?void 0:t.preventCancel,me=t==null?void 0:t.preventClose,Ce=t==null?void 0:t.signal;return Ce!==void 0&&Ra(Ce,a+" has member 'signal' that"),{preventAbort:Boolean(T),preventCancel:Boolean(ae),preventClose:Boolean(me),signal:Ce}}function Ra(t,a){if(!Wn(t))throw new TypeError(a+" is not an AbortSignal.")}function wa(t,a){ke(t,a);var T=t==null?void 0:t.readable;o(T,"readable","ReadableWritablePair"),le(T,a+" has member 'readable' that");var ae=t==null?void 0:t.writable;return o(ae,"writable","ReadableWritablePair"),Kr(ae,a+" has member 'writable' that"),{readable:T,writable:ae}}var Lt=function(){function t(a,T){a===void 0&&(a={}),T===void 0&&(T={}),a===void 0?a=null:R(a,"First parameter");var ae=pr(T,"Second parameter"),me=ba(a,"First parameter");if(Xr(this),me.type==="bytes"){if(ae.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");var Ce=ar(ae,0);_t(this,me,Ce)}else{var Me=vr(ae),Ce=ar(ae,1);pa(this,me,Ce,Me)}}return Object.defineProperty(t.prototype,"locked",{get:function(){if(!Nt(this))throw $t("locked");return Bt(this)},enumerable:!1,configurable:!0}),t.prototype.cancel=function(a){return a===void 0&&(a=void 0),Nt(this)?Bt(this)?x(new TypeError("Cannot cancel a stream that already has a reader")):bt(this,a):x($t("cancel"))},t.prototype.getReader=function(a){if(a===void 0&&(a=void 0),!Nt(this))throw $t("getReader");var T=Ta(a,"First parameter");return T.mode===void 0?ve(this):jt(this)},t.prototype.pipeThrough=function(a,T){if(T===void 0&&(T={}),!Nt(this))throw $t("pipeThrough");d(a,1,"pipeThrough");var ae=wa(a,"First parameter"),me=gn(T,"Second parameter");if(Bt(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Qt(ae.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");var Ce=vn(this,ae.writable,me.preventClose,me.preventAbort,me.preventCancel,me.signal);return l(Ce),ae.readable},t.prototype.pipeTo=function(a,T){if(T===void 0&&(T={}),!Nt(this))return x($t("pipeTo"));if(a===void 0)return x("Parameter 1 is required in 'pipeTo'.");if(!Kt(a))return x(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));var ae;try{ae=gn(T,"Second parameter")}catch(me){return x(me)}return Bt(this)?x(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):Qt(a)?x(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):vn(this,a,ae.preventClose,ae.preventAbort,ae.preventCancel,ae.signal)},t.prototype.tee=function(){if(!Nt(this))throw $t("tee");var a=ya(this);return Q(a)},t.prototype.values=function(a){if(a===void 0&&(a=void 0),!Nt(this))throw $t("values");var T=Ca(a,"First parameter");return te(this,T.preventCancel)},t}();Object.defineProperties(Lt.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Lt.prototype,r.toStringTag,{value:"ReadableStream",configurable:!0}),typeof r.asyncIterator=="symbol"&&Object.defineProperty(Lt.prototype,r.asyncIterator,{value:Lt.prototype.values,writable:!0,configurable:!0});function Yr(t,a,T,ae,me){ae===void 0&&(ae=1),me===void 0&&(me=function(){return 1});var Ce=Object.create(Lt.prototype);Xr(Ce);var Me=Object.create(Zt.prototype);return yn(Ce,Me,t,a,T,ae,me),Ce}function mn(t,a,T){var ae=Object.create(Lt.prototype);Xr(ae);var me=Object.create(Ne.prototype);return ft(ae,me,t,a,T,0,void 0),ae}function Xr(t){t._state="readable",t._reader=void 0,t._storedError=void 0,t._disturbed=!1}function Nt(t){return!S(t)||!Object.prototype.hasOwnProperty.call(t,"_readableStreamController")?!1:t instanceof Lt}function Bt(t){return t._reader!==void 0}function bt(t,a){if(t._disturbed=!0,t._state==="closed")return w(void 0);if(t._state==="errored")return x(t._storedError);cr(t);var T=t._reader;T!==void 0&&lt(T)&&(T._readIntoRequests.forEach(function(me){me._closeSteps(void 0)}),T._readIntoRequests=new b);var ae=t._readableStreamController[E](a);return h(ae,i)}function cr(t){t._state="closed";var a=t._reader;a!==void 0&&(P(a),Fe(a)&&(a._readRequests.forEach(function(T){T._closeSteps()}),a._readRequests=new b))}function bn(t,a){t._state="errored",t._storedError=a;var T=t._reader;T!==void 0&&(H(T,a),Fe(T)?(T._readRequests.forEach(function(ae){ae._errorSteps(a)}),T._readRequests=new b):(T._readIntoRequests.forEach(function(ae){ae._errorSteps(a)}),T._readIntoRequests=new b))}function $t(t){return new TypeError("ReadableStream.prototype."+t+" can only be used on a ReadableStream")}function Sn(t,a){ke(t,a);var T=t==null?void 0:t.highWaterMark;return o(T,"highWaterMark","QueuingStrategyInit"),{highWaterMark:g(T)}}var An=function(t){return t.byteLength};Object.defineProperty(An,"name",{value:"size",configurable:!0});var Rr=function(){function t(a){d(a,1,"ByteLengthQueuingStrategy"),a=Sn(a,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=a.highWaterMark}return Object.defineProperty(t.prototype,"highWaterMark",{get:function(){if(!kn(this))throw _n("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){if(!kn(this))throw _n("size");return An},enumerable:!1,configurable:!0}),t}();Object.defineProperties(Rr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Rr.prototype,r.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function _n(t){return new TypeError("ByteLengthQueuingStrategy.prototype."+t+" can only be used on a ByteLengthQueuingStrategy")}function kn(t){return!S(t)||!Object.prototype.hasOwnProperty.call(t,"_byteLengthQueuingStrategyHighWaterMark")?!1:t instanceof Rr}var Tn=function(){return 1};Object.defineProperty(Tn,"name",{value:"size",configurable:!0});var wr=function(){function t(a){d(a,1,"CountQueuingStrategy"),a=Sn(a,"First parameter"),this._countQueuingStrategyHighWaterMark=a.highWaterMark}return Object.defineProperty(t.prototype,"highWaterMark",{get:function(){if(!Cn(this))throw Pn("highWaterMark");return this._countQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){if(!Cn(this))throw Pn("size");return Tn},enumerable:!1,configurable:!0}),t}();Object.defineProperties(wr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(wr.prototype,r.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function Pn(t){return new TypeError("CountQueuingStrategy.prototype."+t+" can only be used on a CountQueuingStrategy")}function Cn(t){return!S(t)||!Object.prototype.hasOwnProperty.call(t,"_countQueuingStrategyHighWaterMark")?!1:t instanceof wr}function Ea(t,a){ke(t,a);var T=t==null?void 0:t.flush,ae=t==null?void 0:t.readableType,me=t==null?void 0:t.start,Ce=t==null?void 0:t.transform,Me=t==null?void 0:t.writableType;return{flush:T===void 0?void 0:Oa(T,t,a+" has member 'flush' that"),readableType:ae,start:me===void 0?void 0:xa(me,t,a+" has member 'start' that"),transform:Ce===void 0?void 0:Fa(Ce,t,a+" has member 'transform' that"),writableType:Me}}function Oa(t,a,T){return we(t,T),function(ae){return p(t,a,[ae])}}function xa(t,a,T){return we(t,T),function(ae){return y(t,a,[ae])}}function Fa(t,a,T){return we(t,T),function(ae,me){return p(t,a,[ae,me])}}var Er=function(){function t(a,T,ae){a===void 0&&(a={}),T===void 0&&(T={}),ae===void 0&&(ae={}),a===void 0&&(a=null);var me=pr(T,"Second parameter"),Ce=pr(ae,"Third parameter"),Me=Ea(a,"First parameter");if(Me.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(Me.writableType!==void 0)throw new RangeError("Invalid writableType specified");var He=ar(Ce,0),Ke=vr(Ce),Qe=ar(me,1),Ze=vr(me),et,ct=O(function(St){et=St});Ia(this,ct,Qe,Ze,He,Ke),Da(this,Me),Me.start!==void 0?et(Me.start(this._transformStreamController)):et(void 0)}return Object.defineProperty(t.prototype,"readable",{get:function(){if(!Rn(this))throw xn("readable");return this._readable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"writable",{get:function(){if(!Rn(this))throw xn("writable");return this._writable},enumerable:!1,configurable:!0}),t}();Object.defineProperties(Er.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Er.prototype,r.toStringTag,{value:"TransformStream",configurable:!0});function Ia(t,a,T,ae,me,Ce){function Me(){return a}function He(ct){return Ba(t,ct)}function Ke(ct){return Wa(t,ct)}function Qe(){return Ua(t)}t._writable=Gn(Me,He,Qe,Ke,T,ae);function Ze(){return ja(t)}function et(ct){return xr(t,ct),w(void 0)}t._readable=Yr(Me,Ze,et,me,Ce),t._backpressure=void 0,t._backpressureChangePromise=void 0,t._backpressureChangePromise_resolve=void 0,Fr(t,!0),t._transformStreamController=void 0}function Rn(t){return!S(t)||!Object.prototype.hasOwnProperty.call(t,"_transformStreamController")?!1:t instanceof Er}function Or(t,a){Dt(t._readable._readableStreamController,a),xr(t,a)}function xr(t,a){wn(t._transformStreamController),Ur(t._writable._writableStreamController,a),t._backpressure&&Fr(t,!1)}function Fr(t,a){t._backpressureChangePromise!==void 0&&t._backpressureChangePromise_resolve(),t._backpressureChangePromise=O(function(T){t._backpressureChangePromise_resolve=T}),t._backpressure=a}var fr=function(){function t(){throw new TypeError("Illegal constructor")}return Object.defineProperty(t.prototype,"desiredSize",{get:function(){if(!Ir(this))throw Mr("desiredSize");var a=this._controlledTransformStream._readable._readableStreamController;return $r(a)},enumerable:!1,configurable:!0}),t.prototype.enqueue=function(a){if(a===void 0&&(a=void 0),!Ir(this))throw Mr("enqueue");En(this,a)},t.prototype.error=function(a){if(a===void 0&&(a=void 0),!Ir(this))throw Mr("error");La(this,a)},t.prototype.terminate=function(){if(!Ir(this))throw Mr("terminate");Na(this)},t}();Object.defineProperties(fr.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(fr.prototype,r.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function Ir(t){return!S(t)||!Object.prototype.hasOwnProperty.call(t,"_controlledTransformStream")?!1:t instanceof fr}function Ma(t,a,T,ae){a._controlledTransformStream=t,t._transformStreamController=a,a._transformAlgorithm=T,a._flushAlgorithm=ae}function Da(t,a){var T=Object.create(fr.prototype),ae=function(Ce){try{return En(T,Ce),w(void 0)}catch(Me){return x(Me)}},me=function(){return w(void 0)};a.transform!==void 0&&(ae=function(Ce){return a.transform(Ce,T)}),a.flush!==void 0&&(me=function(){return a.flush(T)}),Ma(t,T,ae,me)}function wn(t){t._transformAlgorithm=void 0,t._flushAlgorithm=void 0}function En(t,a){var T=t._controlledTransformStream,ae=T._readable._readableStreamController;if(!er(ae))throw new TypeError("Readable side is not in a state that permits enqueue");try{Pr(ae,a)}catch(Ce){throw xr(T,Ce),T._readable._storedError}var me=va(ae);me!==T._backpressure&&Fr(T,!0)}function La(t,a){Or(t._controlledTransformStream,a)}function On(t,a){var T=t._transformAlgorithm(a);return h(T,void 0,function(ae){throw Or(t._controlledTransformStream,ae),ae})}function Na(t){var a=t._controlledTransformStream,T=a._readable._readableStreamController;lr(T);var ae=new TypeError("TransformStream terminated");xr(a,ae)}function Ba(t,a){var T=t._transformStreamController;if(t._backpressure){var ae=t._backpressureChangePromise;return h(ae,function(){var me=t._writable,Ce=me._state;if(Ce==="erroring")throw me._storedError;return On(T,a)})}return On(T,a)}function Wa(t,a){return Or(t,a),w(void 0)}function Ua(t){var a=t._readable,T=t._transformStreamController,ae=T._flushAlgorithm();return wn(T),h(ae,function(){if(a._state==="errored")throw a._storedError;lr(a._readableStreamController)},function(me){throw Or(t,me),a._storedError})}function ja(t){return Fr(t,!1),t._backpressureChangePromise}function Mr(t){return new TypeError("TransformStreamDefaultController.prototype."+t+" can only be used on a TransformStreamDefaultController")}function xn(t){return new TypeError("TransformStream.prototype."+t+" can only be used on a TransformStream")}e.ByteLengthQueuingStrategy=Rr,e.CountQueuingStrategy=wr,e.ReadableByteStreamController=Ne,e.ReadableStream=Lt,e.ReadableStreamBYOBReader=mt,e.ReadableStreamBYOBRequest=Be,e.ReadableStreamDefaultController=Zt,e.ReadableStreamDefaultReader=Ee,e.TransformStream=Er,e.TransformStreamDefaultController=fr,e.WritableStream=ir,e.WritableStreamDefaultController=Jt,e.WritableStreamDefaultWriter=or,Object.defineProperty(e,"__esModule",{value:!0})})},(s,n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BaseStandardFontDataFactory=n.BaseSVGFactory=n.BaseCanvasFactory=n.BaseCMapReaderFactory=void 0;var r=f(e(2)),i=e(4);function f(x){return x&&x.__esModule?x:{default:x}}function m(x,k,L,_,B,h,l){try{var u=x[h](l),y=u.value}catch(p){L(p);return}u.done?k(y):Promise.resolve(y).then(_,B)}function S(x){return function(){var k=this,L=arguments;return new Promise(function(_,B){var h=x.apply(k,L);function l(y){m(h,_,B,l,u,"next",y)}function u(y){m(h,_,B,l,u,"throw",y)}l(void 0)})}}function D(x,k){if(!(x instanceof k))throw new TypeError("Cannot call a class as a function")}function M(x,k){for(var L=0;L<k.length;L++){var _=k[L];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(x,_.key,_)}}function j(x,k,L){return k&&M(x.prototype,k),L&&M(x,L),x}var W=function(){function x(){D(this,x),this.constructor===x&&(0,i.unreachable)("Cannot initialize BaseCanvasFactory.")}return j(x,[{key:"create",value:function(L,_){if(L<=0||_<=0)throw new Error("Invalid canvas size");var B=this._createCanvas(L,_);return{canvas:B,context:B.getContext("2d")}}},{key:"reset",value:function(L,_,B){if(!L.canvas)throw new Error("Canvas is not specified");if(_<=0||B<=0)throw new Error("Invalid canvas size");L.canvas.width=_,L.canvas.height=B}},{key:"destroy",value:function(L){if(!L.canvas)throw new Error("Canvas is not specified");L.canvas.width=0,L.canvas.height=0,L.canvas=null,L.context=null}},{key:"_createCanvas",value:function(L,_){(0,i.unreachable)("Abstract method `_createCanvas` called.")}}]),x}();n.BaseCanvasFactory=W;var V=function(){function x(k){var L=k.baseUrl,_=L===void 0?null:L,B=k.isCompressed,h=B===void 0?!1:B;D(this,x),this.constructor===x&&(0,i.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=_,this.isCompressed=h}return j(x,[{key:"fetch",value:function(){var k=S(r.default.mark(function _(B){var h=this,l,u,y;return r.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(l=B.name,this.baseUrl){c.next=3;break}throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');case 3:if(l){c.next=5;break}throw new Error("CMap name must be specified.");case 5:return u=this.baseUrl+l+(this.isCompressed?".bcmap":""),y=this.isCompressed?i.CMapCompressionType.BINARY:i.CMapCompressionType.NONE,c.abrupt("return",this._fetchData(u,y).catch(function(b){throw new Error("Unable to load ".concat(h.isCompressed?"binary ":"","CMap at: ").concat(u))}));case 8:case"end":return c.stop()}},_,this)}));function L(_){return k.apply(this,arguments)}return L}()},{key:"_fetchData",value:function(L,_){(0,i.unreachable)("Abstract method `_fetchData` called.")}}]),x}();n.BaseCMapReaderFactory=V;var O=function(){function x(k){var L=k.baseUrl,_=L===void 0?null:L;D(this,x),this.constructor===x&&(0,i.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=_}return j(x,[{key:"fetch",value:function(){var k=S(r.default.mark(function _(B){var h,l;return r.default.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(h=B.filename,this.baseUrl){y.next=3;break}throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');case 3:if(h){y.next=5;break}throw new Error("Font filename must be specified.");case 5:return l="".concat(this.baseUrl).concat(h),y.abrupt("return",this._fetchData(l).catch(function(p){throw new Error("Unable to load font data at: ".concat(l))}));case 7:case"end":return y.stop()}},_,this)}));function L(_){return k.apply(this,arguments)}return L}()},{key:"_fetchData",value:function(L){(0,i.unreachable)("Abstract method `_fetchData` called.")}}]),x}();n.BaseStandardFontDataFactory=O;var w=function(){function x(){D(this,x),this.constructor===x&&(0,i.unreachable)("Cannot initialize BaseSVGFactory.")}return j(x,[{key:"create",value:function(L,_){if(L<=0||_<=0)throw new Error("Invalid SVG dimensions");var B=this._createSVG("svg:svg");return B.setAttribute("version","1.1"),B.setAttribute("width","".concat(L,"px")),B.setAttribute("height","".concat(_,"px")),B.setAttribute("preserveAspectRatio","none"),B.setAttribute("viewBox","0 0 ".concat(L," ").concat(_)),B}},{key:"createElement",value:function(L){if(typeof L!="string")throw new Error("Invalid SVG element type");return this._createSVG(L)}},{key:"_createSVG",value:function(L){(0,i.unreachable)("Abstract method `_createSVG` called.")}}]),x}();n.BaseSVGFactory=w},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _regenerator=_interopRequireDefault(__w_pdfjs_require__(2)),_util=__w_pdfjs_require__(4),_display_utils=__w_pdfjs_require__(1),_font_loader=__w_pdfjs_require__(137),_node_utils=__w_pdfjs_require__(138),_annotation_storage=__w_pdfjs_require__(139),_canvas=__w_pdfjs_require__(140),_worker_options=__w_pdfjs_require__(142),_is_node=__w_pdfjs_require__(6),_message_handler=__w_pdfjs_require__(143),_metadata=__w_pdfjs_require__(144),_optional_content_config=__w_pdfjs_require__(145),_transport_stream=__w_pdfjs_require__(146),_xfa_text=__w_pdfjs_require__(147);function _interopRequireDefault(s){return s&&s.__esModule?s:{default:s}}function _classPrivateFieldInitSpec(s,n,e){_checkPrivateRedeclaration(s,n),n.set(s,e)}function _checkPrivateRedeclaration(s,n){if(n.has(s))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet(s,n,e){var r=_classExtractFieldDescriptor(s,n,"set");return _classApplyDescriptorSet(s,r,e),e}function _classApplyDescriptorSet(s,n,e){if(n.set)n.set.call(s,e);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=e}}function _classPrivateFieldGet(s,n){var e=_classExtractFieldDescriptor(s,n,"get");return _classApplyDescriptorGet(s,e)}function _classExtractFieldDescriptor(s,n,e){if(!n.has(s))throw new TypeError("attempted to "+e+" private field on non-instance");return n.get(s)}function _classApplyDescriptorGet(s,n){return n.get?n.get.call(s):n.value}function _toConsumableArray(s){return _arrayWithoutHoles(s)||_iterableToArray(s)||_unsupportedIterableToArray(s)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray(s){if(typeof Symbol!="undefined"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function _arrayWithoutHoles(s){if(Array.isArray(s))return _arrayLikeToArray(s)}function _createForOfIteratorHelper(s,n){var e=typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(!e){if(Array.isArray(s)||(e=_unsupportedIterableToArray(s))||n&&s&&typeof s.length=="number"){e&&(s=e);var r=0,i=function(){};return{s:i,n:function(){return r>=s.length?{done:!0}:{done:!1,value:s[r++]}},e:function(M){throw M},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var f=!0,m=!1,S;return{s:function(){e=e.call(s)},n:function(){var M=e.next();return f=M.done,M},e:function(M){m=!0,S=M},f:function(){try{!f&&e.return!=null&&e.return()}finally{if(m)throw S}}}}function _classCallCheck(s,n){if(!(s instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(s,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(s,r.key,r)}}function _createClass(s,n,e){return n&&_defineProperties(s.prototype,n),e&&_defineProperties(s,e),s}function asyncGeneratorStep(s,n,e,r,i,f,m){try{var S=s[f](m),D=S.value}catch(M){e(M);return}S.done?n(D):Promise.resolve(D).then(r,i)}function _asyncToGenerator(s){return function(){var n=this,e=arguments;return new Promise(function(r,i){var f=s.apply(n,e);function m(D){asyncGeneratorStep(f,r,i,m,S,"next",D)}function S(D){asyncGeneratorStep(f,r,i,m,S,"throw",D)}m(void 0)})}}function _slicedToArray(s,n){return _arrayWithHoles(s)||_iterableToArrayLimit(s,n)||_unsupportedIterableToArray(s,n)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(s,n){if(!!s){if(typeof s=="string")return _arrayLikeToArray(s,n);var e=Object.prototype.toString.call(s).slice(8,-1);if(e==="Object"&&s.constructor&&(e=s.constructor.name),e==="Map"||e==="Set")return Array.from(s);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return _arrayLikeToArray(s,n)}}function _arrayLikeToArray(s,n){(n==null||n>s.length)&&(n=s.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=s[e];return r}function _iterableToArrayLimit(s,n){var e=s==null?null:typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(e!=null){var r=[],i=!0,f=!1,m,S;try{for(e=e.call(s);!(i=(m=e.next()).done)&&(r.push(m.value),!(n&&r.length===n));i=!0);}catch(D){f=!0,S=D}finally{try{!i&&e.return!=null&&e.return()}finally{if(f)throw S}}return r}}function _arrayWithHoles(s){if(Array.isArray(s))return s}function _typeof(s){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(e){return typeof e}:_typeof=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(s)}var DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DefaultCanvasFactory=_is_node.isNodeJS?_node_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;var DefaultCMapReaderFactory=_is_node.isNodeJS?_node_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;var DefaultStandardFontDataFactory=_is_node.isNodeJS?_node_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;var createPDFNetworkStream;function setPDFNetworkStreamFactory(s){createPDFNetworkStream=s}function getDocument(s){var n=new PDFDocumentLoadingTask,e;if(typeof s=="string"||s instanceof URL)e={url:s};else if((0,_util.isArrayBuffer)(s))e={data:s};else if(s instanceof PDFDataRangeTransport)e={range:s};else{if(_typeof(s)!=="object")throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!s.url&&!s.data&&!s.range)throw new Error("Invalid parameter object: need either .data, .range or .url");e=s}var r=Object.create(null),i=null,f=null;for(var m in e){var S=e[m];switch(m){case"url":if(typeof window!="undefined")try{r[m]=new URL(S,window.location).href;continue}catch(j){(0,_util.warn)('Cannot create valid URL: "'.concat(j,'".'))}else if(typeof S=="string"||S instanceof URL){r[m]=S.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":i=S;continue;case"worker":f=S;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer!="undefined"&&S instanceof Buffer)r[m]=new Uint8Array(S);else{if(S instanceof Uint8Array)break;if(typeof S=="string")r[m]=(0,_util.stringToBytes)(S);else if(_typeof(S)==="object"&&S!==null&&!isNaN(S.length))r[m]=new Uint8Array(S);else if((0,_util.isArrayBuffer)(S))r[m]=new Uint8Array(S);else throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.")}continue}r[m]=S}if(r.rangeChunkSize=r.rangeChunkSize||DEFAULT_RANGE_CHUNK_SIZE,r.CMapReaderFactory=r.CMapReaderFactory||DefaultCMapReaderFactory,r.StandardFontDataFactory=r.StandardFontDataFactory||DefaultStandardFontDataFactory,r.ignoreErrors=r.stopAtErrors!==!0,r.fontExtraProperties=r.fontExtraProperties===!0,r.pdfBug=r.pdfBug===!0,r.enableXfa=r.enableXfa===!0,(typeof r.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(r.docBaseUrl))&&(r.docBaseUrl=null),Number.isInteger(r.maxImageSize)||(r.maxImageSize=-1),typeof r.useWorkerFetch!="boolean"&&(r.useWorkerFetch=r.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&r.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof r.isEvalSupported!="boolean"&&(r.isEvalSupported=!0),typeof r.disableFontFace!="boolean"&&(r.disableFontFace=_is_node.isNodeJS),typeof r.useSystemFonts!="boolean"&&(r.useSystemFonts=!_is_node.isNodeJS&&!r.disableFontFace),typeof r.ownerDocument=="undefined"&&(r.ownerDocument=globalThis.document),typeof r.disableRange!="boolean"&&(r.disableRange=!1),typeof r.disableStream!="boolean"&&(r.disableStream=!1),typeof r.disableAutoFetch!="boolean"&&(r.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(r.verbosity),!f){var D={verbosity:r.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};f=D.port?PDFWorker.fromPort(D):new PDFWorker(D),n._worker=f}var M=n.docId;return f.promise.then(function(){if(n.destroyed)throw new Error("Loading aborted");var j=_fetchDocument(f,r,i,M),W=new Promise(function(V){var O;i?O=new _transport_stream.PDFDataTransportStream({length:r.length,initialData:r.initialData,progressiveDone:r.progressiveDone,contentDispositionFilename:r.contentDispositionFilename,disableRange:r.disableRange,disableStream:r.disableStream},i):r.data||(O=createPDFNetworkStream({url:r.url,length:r.length,httpHeaders:r.httpHeaders,withCredentials:r.withCredentials,rangeChunkSize:r.rangeChunkSize,disableRange:r.disableRange,disableStream:r.disableStream})),V(O)});return Promise.all([j,W]).then(function(V){var O=_slicedToArray(V,2),w=O[0],x=O[1];if(n.destroyed)throw new Error("Loading aborted");var k=new _message_handler.MessageHandler(M,w,f.port),L=new WorkerTransport(k,n,x,r);n._transport=L,k.send("Ready",null)})}).catch(n._capability.reject),n}function _fetchDocument(s,n,e,r){return _fetchDocument2.apply(this,arguments)}function _fetchDocument2(){return _fetchDocument2=_asyncToGenerator(_regenerator.default.mark(function s(n,e,r,i){var f;return _regenerator.default.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(!n.destroyed){S.next=2;break}throw new Error("Worker was destroyed");case 2:return r&&(e.length=r.length,e.initialData=r.initialData,e.progressiveDone=r.progressiveDone,e.contentDispositionFilename=r.contentDispositionFilename),S.next=5,n.messageHandler.sendWithPromise("GetDocRequest",{docId:i,apiVersion:"2.12.313",source:{data:e.data,url:e.url,password:e.password,disableAutoFetch:e.disableAutoFetch,rangeChunkSize:e.rangeChunkSize,length:e.length},maxImageSize:e.maxImageSize,disableFontFace:e.disableFontFace,docBaseUrl:e.docBaseUrl,ignoreErrors:e.ignoreErrors,isEvalSupported:e.isEvalSupported,fontExtraProperties:e.fontExtraProperties,enableXfa:e.enableXfa,useSystemFonts:e.useSystemFonts,cMapUrl:e.useWorkerFetch?e.cMapUrl:null,standardFontDataUrl:e.useWorkerFetch?e.standardFontDataUrl:null});case 5:if(f=S.sent,!n.destroyed){S.next=8;break}throw new Error("Worker was destroyed");case 8:return S.abrupt("return",f);case 9:case"end":return S.stop()}},s)})),_fetchDocument2.apply(this,arguments)}var PDFDocumentLoadingTask=function(){function s(){_classCallCheck(this,s),this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d".concat(s.idCounters.doc++),this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}return _createClass(s,[{key:"promise",get:function(){return this._capability.promise}},{key:"destroy",value:function(){var n=_asyncToGenerator(_regenerator.default.mark(function r(){var i;return _regenerator.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return this.destroyed=!0,m.next=3,(i=this._transport)===null||i===void 0?void 0:i.destroy();case 3:this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null);case 5:case"end":return m.stop()}},r,this)}));function e(){return n.apply(this,arguments)}return e}()}],[{key:"idCounters",get:function(){return(0,_util.shadow)(this,"idCounters",{doc:0})}}]),s}();exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;var PDFDataRangeTransport=function(){function s(n,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;_classCallCheck(this,s),this.length=n,this.initialData=e,this.progressiveDone=r,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}return _createClass(s,[{key:"addRangeListener",value:function(e){this._rangeListeners.push(e)}},{key:"addProgressListener",value:function(e){this._progressListeners.push(e)}},{key:"addProgressiveReadListener",value:function(e){this._progressiveReadListeners.push(e)}},{key:"addProgressiveDoneListener",value:function(e){this._progressiveDoneListeners.push(e)}},{key:"onDataRange",value:function(e,r){var i=_createForOfIteratorHelper(this._rangeListeners),f;try{for(i.s();!(f=i.n()).done;){var m=f.value;m(e,r)}}catch(S){i.e(S)}finally{i.f()}}},{key:"onDataProgress",value:function(e,r){var i=this;this._readyCapability.promise.then(function(){var f=_createForOfIteratorHelper(i._progressListeners),m;try{for(f.s();!(m=f.n()).done;){var S=m.value;S(e,r)}}catch(D){f.e(D)}finally{f.f()}})}},{key:"onDataProgressiveRead",value:function(e){var r=this;this._readyCapability.promise.then(function(){var i=_createForOfIteratorHelper(r._progressiveReadListeners),f;try{for(i.s();!(f=i.n()).done;){var m=f.value;m(e)}}catch(S){i.e(S)}finally{i.f()}})}},{key:"onDataProgressiveDone",value:function(){var e=this;this._readyCapability.promise.then(function(){var r=_createForOfIteratorHelper(e._progressiveDoneListeners),i;try{for(r.s();!(i=r.n()).done;){var f=i.value;f()}}catch(m){r.e(m)}finally{r.f()}})}},{key:"transportReady",value:function(){this._readyCapability.resolve()}},{key:"requestDataRange",value:function(e,r){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}},{key:"abort",value:function(){}}]),s}();exports.PDFDataRangeTransport=PDFDataRangeTransport;var PDFDocumentProxy=function(){function s(n,e){var r=this;_classCallCheck(this,s),this._pdfInfo=n,this._transport=e,Object.defineProperty(this,"fingerprint",{get:function(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:function(){var i=_asyncToGenerator(_regenerator.default.mark(function m(){return _regenerator.default.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return(0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),D.abrupt("return",r.stats||{streamTypes:{},fontTypes:{}});case 2:case"end":return D.stop()}},m)}));function f(){return i.apply(this,arguments)}return f}()})}return _createClass(s,[{key:"annotationStorage",get:function(){return this._transport.annotationStorage}},{key:"numPages",get:function(){return this._pdfInfo.numPages}},{key:"fingerprints",get:function(){return this._pdfInfo.fingerprints}},{key:"stats",get:function(){return this._transport.stats}},{key:"isPureXfa",get:function(){return!!this._transport._htmlForXfa}},{key:"allXfaHtml",get:function(){return this._transport._htmlForXfa}},{key:"getPage",value:function(e){return this._transport.getPage(e)}},{key:"getPageIndex",value:function(e){return this._transport.getPageIndex(e)}},{key:"getDestinations",value:function(){return this._transport.getDestinations()}},{key:"getDestination",value:function(e){return this._transport.getDestination(e)}},{key:"getPageLabels",value:function(){return this._transport.getPageLabels()}},{key:"getPageLayout",value:function(){return this._transport.getPageLayout()}},{key:"getPageMode",value:function(){return this._transport.getPageMode()}},{key:"getViewerPreferences",value:function(){return this._transport.getViewerPreferences()}},{key:"getOpenAction",value:function(){return this._transport.getOpenAction()}},{key:"getAttachments",value:function(){return this._transport.getAttachments()}},{key:"getJavaScript",value:function(){return this._transport.getJavaScript()}},{key:"getJSActions",value:function(){return this._transport.getDocJSActions()}},{key:"getOutline",value:function(){return this._transport.getOutline()}},{key:"getOptionalContentConfig",value:function(){return this._transport.getOptionalContentConfig()}},{key:"getPermissions",value:function(){return this._transport.getPermissions()}},{key:"getMetadata",value:function(){return this._transport.getMetadata()}},{key:"getMarkInfo",value:function(){return this._transport.getMarkInfo()}},{key:"getData",value:function(){return this._transport.getData()}},{key:"getDownloadInfo",value:function(){return this._transport.downloadInfoCapability.promise}},{key:"cleanup",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this._transport.startCleanup(e||this.isPureXfa)}},{key:"destroy",value:function(){return this.loadingTask.destroy()}},{key:"loadingParams",get:function(){return this._transport.loadingParams}},{key:"loadingTask",get:function(){return this._transport.loadingTask}},{key:"saveDocument",value:function(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}},{key:"getFieldObjects",value:function(){return this._transport.getFieldObjects()}},{key:"hasJSActions",value:function(){return this._transport.hasJSActions()}},{key:"getCalculationOrderIds",value:function(){return this._transport.getCalculationOrderIds()}}]),s}();exports.PDFDocumentProxy=PDFDocumentProxy;var PDFPageProxy=function(){function s(n,e,r,i){var f=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;_classCallCheck(this,s),this._pageIndex=n,this._pageInfo=e,this._ownerDocument=i,this._transport=r,this._stats=f?new _display_utils.StatTimer:null,this._pdfBug=f,this.commonObjs=r.commonObjs,this.objs=new PDFObjects,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}return _createClass(s,[{key:"pageNumber",get:function(){return this._pageIndex+1}},{key:"rotate",get:function(){return this._pageInfo.rotate}},{key:"ref",get:function(){return this._pageInfo.ref}},{key:"userUnit",get:function(){return this._pageInfo.userUnit}},{key:"view",get:function(){return this._pageInfo.view}},{key:"getViewport",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.scale,i=e.rotation,f=i===void 0?this.rotate:i,m=e.offsetX,S=m===void 0?0:m,D=e.offsetY,M=D===void 0?0:D,j=e.dontFlip,W=j===void 0?!1:j;return new _display_utils.PageViewport({viewBox:this.view,scale:r,rotation:f,offsetX:S,offsetY:M,dontFlip:W})}},{key:"getAnnotations",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.intent,i=r===void 0?"display":r,f=this._transport.getRenderingIntent(i),m=this._annotationPromises.get(f.cacheKey);return m||(m=this._transport.getAnnotations(this._pageIndex,f.renderingIntent),this._annotationPromises.set(f.cacheKey,m),m=m.then(function(S){var D=_createForOfIteratorHelper(S),M;try{var j=function(){var V=M.value;V.titleObj!==void 0&&Object.defineProperty(V,"title",{get:function(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),V.titleObj.str}}),V.contentsObj!==void 0&&Object.defineProperty(V,"contents",{get:function(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),V.contentsObj.str}})};for(D.s();!(M=D.n()).done;)j()}catch(W){D.e(W)}finally{D.f()}return S})),m}},{key:"getJSActions",value:function(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}},{key:"getXfa",value:function(){var n=_asyncToGenerator(_regenerator.default.mark(function r(){var i;return _regenerator.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",((i=this._transport._htmlForXfa)===null||i===void 0?void 0:i.children[this._pageIndex])||null);case 1:case"end":return m.stop()}},r,this)}));function e(){return n.apply(this,arguments)}return e}()},{key:"render",value:function(e){var r,i,f=this,m,S=e.canvasContext,D=e.viewport,M=e.intent,j=M===void 0?"display":M,W=e.annotationMode,V=W===void 0?_util.AnnotationMode.ENABLE:W,O=e.transform,w=O===void 0?null:O,x=e.imageLayer,k=x===void 0?null:x,L=e.canvasFactory,_=L===void 0?null:L,B=e.background,h=B===void 0?null:B,l=e.optionalContentConfigPromise,u=l===void 0?null:l,y=e.annotationCanvasMap,p=y===void 0?null:y;((r=arguments[0])===null||r===void 0?void 0:r.renderInteractiveForms)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&V===_util.AnnotationMode.ENABLE&&(V=_util.AnnotationMode.ENABLE_FORMS)),((i=arguments[0])===null||i===void 0?void 0:i.includeAnnotationStorage)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&V===_util.AnnotationMode.ENABLE&&(V=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");var c=this._transport.getRenderingIntent(j,V);this.pendingCleanup=!1,u||(u=this._transport.getOptionalContentConfig());var b=this._intentStates.get(c.cacheKey);b||(b=Object.create(null),this._intentStates.set(c.cacheKey,b)),b.streamReaderCancelTimeout&&(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null);var C=_||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),G=!!(c.renderingIntent&_util.RenderingIntentFlag.PRINT);b.displayReadyCapability||(b.displayReadyCapability=(0,_util.createPromiseCapability)(),b.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(c));var I=function(ie){b.renderTasks.delete($),(f.cleanupAfterRender||G)&&(f.pendingCleanup=!0),f._tryCleanup(),ie?($.capability.reject(ie),f._abortOperatorList({intentState:b,reason:ie instanceof Error?ie:new Error(ie)})):$.capability.resolve(),f._stats&&(f._stats.timeEnd("Rendering"),f._stats.timeEnd("Overall"))},$=new InternalRenderTask({callback:I,params:{canvasContext:S,viewport:D,transform:w,imageLayer:k,background:h},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:p,operatorList:b.operatorList,pageIndex:this._pageIndex,canvasFactory:C,useRequestAnimationFrame:!G,pdfBug:this._pdfBug});((m=b).renderTasks||(m.renderTasks=new Set)).add($);var ee=$.task;return Promise.all([b.displayReadyCapability.promise,u]).then(function(Z){var ie=_slicedToArray(Z,2),H=ie[0],X=ie[1];if(f.pendingCleanup){I();return}f._stats&&f._stats.time("Rendering"),$.initializeGraphics({transparency:H,optionalContentConfig:X}),$.operatorListChanged()}).catch(I),ee}},{key:"getOperatorList",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.intent,i=r===void 0?"display":r,f=e.annotationMode,m=f===void 0?_util.AnnotationMode.ENABLE:f;function S(){M.operatorList.lastChunk&&(M.opListReadCapability.resolve(M.operatorList),M.renderTasks.delete(j))}var D=this._transport.getRenderingIntent(i,m,!0),M=this._intentStates.get(D.cacheKey);M||(M=Object.create(null),this._intentStates.set(D.cacheKey,M));var j;if(!M.opListReadCapability){var W;j=Object.create(null),j.operatorListChanged=S,M.opListReadCapability=(0,_util.createPromiseCapability)(),((W=M).renderTasks||(W.renderTasks=new Set)).add(j),M.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(D)}return M.opListReadCapability.promise}},{key:"streamTextContent",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.normalizeWhitespace,i=r===void 0?!1:r,f=e.disableCombineTextItems,m=f===void 0?!1:f,S=e.includeMarkedContent,D=S===void 0?!1:S,M=100;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,normalizeWhitespace:i===!0,combineTextItems:m!==!0,includeMarkedContent:D===!0},{highWaterMark:M,size:function(W){return W.items.length}})}},{key:"getTextContent",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(function(i){return _xfa_text.XfaText.textContent(i)});var r=this.streamTextContent(e);return new Promise(function(i,f){function m(){S.read().then(function(M){var j,W=M.value,V=M.done;if(V){i(D);return}Object.assign(D.styles,W.styles),(j=D.items).push.apply(j,_toConsumableArray(W.items)),m()},f)}var S=r.getReader(),D={items:[],styles:Object.create(null)};m()})}},{key:"getStructTree",value:function(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}},{key:"_destroy",value:function(){this.destroyed=!0;var e=[],r=_createForOfIteratorHelper(this._intentStates.values()),i;try{for(r.s();!(i=r.n()).done;){var f=i.value;if(this._abortOperatorList({intentState:f,reason:new Error("Page was destroyed."),force:!0}),!f.opListReadCapability){var m=_createForOfIteratorHelper(f.renderTasks),S;try{for(m.s();!(S=m.n()).done;){var D=S.value;e.push(D.completed),D.cancel()}}catch(M){m.e(M)}finally{m.f()}}}}catch(M){r.e(M)}finally{r.f()}return this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(e)}},{key:"cleanup",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this.pendingCleanup=!0,this._tryCleanup(e)}},{key:"_tryCleanup",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.pendingCleanup)return!1;var r=_createForOfIteratorHelper(this._intentStates.values()),i;try{for(r.s();!(i=r.n()).done;){var f=i.value,m=f.renderTasks,S=f.operatorList;if(m.size>0||!S.lastChunk)return!1}}catch(D){r.e(D)}finally{r.f()}return this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,e&&this._stats&&(this._stats=new _display_utils.StatTimer),this.pendingCleanup=!1,!0}},{key:"_startRenderPage",value:function(e,r){var i=this._intentStates.get(r);!i||(this._stats&&this._stats.timeEnd("Page Request"),i.displayReadyCapability&&i.displayReadyCapability.resolve(e))}},{key:"_renderPageChunk",value:function(e,r){for(var i=0,f=e.length;i<f;i++)r.operatorList.fnArray.push(e.fnArray[i]),r.operatorList.argsArray.push(e.argsArray[i]);r.operatorList.lastChunk=e.lastChunk;var m=_createForOfIteratorHelper(r.renderTasks),S;try{for(m.s();!(S=m.n()).done;){var D=S.value;D.operatorListChanged()}}catch(M){m.e(M)}finally{m.f()}e.lastChunk&&this._tryCleanup()}},{key:"_pumpOperatorList",value:function(e){var r=this,i=e.renderingIntent,f=e.cacheKey,m=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:i,cacheKey:f,annotationStorage:i&_util.RenderingIntentFlag.ANNOTATIONS_STORAGE?this._transport.annotationStorage.serializable:null}),S=m.getReader(),D=this._intentStates.get(f);D.streamReader=S;var M=function j(){S.read().then(function(W){var V=W.value,O=W.done;if(O){D.streamReader=null;return}r._transport.destroyed||(r._renderPageChunk(V,D),j())},function(W){if(D.streamReader=null,!r._transport.destroyed){if(D.operatorList){D.operatorList.lastChunk=!0;var V=_createForOfIteratorHelper(D.renderTasks),O;try{for(V.s();!(O=V.n()).done;){var w=O.value;w.operatorListChanged()}}catch(x){V.e(x)}finally{V.f()}r._tryCleanup()}if(D.displayReadyCapability)D.displayReadyCapability.reject(W);else if(D.opListReadCapability)D.opListReadCapability.reject(W);else throw W}})};M()}},{key:"_abortOperatorList",value:function(e){var r=this,i=e.intentState,f=e.reason,m=e.force,S=m===void 0?!1:m;if(!!i.streamReader){if(!S){if(i.renderTasks.size>0)return;if(f instanceof _display_utils.RenderingCancelledException){i.streamReaderCancelTimeout=setTimeout(function(){r._abortOperatorList({intentState:i,reason:f,force:!0}),i.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(i.streamReader.cancel(new _util.AbortException(f.message)).catch(function(){}),i.streamReader=null,!this._transport.destroyed){var D=_createForOfIteratorHelper(this._intentStates),M;try{for(D.s();!(M=D.n()).done;){var j=_slicedToArray(M.value,2),W=j[0],V=j[1];if(V===i){this._intentStates.delete(W);break}}}catch(O){D.e(O)}finally{D.f()}this.cleanup()}}}},{key:"stats",get:function(){return this._stats}}]),s}();exports.PDFPageProxy=PDFPageProxy;var LoopbackPort=function(){function s(){_classCallCheck(this,s),this._listeners=[],this._deferred=Promise.resolve()}return _createClass(s,[{key:"postMessage",value:function(e,r){var i=this;function f(S){if(globalThis.structuredClone)return globalThis.structuredClone(S,r);function D(j){if(typeof j=="function"||_typeof(j)==="symbol"||j instanceof URL)throw new Error("LoopbackPort.postMessage - cannot clone: ".concat(j==null?void 0:j.toString()));if(_typeof(j)!=="object"||j===null)return j;if(M.has(j))return M.get(j);var W,V;if((W=j.buffer)&&(0,_util.isArrayBuffer)(W))return r!=null&&r.includes(W)?V=new j.constructor(W,j.byteOffset,j.byteLength):V=new j.constructor(j),M.set(j,V),V;if(j instanceof Map){V=new Map,M.set(j,V);var O=_createForOfIteratorHelper(j),w;try{for(O.s();!(w=O.n()).done;){var x=_slicedToArray(w.value,2),k=x[0],L=x[1];V.set(k,D(L))}}catch(c){O.e(c)}finally{O.f()}return V}if(j instanceof Set){V=new Set,M.set(j,V);var _=_createForOfIteratorHelper(j),B;try{for(_.s();!(B=_.n()).done;){var h=B.value;V.add(D(h))}}catch(c){_.e(c)}finally{_.f()}return V}V=Array.isArray(j)?[]:Object.create(null),M.set(j,V);for(var l in j){for(var u,y=void 0,p=j;!(y=Object.getOwnPropertyDescriptor(p,l));)p=Object.getPrototypeOf(p);typeof y.value!="undefined"&&(typeof y.value=="function"&&!((u=j.hasOwnProperty)!==null&&u!==void 0&&u.call(j,l))||(V[l]=D(y.value)))}return V}var M=new WeakMap;return D(S)}var m={data:f(e)};this._deferred.then(function(){var S=_createForOfIteratorHelper(i._listeners),D;try{for(S.s();!(D=S.n()).done;){var M=D.value;M.call(i,m)}}catch(j){S.e(j)}finally{S.f()}})}},{key:"addEventListener",value:function(e,r){this._listeners.push(r)}},{key:"removeEventListener",value:function(e,r){var i=this._listeners.indexOf(r);this._listeners.splice(i,1)}},{key:"terminate",value:function(){this._listeners.length=0}}]),s}();exports.LoopbackPort=LoopbackPort;var PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if((typeof document=="undefined"?"undefined":_typeof(document))==="object"){var _document,_document$currentScri,pdfjsFilePath=(_document=document)===null||_document===void 0||(_document$currentScri=_document.currentScript)===null||_document$currentScri===void 0?void 0:_document$currentScri.src;pdfjsFilePath&&(PDFWorkerUtil.fallbackWorkerSrc=pdfjsFilePath.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.createCDNWrapper=function(s){var n='importScripts("'.concat(s,'");');return URL.createObjectURL(new Blob([n]))}}var PDFWorker=function(){function PDFWorker(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=s.name,e=n===void 0?null:n,r=s.port,i=r===void 0?null:r,f=s.verbosity,m=f===void 0?(0,_util.getVerbosityLevel)():f;if(_classCallCheck(this,PDFWorker),i&&PDFWorker._workerPorts.has(i))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=e,this.destroyed=!1,this.verbosity=m,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,i){PDFWorker._workerPorts.set(i,this),this._initializeFromPort(i);return}this._initialize()}return _createClass(PDFWorker,[{key:"promise",get:function(){return this._readyCapability.promise}},{key:"port",get:function(){return this._port}},{key:"messageHandler",get:function(){return this._messageHandler}},{key:"_initializeFromPort",value:function(n){this._port=n,this._messageHandler=new _message_handler.MessageHandler("main","worker",n),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}},{key:"_initialize",value:function(){var n=this;if(typeof Worker!="undefined"&&!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){var e=PDFWorker.workerSrc;try{(0,_util.isSameOrigin)(window.location.href,e)||(e=PDFWorkerUtil.createCDNWrapper(new URL(e,window.location).href));var r=new Worker(e),i=new _message_handler.MessageHandler("main","worker",r),f=function(){r.removeEventListener("error",m),i.destroy(),r.terminate(),n.destroyed?n._readyCapability.reject(new Error("Worker was destroyed")):n._setupFakeWorker()},m=function(){n._webWorker||f()};r.addEventListener("error",m),i.on("test",function(D){if(r.removeEventListener("error",m),n.destroyed){f();return}D?(n._messageHandler=i,n._port=r,n._webWorker=r,n._readyCapability.resolve(),i.send("configure",{verbosity:n.verbosity})):(n._setupFakeWorker(),i.destroy(),r.terminate())}),i.on("ready",function(D){if(r.removeEventListener("error",m),n.destroyed){f();return}try{S()}catch{n._setupFakeWorker()}});var S=function(){var M=new Uint8Array([255]);try{i.send("test",M,[M.buffer])}catch{(0,_util.warn)("Cannot use postMessage transfers."),M[0]=0,i.send("test",M)}};S();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}},{key:"_setupFakeWorker",value:function(){var n=this;PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(function(e){if(n.destroyed){n._readyCapability.reject(new Error("Worker was destroyed"));return}var r=new LoopbackPort;n._port=r;var i="fake".concat(PDFWorkerUtil.fakeWorkerId++),f=new _message_handler.MessageHandler(i+"_worker",i,r);e.setup(f,r);var m=new _message_handler.MessageHandler(i,i+"_worker",r);n._messageHandler=m,n._readyCapability.resolve(),m.send("configure",{verbosity:n.verbosity})}).catch(function(e){n._readyCapability.reject(new Error('Setting up fake worker failed: "'.concat(e.message,'".')))})}},{key:"destroy",value:function(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker._workerPorts.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}}],[{key:"_workerPorts",get:function(){return(0,_util.shadow)(this,"_workerPorts",new WeakMap)}},{key:"fromPort",value:function(n){if(!(n!=null&&n.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return this._workerPorts.has(n.port)?this._workerPorts.get(n.port):new PDFWorker(n)}},{key:"workerSrc",get:function(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}},{key:"_mainThreadWorkerMessageHandler",get:function(){try{var n;return((n=globalThis.pdfjsWorker)===null||n===void 0?void 0:n.WorkerMessageHandler)||null}catch{return null}}},{key:"_setupFakeWorkerGlobal",get:function get(){var _this11=this,loader=function(){var _ref15=_asyncToGenerator(_regenerator.default.mark(function _callee4(){var mainWorkerMessageHandler,worker;return _regenerator.default.wrap(function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(mainWorkerMessageHandler=_this11._mainThreadWorkerMessageHandler,!mainWorkerMessageHandler){_context4.next=3;break}return _context4.abrupt("return",mainWorkerMessageHandler);case 3:if(!(_is_node.isNodeJS&&typeof commonjsRequire=="function")){_context4.next=6;break}return worker=eval("require")(_this11.workerSrc),_context4.abrupt("return",worker.WorkerMessageHandler);case 6:return _context4.next=8,(0,_display_utils.loadScript)(_this11.workerSrc);case 8:return _context4.abrupt("return",window.pdfjsWorker.WorkerMessageHandler);case 9:case"end":return _context4.stop()}},_callee4)}));return function s(){return _ref15.apply(this,arguments)}}();return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}]),PDFWorker}();exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};var _docStats=new WeakMap,_pageCache=new WeakMap,_pagePromises=new WeakMap,_metadataPromise=new WeakMap,WorkerTransport=function(){function s(n,e,r,i){_classCallCheck(this,s),_classPrivateFieldInitSpec(this,_docStats,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_pageCache,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_pagePromises,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_metadataPromise,{writable:!0,value:null}),this.messageHandler=n,this.loadingTask=e,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:e.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this._params=i,i.useWorkerFetch||(this.CMapReaderFactory=new i.CMapReaderFactory({baseUrl:i.cMapUrl,isCompressed:i.cMapPacked}),this.StandardFontDataFactory=new i.StandardFontDataFactory({baseUrl:i.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}return _createClass(s,[{key:"annotationStorage",get:function(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}},{key:"stats",get:function(){return _classPrivateFieldGet(this,_docStats)}},{key:"getRenderingIntent",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_util.AnnotationMode.ENABLE,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,f=_util.RenderingIntentFlag.DISPLAY,m="";switch(e){case"any":f=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":f=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)("getRenderingIntent - invalid intent: ".concat(e))}switch(r){case _util.AnnotationMode.DISABLE:f+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:f+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:f+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,m=this.annotationStorage.lastModified;break;default:(0,_util.warn)("getRenderingIntent - invalid annotationMode: ".concat(r))}return i&&(f+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:f,cacheKey:"".concat(f,"_").concat(m)}}},{key:"destroy",value:function(){var e=this;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));var r=[],i=_createForOfIteratorHelper(_classPrivateFieldGet(this,_pageCache).values()),f;try{for(i.s();!(f=i.n()).done;){var m=f.value;r.push(m._destroy())}}catch(D){i.e(D)}finally{i.f()}_classPrivateFieldGet(this,_pageCache).clear(),_classPrivateFieldGet(this,_pagePromises).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();var S=this.messageHandler.sendWithPromise("Terminate",null);return r.push(S),Promise.all(r).then(function(){e.commonObjs.clear(),e.fontLoader.clear(),_classPrivateFieldSet(e,_metadataPromise,null),e._getFieldObjectsPromise=null,e._hasJSActionsPromise=null,e._networkStream&&e._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),e.messageHandler&&(e.messageHandler.destroy(),e.messageHandler=null),e.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}},{key:"setupMessageHandler",value:function(){var e=this,r=this.messageHandler,i=this.loadingTask;r.on("GetReader",function(f,m){(0,_util.assert)(e._networkStream,"GetReader - no `IPDFStream` instance available."),e._fullReader=e._networkStream.getFullReader(),e._fullReader.onProgress=function(S){e._lastProgress={loaded:S.loaded,total:S.total}},m.onPull=function(){e._fullReader.read().then(function(S){var D=S.value,M=S.done;if(M){m.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(D),"GetReader - expected an ArrayBuffer."),m.enqueue(new Uint8Array(D),1,[D])}).catch(function(S){m.error(S)})},m.onCancel=function(S){e._fullReader.cancel(S),m.ready.catch(function(D){if(!e.destroyed)throw D})}}),r.on("ReaderHeadersReady",function(f){var m=(0,_util.createPromiseCapability)(),S=e._fullReader;return S.headersReady.then(function(){if(!S.isStreamingSupported||!S.isRangeSupported){if(e._lastProgress){var D;(D=i.onProgress)===null||D===void 0||D.call(i,e._lastProgress)}S.onProgress=function(M){var j;(j=i.onProgress)===null||j===void 0||j.call(i,{loaded:M.loaded,total:M.total})}}m.resolve({isStreamingSupported:S.isStreamingSupported,isRangeSupported:S.isRangeSupported,contentLength:S.contentLength})},m.reject),m.promise}),r.on("GetRangeReader",function(f,m){(0,_util.assert)(e._networkStream,"GetRangeReader - no `IPDFStream` instance available.");var S=e._networkStream.getRangeReader(f.begin,f.end);if(!S){m.close();return}m.onPull=function(){S.read().then(function(D){var M=D.value,j=D.done;if(j){m.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(M),"GetRangeReader - expected an ArrayBuffer."),m.enqueue(new Uint8Array(M),1,[M])}).catch(function(D){m.error(D)})},m.onCancel=function(D){S.cancel(D),m.ready.catch(function(M){if(!e.destroyed)throw M})}}),r.on("GetDoc",function(f){var m=f.pdfInfo;e._numPages=m.numPages,e._htmlForXfa=m.htmlForXfa,delete m.htmlForXfa,i._capability.resolve(new PDFDocumentProxy(m,e))}),r.on("DocException",function(f){var m;switch(f.name){case"PasswordException":m=new _util.PasswordException(f.message,f.code);break;case"InvalidPDFException":m=new _util.InvalidPDFException(f.message);break;case"MissingPDFException":m=new _util.MissingPDFException(f.message);break;case"UnexpectedResponseException":m=new _util.UnexpectedResponseException(f.message,f.status);break;case"UnknownErrorException":m=new _util.UnknownErrorException(f.message,f.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}i._capability.reject(m)}),r.on("PasswordRequest",function(f){if(e._passwordCapability=(0,_util.createPromiseCapability)(),i.onPassword){var m=function(D){e._passwordCapability.resolve({password:D})};try{i.onPassword(m,f.code)}catch(S){e._passwordCapability.reject(S)}}else e._passwordCapability.reject(new _util.PasswordException(f.message,f.code));return e._passwordCapability.promise}),r.on("DataLoaded",function(f){var m;(m=i.onProgress)===null||m===void 0||m.call(i,{loaded:f.length,total:f.length}),e.downloadInfoCapability.resolve(f)}),r.on("StartRenderPage",function(f){if(!e.destroyed){var m=_classPrivateFieldGet(e,_pageCache).get(f.pageIndex);m._startRenderPage(f.transparency,f.cacheKey)}}),r.on("commonobj",function(f){var m,S=_slicedToArray(f,3),D=S[0],M=S[1],j=S[2];if(!e.destroyed&&!e.commonObjs.has(D))switch(M){case"Font":var W=e._params;if("error"in j){var V=j.error;(0,_util.warn)("Error during font loading: ".concat(V)),e.commonObjs.resolve(D,V);break}var O=null;W.pdfBug&&(m=globalThis.FontInspector)!==null&&m!==void 0&&m.enabled&&(O={registerFont:function(k,L){globalThis.FontInspector.fontAdded(k,L)}});var w=new _font_loader.FontFaceObject(j,{isEvalSupported:W.isEvalSupported,disableFontFace:W.disableFontFace,ignoreErrors:W.ignoreErrors,onUnsupportedFeature:e._onUnsupportedFeature.bind(e),fontRegistry:O});e.fontLoader.bind(w).catch(function(x){return r.sendWithPromise("FontFallback",{id:D})}).finally(function(){!W.fontExtraProperties&&w.data&&(w.data=null),e.commonObjs.resolve(D,w)});break;case"FontPath":case"Image":e.commonObjs.resolve(D,j);break;default:throw new Error("Got unknown common object type ".concat(M))}}),r.on("obj",function(f){var m,S=_slicedToArray(f,4),D=S[0],M=S[1],j=S[2],W=S[3];if(!e.destroyed){var V=_classPrivateFieldGet(e,_pageCache).get(M);if(!V.objs.has(D))switch(j){case"Image":V.objs.resolve(D,W);var O=8e6;(W==null||(m=W.data)===null||m===void 0?void 0:m.length)>O&&(V.cleanupAfterRender=!0);break;case"Pattern":V.objs.resolve(D,W);break;default:throw new Error("Got unknown object type ".concat(j))}}}),r.on("DocProgress",function(f){var m;e.destroyed||(m=i.onProgress)===null||m===void 0||m.call(i,{loaded:f.loaded,total:f.total})}),r.on("DocStats",function(f){e.destroyed||_classPrivateFieldSet(e,_docStats,Object.freeze({streamTypes:Object.freeze(f.streamTypes),fontTypes:Object.freeze(f.fontTypes)}))}),r.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),r.on("FetchBuiltInCMap",function(f){return e.destroyed?Promise.reject(new Error("Worker was destroyed.")):e.CMapReaderFactory?e.CMapReaderFactory.fetch(f):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))}),r.on("FetchStandardFontData",function(f){return e.destroyed?Promise.reject(new Error("Worker was destroyed.")):e.StandardFontDataFactory?e.StandardFontDataFactory.fetch(f):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))})}},{key:"_onUnsupportedFeature",value:function(e){var r,i,f=e.featureId;this.destroyed||(r=(i=this.loadingTask).onUnsupportedFeature)===null||r===void 0||r.call(i,f)}},{key:"getData",value:function(){return this.messageHandler.sendWithPromise("GetData",null)}},{key:"getPage",value:function(e){var r=this;if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request"));var i=e-1,f=_classPrivateFieldGet(this,_pagePromises).get(i);if(f)return f;var m=this.messageHandler.sendWithPromise("GetPage",{pageIndex:i}).then(function(S){if(r.destroyed)throw new Error("Transport destroyed");var D=new PDFPageProxy(i,S,r,r._params.ownerDocument,r._params.pdfBug);return _classPrivateFieldGet(r,_pageCache).set(i,D),D});return _classPrivateFieldGet(this,_pagePromises).set(i,m),m}},{key:"getPageIndex",value:function(e){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:e})}},{key:"getAnnotations",value:function(e,r){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:r})}},{key:"saveDocument",value:function(){var e,r,i=this;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(e=(r=this._fullReader)===null||r===void 0?void 0:r.filename)!==null&&e!==void 0?e:null}).finally(function(){i.annotationStorage.resetModified()})}},{key:"getFieldObjects",value:function(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}},{key:"hasJSActions",value:function(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}},{key:"getCalculationOrderIds",value:function(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}},{key:"getDestinations",value:function(){return this.messageHandler.sendWithPromise("GetDestinations",null)}},{key:"getDestination",value:function(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}},{key:"getPageLabels",value:function(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}},{key:"getPageLayout",value:function(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}},{key:"getPageMode",value:function(){return this.messageHandler.sendWithPromise("GetPageMode",null)}},{key:"getViewerPreferences",value:function(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}},{key:"getOpenAction",value:function(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}},{key:"getAttachments",value:function(){return this.messageHandler.sendWithPromise("GetAttachments",null)}},{key:"getJavaScript",value:function(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}},{key:"getDocJSActions",value:function(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}},{key:"getPageJSActions",value:function(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}},{key:"getStructTree",value:function(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}},{key:"getOutline",value:function(){return this.messageHandler.sendWithPromise("GetOutline",null)}},{key:"getOptionalContentConfig",value:function(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(function(e){return new _optional_content_config.OptionalContentConfig(e)})}},{key:"getPermissions",value:function(){return this.messageHandler.sendWithPromise("GetPermissions",null)}},{key:"getMetadata",value:function(){var e=this;return _classPrivateFieldGet(this,_metadataPromise)||_classPrivateFieldSet(this,_metadataPromise,this.messageHandler.sendWithPromise("GetMetadata",null).then(function(r){var i,f,m,S;return{info:r[0],metadata:r[1]?new _metadata.Metadata(r[1]):null,contentDispositionFilename:(i=(f=e._fullReader)===null||f===void 0?void 0:f.filename)!==null&&i!==void 0?i:null,contentLength:(m=(S=e._fullReader)===null||S===void 0?void 0:S.contentLength)!==null&&m!==void 0?m:null}}))}},{key:"getMarkInfo",value:function(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}},{key:"startCleanup",value:function(){var n=_asyncToGenerator(_regenerator.default.mark(function r(){var i,f,m,S,D,M=arguments;return _regenerator.default.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return i=M.length>0&&M[0]!==void 0?M[0]:!1,W.next=3,this.messageHandler.sendWithPromise("Cleanup",null);case 3:if(!this.destroyed){W.next=5;break}return W.abrupt("return");case 5:f=_createForOfIteratorHelper(_classPrivateFieldGet(this,_pageCache).values()),W.prev=6,f.s();case 8:if((m=f.n()).done){W.next=15;break}if(S=m.value,D=S.cleanup(),D){W.next=13;break}throw new Error("startCleanup: Page ".concat(S.pageNumber," is currently rendering."));case 13:W.next=8;break;case 15:W.next=20;break;case 17:W.prev=17,W.t0=W.catch(6),f.e(W.t0);case 20:return W.prev=20,f.f(),W.finish(20);case 23:this.commonObjs.clear(),i||this.fontLoader.clear(),_classPrivateFieldSet(this,_metadataPromise,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null;case 28:case"end":return W.stop()}},r,this,[[6,17,20,23]])}));function e(){return n.apply(this,arguments)}return e}()},{key:"loadingParams",get:function(){var e=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e.disableAutoFetch,enableXfa:e.enableXfa})}}]),s}(),PDFObjects=function(){function s(){_classCallCheck(this,s),this._objs=Object.create(null)}return _createClass(s,[{key:"_ensureObj",value:function(e){return this._objs[e]?this._objs[e]:this._objs[e]={capability:(0,_util.createPromiseCapability)(),data:null,resolved:!1}}},{key:"get",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(r)return this._ensureObj(e).capability.promise.then(r),null;var i=this._objs[e];if(!i||!i.resolved)throw new Error("Requesting object that isn't resolved yet ".concat(e,"."));return i.data}},{key:"has",value:function(e){var r=this._objs[e];return(r==null?void 0:r.resolved)||!1}},{key:"resolve",value:function(e,r){var i=this._ensureObj(e);i.resolved=!0,i.data=r,i.capability.resolve(r)}},{key:"clear",value:function(){this._objs=Object.create(null)}}]),s}(),RenderTask=function(){function s(n){_classCallCheck(this,s),this._internalRenderTask=n,this.onContinue=null}return _createClass(s,[{key:"promise",get:function(){return this._internalRenderTask.capability.promise}},{key:"cancel",value:function(){this._internalRenderTask.cancel()}}]),s}();exports.RenderTask=RenderTask;var InternalRenderTask=function(){function s(n){var e=n.callback,r=n.params,i=n.objs,f=n.commonObjs,m=n.annotationCanvasMap,S=n.operatorList,D=n.pageIndex,M=n.canvasFactory,j=n.useRequestAnimationFrame,W=j===void 0?!1:j,V=n.pdfBug,O=V===void 0?!1:V;_classCallCheck(this,s),this.callback=e,this.params=r,this.objs=i,this.commonObjs=f,this.annotationCanvasMap=m,this.operatorListIdx=null,this.operatorList=S,this._pageIndex=D,this.canvasFactory=M,this._pdfBug=O,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=W===!0&&typeof window!="undefined",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=r.canvasContext.canvas}return _createClass(s,[{key:"completed",get:function(){return this.capability.promise.catch(function(){})}},{key:"initializeGraphics",value:function(e){var r,i=e.transparency,f=i===void 0?!1:i,m=e.optionalContentConfig;if(!this.cancelled){if(this._canvas){if(s.canvasInUse.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");s.canvasInUse.add(this._canvas)}this._pdfBug&&(r=globalThis.StepperManager)!==null&&r!==void 0&&r.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());var S=this.params,D=S.canvasContext,M=S.viewport,j=S.transform,W=S.imageLayer,V=S.background;this.gfx=new _canvas.CanvasGraphics(D,this.commonObjs,this.objs,this.canvasFactory,W,m,this.annotationCanvasMap),this.gfx.beginDrawing({transform:j,viewport:M,transparency:f,background:V}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}}},{key:"cancel",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&s.canvasInUse.delete(this._canvas),this.callback(e||new _display_utils.RenderingCancelledException("Rendering cancelled, page ".concat(this._pageIndex+1),"canvas"))}},{key:"operatorListChanged",value:function(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}},{key:"_continue",value:function(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}},{key:"_scheduleNext",value:function(){var e=this;this._useRequestAnimationFrame?window.requestAnimationFrame(function(){e._nextBound().catch(e._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}},{key:"_next",value:function(){var n=_asyncToGenerator(_regenerator.default.mark(function r(){return _regenerator.default.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!this.cancelled){f.next=2;break}return f.abrupt("return");case 2:this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&s.canvasInUse.delete(this._canvas),this.callback()));case 4:case"end":return f.stop()}},r,this)}));function e(){return n.apply(this,arguments)}return e}()}],[{key:"canvasInUse",get:function(){return(0,_util.shadow)(this,"canvasInUse",new WeakSet)}}]),s}(),version="2.12.313";exports.version=version;var build="a2ae56f39";exports.build=build},(s,n,e)=>{function r(c){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?r=function(C){return typeof C}:r=function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},r(c)}Object.defineProperty(n,"__esModule",{value:!0}),n.FontLoader=n.FontFaceObject=void 0;var i=m(e(2)),f=e(4);function m(c){return c&&c.__esModule?c:{default:c}}function S(c,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(b&&b.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),b&&D(c,b)}function D(c,b){return D=Object.setPrototypeOf||function(G,I){return G.__proto__=I,G},D(c,b)}function M(c){var b=V();return function(){var G=O(c),I;if(b){var $=O(this).constructor;I=Reflect.construct(G,arguments,$)}else I=G.apply(this,arguments);return j(this,I)}}function j(c,b){if(b&&(r(b)==="object"||typeof b=="function"))return b;if(b!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return W(c)}function W(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function V(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function O(c){return O=Object.setPrototypeOf?Object.getPrototypeOf:function(C){return C.__proto__||Object.getPrototypeOf(C)},O(c)}function w(c,b,C,G,I,$,ee){try{var Z=c[$](ee),ie=Z.value}catch(H){C(H);return}Z.done?b(ie):Promise.resolve(ie).then(G,I)}function x(c){return function(){var b=this,C=arguments;return new Promise(function(G,I){var $=c.apply(b,C);function ee(ie){w($,G,I,ee,Z,"next",ie)}function Z(ie){w($,G,I,ee,Z,"throw",ie)}ee(void 0)})}}function k(c,b){var C=typeof Symbol!="undefined"&&c[Symbol.iterator]||c["@@iterator"];if(!C){if(Array.isArray(c)||(C=L(c))||b&&c&&typeof c.length=="number"){C&&(c=C);var G=0,I=function(){};return{s:I,n:function(){return G>=c.length?{done:!0}:{done:!1,value:c[G++]}},e:function(H){throw H},f:I}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var $=!0,ee=!1,Z;return{s:function(){C=C.call(c)},n:function(){var H=C.next();return $=H.done,H},e:function(H){ee=!0,Z=H},f:function(){try{!$&&C.return!=null&&C.return()}finally{if(ee)throw Z}}}}function L(c,b){if(!!c){if(typeof c=="string")return _(c,b);var C=Object.prototype.toString.call(c).slice(8,-1);if(C==="Object"&&c.constructor&&(C=c.constructor.name),C==="Map"||C==="Set")return Array.from(c);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return _(c,b)}}function _(c,b){(b==null||b>c.length)&&(b=c.length);for(var C=0,G=new Array(b);C<b;C++)G[C]=c[C];return G}function B(c,b){if(!(c instanceof b))throw new TypeError("Cannot call a class as a function")}function h(c,b){for(var C=0;C<b.length;C++){var G=b[C];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(c,G.key,G)}}function l(c,b,C){return b&&h(c.prototype,b),C&&h(c,C),c}var u=function(){function c(b){var C=b.docId,G=b.onUnsupportedFeature,I=b.ownerDocument,$=I===void 0?globalThis.document:I;b.styleElement,B(this,c),this.constructor===c&&(0,f.unreachable)("Cannot initialize BaseFontLoader."),this.docId=C,this._onUnsupportedFeature=G,this._document=$,this.nativeFontFaces=[],this.styleElement=null}return l(c,[{key:"addNativeFontFace",value:function(C){this.nativeFontFaces.push(C),this._document.fonts.add(C)}},{key:"insertRule",value:function(C){var G=this.styleElement;G||(G=this.styleElement=this._document.createElement("style"),G.id="PDFJS_FONT_STYLE_TAG_".concat(this.docId),this._document.documentElement.getElementsByTagName("head")[0].appendChild(G));var I=G.sheet;I.insertRule(C,I.cssRules.length)}},{key:"clear",value:function(){var C=k(this.nativeFontFaces),G;try{for(C.s();!(G=C.n()).done;){var I=G.value;this._document.fonts.delete(I)}}catch($){C.e($)}finally{C.f()}this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}},{key:"bind",value:function(){var b=x(i.default.mark(function G(I){var $=this,ee,Z;return i.default.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(!(I.attached||I.missingFile)){H.next=2;break}return H.abrupt("return");case 2:if(I.attached=!0,!this.isFontLoadingAPISupported){H.next=19;break}if(ee=I.createNativeFontFace(),!ee){H.next=18;break}return this.addNativeFontFace(ee),H.prev=7,H.next=10,ee.loaded;case 10:H.next=18;break;case 12:throw H.prev=12,H.t0=H.catch(7),this._onUnsupportedFeature({featureId:f.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,f.warn)("Failed to load font '".concat(ee.family,"': '").concat(H.t0,"'.")),I.disableFontFace=!0,H.t0;case 18:return H.abrupt("return");case 19:if(Z=I.createFontFaceRule(),!Z){H.next=26;break}if(this.insertRule(Z),!this.isSyncFontLoadingSupported){H.next=24;break}return H.abrupt("return");case 24:return H.next=26,new Promise(function(X){var P=$._queueLoadingCallback(X);$._prepareFontLoadEvent([Z],[I],P)});case 26:case"end":return H.stop()}},G,this,[[7,12]])}));function C(G){return b.apply(this,arguments)}return C}()},{key:"_queueLoadingCallback",value:function(C){(0,f.unreachable)("Abstract method `_queueLoadingCallback`.")}},{key:"isFontLoadingAPISupported",get:function(){var C,G=!!((C=this._document)!==null&&C!==void 0&&C.fonts);return(0,f.shadow)(this,"isFontLoadingAPISupported",G)}},{key:"isSyncFontLoadingSupported",get:function(){(0,f.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}},{key:"_loadTestFont",get:function(){(0,f.unreachable)("Abstract method `_loadTestFont`.")}},{key:"_prepareFontLoadEvent",value:function(C,G,I){(0,f.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}]),c}(),y;n.FontLoader=y,n.FontLoader=y=function(c){S(C,c);var b=M(C);function C(G){var I;return B(this,C),I=b.call(this,G),I.loadingContext={requests:[],nextRequestId:0},I.loadTestFontId=0,I}return l(C,[{key:"isSyncFontLoadingSupported",get:function(){var I=!1;if(typeof navigator=="undefined")I=!0;else{var $=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);($==null?void 0:$[1])>=14&&(I=!0)}return(0,f.shadow)(this,"isSyncFontLoadingSupported",I)}},{key:"_queueLoadingCallback",value:function(I){function $(){for((0,f.assert)(!Z.done,"completeRequest() cannot be called twice."),Z.done=!0;ee.requests.length>0&&ee.requests[0].done;){var ie=ee.requests.shift();setTimeout(ie.callback,0)}}var ee=this.loadingContext,Z={id:"pdfjs-font-loading-".concat(ee.nextRequestId++),done:!1,complete:$,callback:I};return ee.requests.push(Z),Z}},{key:"_loadTestFont",get:function(){var I=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,f.shadow)(this,"_loadTestFont",I())}},{key:"_prepareFontLoadEvent",value:function(I,$,ee){function Z(pe,Ae){return pe.charCodeAt(Ae)<<24|pe.charCodeAt(Ae+1)<<16|pe.charCodeAt(Ae+2)<<8|pe.charCodeAt(Ae+3)&255}function ie(pe,Ae,Te,Ee){var Fe=pe.substring(0,Ae),Ie=pe.substring(Ae+Te);return Fe+Ee+Ie}var H,X,P=this._document.createElement("canvas");P.width=1,P.height=1;var v=P.getContext("2d"),A=0;function E(pe,Ae){if(A++,A>30){(0,f.warn)("Load test font never loaded."),Ae();return}v.font="30px "+pe,v.fillText(".",0,20);var Te=v.getImageData(0,0,1,1);if(Te.data[3]>0){Ae();return}setTimeout(E.bind(null,pe,Ae))}var q="lt".concat(Date.now()).concat(this.loadTestFontId++),re=this._loadTestFont,Y=976;re=ie(re,Y,q.length,q);var be=16,ke=1482184792,we=Z(re,be);for(H=0,X=q.length-3;H<X;H+=4)we=we-ke+Z(q,H)|0;H<q.length&&(we=we-ke+Z(q+"XXX",H)|0),re=ie(re,be,4,(0,f.string32)(we));var z="url(data:font/opentype;base64,".concat(btoa(re),");"),R='@font-face {font-family:"'.concat(q,'";src:').concat(z,"}");this.insertRule(R);var d=[],o=k($),g;try{for(o.s();!(g=o.n()).done;){var F=g.value;d.push(F.loadedName)}}catch(pe){o.e(pe)}finally{o.f()}d.push(q);var N=this._document.createElement("div");N.style.visibility="hidden",N.style.width=N.style.height="10px",N.style.position="absolute",N.style.top=N.style.left="0px";for(var J=0,le=d;J<le.length;J++){var ve=le[J],ye=this._document.createElement("span");ye.textContent="Hi",ye.style.fontFamily=ve,N.appendChild(ye)}this._document.body.appendChild(N),E(q,function(){N.remove(),ee.complete()})}}]),C}(u);var p=function(){function c(b,C){var G=C.isEvalSupported,I=G===void 0?!0:G,$=C.disableFontFace,ee=$===void 0?!1:$,Z=C.ignoreErrors,ie=Z===void 0?!1:Z,H=C.onUnsupportedFeature,X=C.fontRegistry,P=X===void 0?null:X;B(this,c),this.compiledGlyphs=Object.create(null);for(var v in b)this[v]=b[v];this.isEvalSupported=I!==!1,this.disableFontFace=ee===!0,this.ignoreErrors=ie===!0,this._onUnsupportedFeature=H,this.fontRegistry=P}return l(c,[{key:"createNativeFontFace",value:function(){if(!this.data||this.disableFontFace)return null;var C;if(!this.cssFontInfo)C=new FontFace(this.loadedName,this.data,{});else{var G={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(G.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),C=new FontFace(this.cssFontInfo.fontFamily,this.data,G)}return this.fontRegistry&&this.fontRegistry.registerFont(this),C}},{key:"createFontFaceRule",value:function(){if(!this.data||this.disableFontFace)return null;var C=(0,f.bytesToString)(this.data),G="url(data:".concat(this.mimetype,";base64,").concat(btoa(C),");"),I;if(!this.cssFontInfo)I='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(G,"}");else{var $="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&($+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),I='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat($,"src:").concat(G,"}")}return this.fontRegistry&&this.fontRegistry.registerFont(this,G),I}},{key:"getPathGenerator",value:function(C,G){if(this.compiledGlyphs[G]!==void 0)return this.compiledGlyphs[G];var I;try{I=C.get(this.loadedName+"_path_"+G)}catch(X){if(!this.ignoreErrors)throw X;return this._onUnsupportedFeature({featureId:f.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,f.warn)('getPathGenerator - ignoring character: "'.concat(X,'".')),this.compiledGlyphs[G]=function(P,v){}}if(this.isEvalSupported&&f.IsEvalSupportedCached.value){var $=[],ee=k(I),Z;try{for(ee.s();!(Z=ee.n()).done;){var ie=Z.value,H=ie.args!==void 0?ie.args.join(","):"";$.push("c.",ie.cmd,"(",H,`);
`)}}catch(X){ee.e(X)}finally{ee.f()}return this.compiledGlyphs[G]=new Function("c","size",$.join(""))}return this.compiledGlyphs[G]=function(X,P){var v=k(I),A;try{for(v.s();!(A=v.n()).done;){var E=A.value;E.cmd==="scale"&&(E.args=[P,-P]),X[E.cmd].apply(X,E.args)}}catch(q){v.e(q)}finally{v.f()}}}}]),c}();n.FontFaceObject=p},(s,n,e)=>{function r(l){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?r=function(y){return typeof y}:r=function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},r(l)}Object.defineProperty(n,"__esModule",{value:!0}),n.NodeStandardFontDataFactory=n.NodeCanvasFactory=n.NodeCMapReaderFactory=void 0;var i=e(135),f=e(6),m=e(4);function S(l,u){for(var y=0;y<u.length;y++){var p=u[y];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(l,p.key,p)}}function D(l,u,y){return u&&S(l.prototype,u),y&&S(l,y),l}function M(l,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(u&&u.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),u&&j(l,u)}function j(l,u){return j=Object.setPrototypeOf||function(p,c){return p.__proto__=c,p},j(l,u)}function W(l){var u=w();return function(){var p=x(l),c;if(u){var b=x(this).constructor;c=Reflect.construct(p,arguments,b)}else c=p.apply(this,arguments);return V(this,c)}}function V(l,u){if(u&&(r(u)==="object"||typeof u=="function"))return u;if(u!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O(l)}function O(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function w(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function x(l){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(y){return y.__proto__||Object.getPrototypeOf(y)},x(l)}function k(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}var L=function l(){k(this,l),(0,m.unreachable)("Not implemented: NodeCanvasFactory")};n.NodeCanvasFactory=L;var _=function l(){k(this,l),(0,m.unreachable)("Not implemented: NodeCMapReaderFactory")};n.NodeCMapReaderFactory=_;var B=function l(){k(this,l),(0,m.unreachable)("Not implemented: NodeStandardFontDataFactory")};if(n.NodeStandardFontDataFactory=B,f.isNodeJS){var h=function(u){return new Promise(function(y,p){var c=require$$2;c.readFile(u,function(b,C){if(b||!C){p(new Error(b));return}y(new Uint8Array(C))})})};n.NodeCanvasFactory=L=function(l){M(y,l);var u=W(y);function y(){return k(this,y),u.apply(this,arguments)}return D(y,[{key:"_createCanvas",value:function(c,b){var C=require$$2;return C.createCanvas(c,b)}}]),y}(i.BaseCanvasFactory),n.NodeCMapReaderFactory=_=function(l){M(y,l);var u=W(y);function y(){return k(this,y),u.apply(this,arguments)}return D(y,[{key:"_fetchData",value:function(c,b){return h(c).then(function(C){return{cMapData:C,compressionType:b}})}}]),y}(i.BaseCMapReaderFactory),n.NodeStandardFontDataFactory=B=function(l){M(y,l);var u=W(y);function y(){return k(this,y),u.apply(this,arguments)}return D(y,[{key:"_fetchData",value:function(c){return h(c)}}]),y}(i.BaseStandardFontDataFactory)}},(s,n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.AnnotationStorage=void 0;var r=e(4);function i(w,x){return M(w)||D(w,x)||m(w,x)||f()}function f(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m(w,x){if(!!w){if(typeof w=="string")return S(w,x);var k=Object.prototype.toString.call(w).slice(8,-1);if(k==="Object"&&w.constructor&&(k=w.constructor.name),k==="Map"||k==="Set")return Array.from(w);if(k==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k))return S(w,x)}}function S(w,x){(x==null||x>w.length)&&(x=w.length);for(var k=0,L=new Array(x);k<x;k++)L[k]=w[k];return L}function D(w,x){var k=w==null?null:typeof Symbol!="undefined"&&w[Symbol.iterator]||w["@@iterator"];if(k!=null){var L=[],_=!0,B=!1,h,l;try{for(k=k.call(w);!(_=(h=k.next()).done)&&(L.push(h.value),!(x&&L.length===x));_=!0);}catch(u){B=!0,l=u}finally{try{!_&&k.return!=null&&k.return()}finally{if(B)throw l}}return L}}function M(w){if(Array.isArray(w))return w}function j(w,x){if(!(w instanceof x))throw new TypeError("Cannot call a class as a function")}function W(w,x){for(var k=0;k<x.length;k++){var L=x[k];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(w,L.key,L)}}function V(w,x,k){return x&&W(w.prototype,x),k&&W(w,k),w}var O=function(){function w(){j(this,w),this._storage=new Map,this._timeStamp=Date.now(),this._modified=!1,this.onSetModified=null,this.onResetModified=null}return V(w,[{key:"getValue",value:function(k,L){var _=this._storage.get(k);return _===void 0?L:Object.assign(L,_)}},{key:"setValue",value:function(k,L){var _=this._storage.get(k),B=!1;if(_!==void 0)for(var h=0,l=Object.entries(L);h<l.length;h++){var u=i(l[h],2),y=u[0],p=u[1];_[y]!==p&&(B=!0,_[y]=p)}else B=!0,this._storage.set(k,L);B&&(this._timeStamp=Date.now(),this._setModified())}},{key:"getAll",value:function(){return this._storage.size>0?(0,r.objectFromMap)(this._storage):null}},{key:"size",get:function(){return this._storage.size}},{key:"_setModified",value:function(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())}},{key:"resetModified",value:function(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}},{key:"serializable",get:function(){return this._storage.size>0?this._storage:null}},{key:"lastModified",get:function(){return this._timeStamp.toString()}}]),w}();n.AnnotationStorage=O},(s,n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CanvasGraphics=void 0;var r=e(4),i=e(141),f=e(1);function m(z){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?m=function(d){return typeof d}:m=function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},m(z)}function S(z,R){var d=typeof Symbol!="undefined"&&z[Symbol.iterator]||z["@@iterator"];if(!d){if(Array.isArray(z)||(d=O(z))||R&&z&&typeof z.length=="number"){d&&(z=d);var o=0,g=function(){};return{s:g,n:function(){return o>=z.length?{done:!0}:{done:!1,value:z[o++]}},e:function(ve){throw ve},f:g}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var F=!0,N=!1,J;return{s:function(){d=d.call(z)},n:function(){var ve=d.next();return F=ve.done,ve},e:function(ve){N=!0,J=ve},f:function(){try{!F&&d.return!=null&&d.return()}finally{if(N)throw J}}}}function D(z,R){if(!(z instanceof R))throw new TypeError("Cannot call a class as a function")}function M(z,R){for(var d=0;d<R.length;d++){var o=R[d];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(z,o.key,o)}}function j(z,R,d){return R&&M(z.prototype,R),d&&M(z,d),z}function W(z,R){return k(z)||x(z,R)||O(z,R)||V()}function V(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O(z,R){if(!!z){if(typeof z=="string")return w(z,R);var d=Object.prototype.toString.call(z).slice(8,-1);if(d==="Object"&&z.constructor&&(d=z.constructor.name),d==="Map"||d==="Set")return Array.from(z);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return w(z,R)}}function w(z,R){(R==null||R>z.length)&&(R=z.length);for(var d=0,o=new Array(R);d<R;d++)o[d]=z[d];return o}function x(z,R){var d=z==null?null:typeof Symbol!="undefined"&&z[Symbol.iterator]||z["@@iterator"];if(d!=null){var o=[],g=!0,F=!1,N,J;try{for(d=d.call(z);!(g=(N=d.next()).done)&&(o.push(N.value),!(R&&o.length===R));g=!0);}catch(le){F=!0,J=le}finally{try{!g&&d.return!=null&&d.return()}finally{if(F)throw J}}return o}}function k(z){if(Array.isArray(z))return z}var L=16,_=100,B=4096,h=15,l=10,u=1e3,y=16,p=1.000001;function c(z,R){if(z._removeMirroring)throw new Error("Context is already forwarding operations.");z.__originalSave=z.save,z.__originalRestore=z.restore,z.__originalRotate=z.rotate,z.__originalScale=z.scale,z.__originalTranslate=z.translate,z.__originalTransform=z.transform,z.__originalSetTransform=z.setTransform,z.__originalResetTransform=z.resetTransform,z.__originalClip=z.clip,z.__originalMoveTo=z.moveTo,z.__originalLineTo=z.lineTo,z.__originalBezierCurveTo=z.bezierCurveTo,z.__originalRect=z.rect,z.__originalClosePath=z.closePath,z.__originalBeginPath=z.beginPath,z._removeMirroring=function(){z.save=z.__originalSave,z.restore=z.__originalRestore,z.rotate=z.__originalRotate,z.scale=z.__originalScale,z.translate=z.__originalTranslate,z.transform=z.__originalTransform,z.setTransform=z.__originalSetTransform,z.resetTransform=z.__originalResetTransform,z.clip=z.__originalClip,z.moveTo=z.__originalMoveTo,z.lineTo=z.__originalLineTo,z.bezierCurveTo=z.__originalBezierCurveTo,z.rect=z.__originalRect,z.closePath=z.__originalClosePath,z.beginPath=z.__originalBeginPath,delete z._removeMirroring},z.save=function(){R.save(),this.__originalSave()},z.restore=function(){R.restore(),this.__originalRestore()},z.translate=function(o,g){R.translate(o,g),this.__originalTranslate(o,g)},z.scale=function(o,g){R.scale(o,g),this.__originalScale(o,g)},z.transform=function(o,g,F,N,J,le){R.transform(o,g,F,N,J,le),this.__originalTransform(o,g,F,N,J,le)},z.setTransform=function(o,g,F,N,J,le){R.setTransform(o,g,F,N,J,le),this.__originalSetTransform(o,g,F,N,J,le)},z.resetTransform=function(){R.resetTransform(),this.__originalResetTransform()},z.rotate=function(o){R.rotate(o),this.__originalRotate(o)},z.clip=function(o){R.clip(o),this.__originalClip(o)},z.moveTo=function(d,o){R.moveTo(d,o),this.__originalMoveTo(d,o)},z.lineTo=function(d,o){R.lineTo(d,o),this.__originalLineTo(d,o)},z.bezierCurveTo=function(d,o,g,F,N,J){R.bezierCurveTo(d,o,g,F,N,J),this.__originalBezierCurveTo(d,o,g,F,N,J)},z.rect=function(d,o,g,F){R.rect(d,o,g,F),this.__originalRect(d,o,g,F)},z.closePath=function(){R.closePath(),this.__originalClosePath()},z.beginPath=function(){R.beginPath(),this.__originalBeginPath()}}function b(z){if(!z.mozCurrentTransform){z._originalSave=z.save,z._originalRestore=z.restore,z._originalRotate=z.rotate,z._originalScale=z.scale,z._originalTranslate=z.translate,z._originalTransform=z.transform,z._originalSetTransform=z.setTransform,z._originalResetTransform=z.resetTransform,z._transformMatrix=z._transformMatrix||[1,0,0,1,0,0],z._transformStack=[];try{var R=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(z),"lineWidth");z._setLineWidth=R.set,z._getLineWidth=R.get,Object.defineProperty(z,"lineWidth",{set:function(o){this._setLineWidth(o*p)},get:function(){return this._getLineWidth()}})}catch{}Object.defineProperty(z,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(z,"mozCurrentTransformInverse",{get:function(){var o=W(this._transformMatrix,6),g=o[0],F=o[1],N=o[2],J=o[3],le=o[4],ve=o[5],ye=g*J-F*N,pe=F*N-g*J;return[J/ye,F/pe,N/pe,g/ye,(J*le-N*ve)/pe,(F*le-g*ve)/ye]}}),z.save=function(){var o=this._transformMatrix;this._transformStack.push(o),this._transformMatrix=o.slice(0,6),this._originalSave()},z.restore=function(){var o=this._transformStack.pop();o&&(this._transformMatrix=o,this._originalRestore())},z.translate=function(o,g){var F=this._transformMatrix;F[4]=F[0]*o+F[2]*g+F[4],F[5]=F[1]*o+F[3]*g+F[5],this._originalTranslate(o,g)},z.scale=function(o,g){var F=this._transformMatrix;F[0]*=o,F[1]*=o,F[2]*=g,F[3]*=g,this._originalScale(o,g)},z.transform=function(o,g,F,N,J,le){var ve=this._transformMatrix;this._transformMatrix=[ve[0]*o+ve[2]*g,ve[1]*o+ve[3]*g,ve[0]*F+ve[2]*N,ve[1]*F+ve[3]*N,ve[0]*J+ve[2]*le+ve[4],ve[1]*J+ve[3]*le+ve[5]],z._originalTransform(o,g,F,N,J,le)},z.setTransform=function(o,g,F,N,J,le){this._transformMatrix=[o,g,F,N,J,le],z._originalSetTransform(o,g,F,N,J,le)},z.resetTransform=function(){this._transformMatrix=[1,0,0,1,0,0],z._originalResetTransform()},z.rotate=function(o){var g=Math.cos(o),F=Math.sin(o),N=this._transformMatrix;this._transformMatrix=[N[0]*g+N[2]*F,N[1]*g+N[3]*F,N[0]*-F+N[2]*g,N[1]*-F+N[3]*g,N[4],N[5]],this._originalRotate(o)}}}var C=function(){function z(R){D(this,z),this.canvasFactory=R,this.cache=Object.create(null)}return j(z,[{key:"getCanvas",value:function(d,o,g,F){var N;return this.cache[d]!==void 0?(N=this.cache[d],this.canvasFactory.reset(N,o,g),N.context.setTransform(1,0,0,1,0,0)):(N=this.canvasFactory.create(o,g),this.cache[d]=N),F&&b(N.context),N}},{key:"clear",value:function(){for(var d in this.cache){var o=this.cache[d];this.canvasFactory.destroy(o),delete this.cache[d]}}}]),z}();function G(z){var R=1e3,d=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),o=z.width,g=z.height,F=o+1,N,J,le,ve,ye=new Uint8Array(F*(g+1)),pe=o+7&-8,Ae=z.data,Te=new Uint8Array(pe*g),Ee=0;for(N=0,J=Ae.length;N<J;N++)for(var Fe=Ae[N],Ie=128;Ie>0;)Te[Ee++]=Fe&Ie?0:255,Ie>>=1;var We=0;for(Ee=0,Te[Ee]!==0&&(ye[0]=1,++We),le=1;le<o;le++)Te[Ee]!==Te[Ee+1]&&(ye[le]=Te[Ee]?2:1,++We),Ee++;for(Te[Ee]!==0&&(ye[le]=2,++We),N=1;N<g;N++){Ee=N*pe,ve=N*F,Te[Ee-pe]!==Te[Ee]&&(ye[ve]=Te[Ee]?1:8,++We);var je=(Te[Ee]?4:0)+(Te[Ee-pe]?8:0);for(le=1;le<o;le++)je=(je>>2)+(Te[Ee+1]?4:0)+(Te[Ee-pe+1]?8:0),d[je]&&(ye[ve+le]=d[je],++We),Ee++;if(Te[Ee-pe]!==Te[Ee]&&(ye[ve+le]=Te[Ee]?2:4,++We),We>R)return null}for(Ee=pe*(g-1),ve=N*F,Te[Ee]!==0&&(ye[ve]=8,++We),le=1;le<o;le++)Te[Ee]!==Te[Ee+1]&&(ye[ve+le]=Te[Ee]?4:8,++We),Ee++;if(Te[Ee]!==0&&(ye[ve+le]=4,++We),We>R)return null;var fe=new Int32Array([0,F,-1,0,-F,0,0,0,1]),de=[];for(N=0;We&&N<=g;N++){for(var U=N*F,te=U+o;U<te&&!ye[U];)U++;if(U!==te){var K=[U%F,N],oe=U,ne=ye[U];do{var Q=fe[ne];do U+=Q;while(!ye[U]);var he=ye[U];he!==5&&he!==10?(ne=he,ye[U]=0):(ne=he&51*ne>>4,ye[U]&=ne>>2|ne<<2),K.push(U%F,U/F|0),ye[U]||--We}while(oe!==U);de.push(K),--N}}var ce=function(Re){Re.save(),Re.scale(1/o,-1/g),Re.translate(0,-g),Re.beginPath();for(var De=0,Le=de.length;De<Le;De++){var _e=de[De];Re.moveTo(_e[0],_e[1]);for(var Ge=2,Oe=_e.length;Ge<Oe;Ge+=2)Re.lineTo(_e[Ge],_e[Ge+1])}Re.fill(),Re.beginPath(),Re.restore()};return ce}var I=function(){function z(R,d){D(this,z),this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=r.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=r.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,R,d])}return j(z,[{key:"clone",value:function(){var d=Object.create(this);return d.clipBox=this.clipBox.slice(),d}},{key:"setCurrentPoint",value:function(d,o){this.x=d,this.y=o}},{key:"updatePathMinMax",value:function(d,o,g){var F=r.Util.applyTransform([o,g],d),N=W(F,2);o=N[0],g=N[1],this.minX=Math.min(this.minX,o),this.minY=Math.min(this.minY,g),this.maxX=Math.max(this.maxX,o),this.maxY=Math.max(this.maxY,g)}},{key:"updateCurvePathMinMax",value:function(d,o,g,F,N,J,le,ve,ye){var pe=r.Util.bezierBoundingBox(o,g,F,N,J,le,ve,ye);this.updatePathMinMax(d,pe[0],pe[1]),this.updatePathMinMax(d,pe[2],pe[3])}},{key:"getPathBoundingBox",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:i.PathType.FILL,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,g=[this.minX,this.minY,this.maxX,this.maxY];if(d===i.PathType.STROKE){o||(0,r.unreachable)("Stroke bounding box must include transform.");var F=r.Util.singularValueDecompose2dScale(o),N=F[0]*this.lineWidth/2,J=F[1]*this.lineWidth/2;g[0]-=N,g[1]-=J,g[2]+=N,g[3]+=J}return g}},{key:"updateClipFromPath",value:function(){var d=r.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(d||[0,0,0,0])}},{key:"startNewPathAndClipBox",value:function(d){this.clipBox=d,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}},{key:"getClippedPathBoundingBox",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:i.PathType.FILL,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return r.Util.intersect(this.clipBox,this.getPathBoundingBox(d,o))}}]),z}();function $(z,R){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(typeof ImageData!="undefined"&&R instanceof ImageData){z.putImageData(R,0,0);return}var o=R.height,g=R.width,F=o%y,N=(o-F)/y,J=F===0?N:N+1,le=z.createImageData(g,y),ve=0,ye,pe=R.data,Ae=le.data,Te,Ee,Fe,Ie,We,je,fe,de;if(d)switch(d.length){case 1:We=d[0],je=d[0],fe=d[0],de=d[0];break;case 4:We=d[0],je=d[1],fe=d[2],de=d[3];break}if(R.kind===r.ImageKind.GRAYSCALE_1BPP){var U=pe.byteLength,te=new Uint32Array(Ae.buffer,0,Ae.byteLength>>2),K=te.length,oe=g+7>>3,ne=4294967295,Q=r.IsLittleEndianCached.value?4278190080:255;if(de&&de[0]===255&&de[255]===0){var he=[Q,ne];ne=he[0],Q=he[1]}for(Te=0;Te<J;Te++){for(Fe=Te<N?y:F,ye=0,Ee=0;Ee<Fe;Ee++){for(var ce=U-ve,Se=0,Re=ce>oe?g:ce*8-7,De=Re&-8,Le=0,_e=0;Se<De;Se+=8)_e=pe[ve++],te[ye++]=_e&128?ne:Q,te[ye++]=_e&64?ne:Q,te[ye++]=_e&32?ne:Q,te[ye++]=_e&16?ne:Q,te[ye++]=_e&8?ne:Q,te[ye++]=_e&4?ne:Q,te[ye++]=_e&2?ne:Q,te[ye++]=_e&1?ne:Q;for(;Se<Re;Se++)Le===0&&(_e=pe[ve++],Le=128),te[ye++]=_e&Le?ne:Q,Le>>=1}for(;ye<K;)te[ye++]=0;z.putImageData(le,0,Te*y)}}else if(R.kind===r.ImageKind.RGBA_32BPP){var Ge=!!(We||je||fe);for(Ee=0,Ie=g*y*4,Te=0;Te<N;Te++){if(Ae.set(pe.subarray(ve,ve+Ie)),ve+=Ie,Ge)for(var Oe=0;Oe<Ie;Oe+=4)We&&(Ae[Oe+0]=We[Ae[Oe+0]]),je&&(Ae[Oe+1]=je[Ae[Oe+1]]),fe&&(Ae[Oe+2]=fe[Ae[Oe+2]]);z.putImageData(le,0,Ee),Ee+=y}if(Te<J){if(Ie=g*F*4,Ae.set(pe.subarray(ve,ve+Ie)),Ge)for(var xe=0;xe<Ie;xe+=4)We&&(Ae[xe+0]=We[Ae[xe+0]]),je&&(Ae[xe+1]=je[Ae[xe+1]]),fe&&(Ae[xe+2]=fe[Ae[xe+2]]);z.putImageData(le,0,Ee)}}else if(R.kind===r.ImageKind.RGB_24BPP){var Be=!!(We||je||fe);for(Fe=y,Ie=g*Fe,Te=0;Te<J;Te++){for(Te>=N&&(Fe=F,Ie=g*Fe),ye=0,Ee=Ie;Ee--;)Ae[ye++]=pe[ve++],Ae[ye++]=pe[ve++],Ae[ye++]=pe[ve++],Ae[ye++]=255;if(Be)for(var Ne=0;Ne<ye;Ne+=4)We&&(Ae[Ne+0]=We[Ae[Ne+0]]),je&&(Ae[Ne+1]=je[Ae[Ne+1]]),fe&&(Ae[Ne+2]=fe[Ae[Ne+2]]);z.putImageData(le,0,Te*y)}}else throw new Error("bad image kind: ".concat(R.kind))}function ee(z,R){for(var d=R.height,o=R.width,g=d%y,F=(d-g)/y,N=g===0?F:F+1,J=z.createImageData(o,y),le=0,ve=R.data,ye=J.data,pe=0;pe<N;pe++){for(var Ae=pe<F?y:g,Te=3,Ee=0;Ee<Ae;Ee++)for(var Fe=void 0,Ie=0,We=0;We<o;We++)Ie||(Fe=ve[le++],Ie=128),ye[Te]=Fe&Ie?0:255,Te+=4,Ie>>=1;z.putImageData(J,0,pe*y)}}function Z(z,R){for(var d=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"],o=0,g=d.length;o<g;o++){var F=d[o];z[F]!==void 0&&(R[F]=z[F])}z.setLineDash!==void 0&&(R.setLineDash(z.getLineDash()),R.lineDashOffset=z.lineDashOffset)}function ie(z){z.strokeStyle="#000000",z.fillStyle="#000000",z.fillRule="nonzero",z.globalAlpha=1,z.lineWidth=1,z.lineCap="butt",z.lineJoin="miter",z.miterLimit=10,z.globalCompositeOperation="source-over",z.font="10px sans-serif",z.setLineDash!==void 0&&(z.setLineDash([]),z.lineDashOffset=0)}function H(z,R,d,o){for(var g=z.length,F=3;F<g;F+=4){var N=z[F];if(N===0)z[F-3]=R,z[F-2]=d,z[F-1]=o;else if(N<255){var J=255-N;z[F-3]=z[F-3]*N+R*J>>8,z[F-2]=z[F-2]*N+d*J>>8,z[F-1]=z[F-1]*N+o*J>>8}}}function X(z,R,d){for(var o=z.length,g=1/255,F=3;F<o;F+=4){var N=d?d[z[F]]:z[F];R[F]=R[F]*N*g|0}}function P(z,R,d){for(var o=z.length,g=3;g<o;g+=4){var F=z[g-3]*77+z[g-2]*152+z[g-1]*28;R[g]=d?R[g]*d[F>>8]>>8:R[g]*F>>16}}function v(z,R,d,o,g,F,N,J,le,ve,ye){var pe=!!F,Ae=pe?F[0]:0,Te=pe?F[1]:0,Ee=pe?F[2]:0,Fe;g==="Luminosity"?Fe=P:Fe=X;for(var Ie=1048576,We=Math.min(o,Math.ceil(Ie/d)),je=0;je<o;je+=We){var fe=Math.min(We,o-je),de=z.getImageData(J-ve,je+(le-ye),d,fe),U=R.getImageData(J,je+le,d,fe);pe&&H(de.data,Ae,Te,Ee),Fe(de.data,U.data,N),R.putImageData(U,J,je+le)}}function A(z,R,d,o){var g=o[0],F=o[1],N=o[2]-g,J=o[3]-F;N===0||J===0||(v(R.context,d,N,J,R.subtype,R.backdrop,R.transferMap,g,F,R.offsetX,R.offsetY),z.save(),z.globalAlpha=1,z.globalCompositeOperation="source-over",z.setTransform(1,0,0,1,0,0),z.drawImage(d.canvas,0,0),z.restore())}function E(z,R){var d=r.Util.singularValueDecompose2dScale(z);d[0]=Math.fround(d[0]),d[1]=Math.fround(d[1]);var o=Math.fround((globalThis.devicePixelRatio||1)*f.PixelsPerInch.PDF_TO_CSS_UNITS);return R!==void 0?R:d[0]<=o||d[1]<=o}var q=["butt","round","square"],re=["miter","round","bevel"],Y={},be={},ke=function(){function z(R,d,o,g,F,N,J){D(this,z),this.ctx=R,this.current=new I(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=d,this.objs=o,this.canvasFactory=g,this.imageLayer=F,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=N,this.cachedCanvases=new C(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=J,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,R&&b(R),this._cachedGetSinglePixelWidth=null}return j(z,[{key:"beginDrawing",value:function(d){var o=d.transform,g=d.viewport,F=d.transparency,N=F===void 0?!1:F,J=d.background,le=J===void 0?null:J,ve=this.ctx.canvas.width,ye=this.ctx.canvas.height;if(this.ctx.save(),this.ctx.fillStyle=le||"rgb(255, 255, 255)",this.ctx.fillRect(0,0,ve,ye),this.ctx.restore(),N){var pe=this.cachedCanvases.getCanvas("transparent",ve,ye,!0);this.compositeCtx=this.ctx,this.transparentCanvas=pe.canvas,this.ctx=pe.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),ie(this.ctx),o&&(this.ctx.transform.apply(this.ctx,o),this.outputScaleX=o[0],this.outputScaleY=o[0]),this.ctx.transform.apply(this.ctx,g.transform),this.viewportScale=g.scale,this.baseTransform=this.ctx.mozCurrentTransform.slice(),this._combinedScaleFactor=Math.hypot(this.baseTransform[0],this.baseTransform[2]),this.imageLayer&&this.imageLayer.beginLayout()}},{key:"executeOperatorList",value:function(d,o,g,F){var N=d.argsArray,J=d.fnArray,le=o||0,ve=N.length;if(ve===le)return le;for(var ye=ve-le>l&&typeof g=="function",pe=ye?Date.now()+h:0,Ae=0,Te=this.commonObjs,Ee=this.objs,Fe;;){if(F!==void 0&&le===F.nextBreakPoint)return F.breakIt(le,g),le;if(Fe=J[le],Fe!==r.OPS.dependency)this[Fe].apply(this,N[le]);else{var Ie=S(N[le]),We;try{for(Ie.s();!(We=Ie.n()).done;){var je=We.value,fe=je.startsWith("g_")?Te:Ee;if(!fe.has(je))return fe.get(je,g),le}}catch(de){Ie.e(de)}finally{Ie.f()}}if(le++,le===ve)return le;if(ye&&++Ae>l){if(Date.now()>pe)return g(),le;Ae=0}}}},{key:"endDrawing",value:function(){for(;this.stateStack.length||this.current.activeSMask!==null;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.cachedPatterns.clear(),this.imageLayer&&this.imageLayer.endLayout()}},{key:"_scaleImage",value:function(d,o){for(var g=d.width,F=d.height,N=Math.max(Math.hypot(o[0],o[1]),1),J=Math.max(Math.hypot(o[2],o[3]),1),le=g,ve=F,ye="prescale1",pe,Ae;N>2&&le>1||J>2&&ve>1;){var Te=le,Ee=ve;N>2&&le>1&&(Te=Math.ceil(le/2),N/=le/Te),J>2&&ve>1&&(Ee=Math.ceil(ve/2),J/=ve/Ee),pe=this.cachedCanvases.getCanvas(ye,Te,Ee),Ae=pe.context,Ae.clearRect(0,0,Te,Ee),Ae.drawImage(d,0,0,le,ve,0,0,Te,Ee),d=pe.canvas,le=Te,ve=Ee,ye=ye==="prescale1"?"prescale2":"prescale1"}return{img:d,paintWidth:le,paintHeight:ve}}},{key:"_createMaskCanvas",value:function(d){var o=this.ctx,g=d.width,F=d.height,N=this.current.fillColor,J=this.current.patternFill,le=this.cachedCanvases.getCanvas("maskCanvas",g,F),ve=le.context;ee(ve,d);var ye=o.mozCurrentTransform,pe=r.Util.transform(ye,[1/g,0,0,-1/F,0,0]);pe=r.Util.transform(pe,[1,0,0,1,0,-F]);var Ae=r.Util.applyTransform([0,0],pe),Te=r.Util.applyTransform([g,F],pe),Ee=r.Util.normalizeRect([Ae[0],Ae[1],Te[0],Te[1]]),Fe=Math.ceil(Ee[2]-Ee[0]),Ie=Math.ceil(Ee[3]-Ee[1]),We=this.cachedCanvases.getCanvas("fillCanvas",Fe,Ie,!0),je=We.context,fe=Math.min(Ae[0],Te[0]),de=Math.min(Ae[1],Te[1]);je.translate(-fe,-de),je.transform.apply(je,pe);var U=this._scaleImage(le.canvas,je.mozCurrentTransformInverse);je.imageSmoothingEnabled=E(je.mozCurrentTransform,d.interpolate),je.drawImage(U.img,0,0,U.img.width,U.img.height,0,0,g,F),je.globalCompositeOperation="source-in";var te=r.Util.transform(je.mozCurrentTransformInverse,[1,0,0,1,-fe,-de]);return je.fillStyle=J?N.getPattern(o,this,te,i.PathType.FILL):N,je.fillRect(0,0,g,F),{canvas:We.canvas,offsetX:Math.round(fe),offsetY:Math.round(de)}}},{key:"setLineWidth",value:function(d){this.current.lineWidth=d,this.ctx.lineWidth=d}},{key:"setLineCap",value:function(d){this.ctx.lineCap=q[d]}},{key:"setLineJoin",value:function(d){this.ctx.lineJoin=re[d]}},{key:"setMiterLimit",value:function(d){this.ctx.miterLimit=d}},{key:"setDash",value:function(d,o){var g=this.ctx;g.setLineDash!==void 0&&(g.setLineDash(d),g.lineDashOffset=o)}},{key:"setRenderingIntent",value:function(d){}},{key:"setFlatness",value:function(d){}},{key:"setGState",value:function(d){for(var o=0,g=d.length;o<g;o++){var F=d[o],N=F[0],J=F[1];switch(N){case"LW":this.setLineWidth(J);break;case"LC":this.setLineCap(J);break;case"LJ":this.setLineJoin(J);break;case"ML":this.setMiterLimit(J);break;case"D":this.setDash(J[0],J[1]);break;case"RI":this.setRenderingIntent(J);break;case"FL":this.setFlatness(J);break;case"Font":this.setFont(J[0],J[1]);break;case"CA":this.current.strokeAlpha=F[1];break;case"ca":this.current.fillAlpha=F[1],this.ctx.globalAlpha=F[1];break;case"BM":this.ctx.globalCompositeOperation=J;break;case"SMask":this.current.activeSMask=J?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=J}}}},{key:"checkSMaskState",value:function(){var d=!!this.suspendedCtx;this.current.activeSMask&&!d?this.beginSMaskMode():!this.current.activeSMask&&d&&this.endSMaskMode()}},{key:"beginSMaskMode",value:function(){if(this.suspendedCtx)throw new Error("beginSMaskMode called while already in smask mode");var d=this.ctx.canvas.width,o=this.ctx.canvas.height,g="smaskGroupAt"+this.groupLevel,F=this.cachedCanvases.getCanvas(g,d,o,!0);this.suspendedCtx=this.ctx,this.ctx=F.context;var N=this.ctx;N.setTransform.apply(N,this.suspendedCtx.mozCurrentTransform),Z(this.suspendedCtx,N),c(N,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}},{key:"endSMaskMode",value:function(){if(!this.suspendedCtx)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Z(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.current.activeSMask=null,this.suspendedCtx=null}},{key:"compose",value:function(d){if(!!this.current.activeSMask){d?(d[0]=Math.floor(d[0]),d[1]=Math.floor(d[1]),d[2]=Math.ceil(d[2]),d[3]=Math.ceil(d[3])):d=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];var o=this.current.activeSMask,g=this.suspendedCtx;A(g,o,this.ctx,d),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}}},{key:"save",value:function(){this.ctx.save();var d=this.current;this.stateStack.push(d),this.current=d.clone()}},{key:"restore",value:function(){this.stateStack.length===0&&this.current.activeSMask&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedGetSinglePixelWidth=null)}},{key:"transform",value:function(d,o,g,F,N,J){this.ctx.transform(d,o,g,F,N,J),this._cachedGetSinglePixelWidth=null}},{key:"constructPath",value:function(d,o){for(var g=this.ctx,F=this.current,N=F.x,J=F.y,le,ve,ye=0,pe=0,Ae=d.length;ye<Ae;ye++)switch(d[ye]|0){case r.OPS.rectangle:N=o[pe++],J=o[pe++];var Te=o[pe++],Ee=o[pe++],Fe=N+Te,Ie=J+Ee;g.moveTo(N,J),Te===0||Ee===0?g.lineTo(Fe,Ie):(g.lineTo(Fe,J),g.lineTo(Fe,Ie),g.lineTo(N,Ie)),F.updatePathMinMax(g.mozCurrentTransform,N,J),F.updatePathMinMax(g.mozCurrentTransform,Fe,Ie),g.closePath();break;case r.OPS.moveTo:N=o[pe++],J=o[pe++],g.moveTo(N,J),F.updatePathMinMax(g.mozCurrentTransform,N,J);break;case r.OPS.lineTo:N=o[pe++],J=o[pe++],g.lineTo(N,J),F.updatePathMinMax(g.mozCurrentTransform,N,J);break;case r.OPS.curveTo:le=N,ve=J,N=o[pe+4],J=o[pe+5],g.bezierCurveTo(o[pe],o[pe+1],o[pe+2],o[pe+3],N,J),F.updateCurvePathMinMax(g.mozCurrentTransform,le,ve,o[pe],o[pe+1],o[pe+2],o[pe+3],N,J),pe+=6;break;case r.OPS.curveTo2:le=N,ve=J,g.bezierCurveTo(N,J,o[pe],o[pe+1],o[pe+2],o[pe+3]),F.updateCurvePathMinMax(g.mozCurrentTransform,le,ve,N,J,o[pe],o[pe+1],o[pe+2],o[pe+3]),N=o[pe+2],J=o[pe+3],pe+=4;break;case r.OPS.curveTo3:le=N,ve=J,N=o[pe+2],J=o[pe+3],g.bezierCurveTo(o[pe],o[pe+1],N,J,N,J),F.updateCurvePathMinMax(g.mozCurrentTransform,le,ve,o[pe],o[pe+1],N,J,N,J),pe+=4;break;case r.OPS.closePath:g.closePath();break}F.setCurrentPoint(N,J)}},{key:"closePath",value:function(){this.ctx.closePath()}},{key:"stroke",value:function(d){d=typeof d!="undefined"?d:!0;var o=this.ctx,g=this.current.strokeColor;if(o.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(m(g)==="object"&&g!==null&&g!==void 0&&g.getPattern){var F=this.getSinglePixelWidth();o.save(),o.strokeStyle=g.getPattern(o,this,o.mozCurrentTransformInverse,i.PathType.STROKE),o.lineWidth=Math.max(F,this.current.lineWidth),o.stroke(),o.restore()}else{var N=this.getSinglePixelWidth();N<0&&-N>=this.current.lineWidth?(o.save(),o.resetTransform(),o.lineWidth=Math.round(this._combinedScaleFactor),o.stroke(),o.restore()):(o.lineWidth=Math.max(N,this.current.lineWidth),o.stroke())}d&&this.consumePath(this.current.getClippedPathBoundingBox()),o.globalAlpha=this.current.fillAlpha}},{key:"closeStroke",value:function(){this.closePath(),this.stroke()}},{key:"fill",value:function(d){d=typeof d!="undefined"?d:!0;var o=this.ctx,g=this.current.fillColor,F=this.current.patternFill,N=!1;F&&(o.save(),o.fillStyle=g.getPattern(o,this,o.mozCurrentTransformInverse,i.PathType.FILL),N=!0);var J=this.current.getClippedPathBoundingBox();this.contentVisible&&J!==null&&(this.pendingEOFill?(o.fill("evenodd"),this.pendingEOFill=!1):o.fill()),N&&o.restore(),d&&this.consumePath(J)}},{key:"eoFill",value:function(){this.pendingEOFill=!0,this.fill()}},{key:"fillStroke",value:function(){this.fill(!1),this.stroke(!1),this.consumePath()}},{key:"eoFillStroke",value:function(){this.pendingEOFill=!0,this.fillStroke()}},{key:"closeFillStroke",value:function(){this.closePath(),this.fillStroke()}},{key:"closeEOFillStroke",value:function(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}},{key:"endPath",value:function(){this.consumePath()}},{key:"clip",value:function(){this.pendingClip=Y}},{key:"eoClip",value:function(){this.pendingClip=be}},{key:"beginText",value:function(){this.current.textMatrix=r.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}},{key:"endText",value:function(){var d=this.pendingTextPaths,o=this.ctx;if(d===void 0){o.beginPath();return}o.save(),o.beginPath();for(var g=0;g<d.length;g++){var F=d[g];o.setTransform.apply(o,F.transform),o.translate(F.x,F.y),F.addToPath(o,F.fontSize)}o.restore(),o.clip(),o.beginPath(),delete this.pendingTextPaths}},{key:"setCharSpacing",value:function(d){this.current.charSpacing=d}},{key:"setWordSpacing",value:function(d){this.current.wordSpacing=d}},{key:"setHScale",value:function(d){this.current.textHScale=d/100}},{key:"setLeading",value:function(d){this.current.leading=-d}},{key:"setFont",value:function(d,o){var g=this.commonObjs.get(d),F=this.current;if(!g)throw new Error("Can't find font for ".concat(d));if(F.fontMatrix=g.fontMatrix||r.FONT_IDENTITY_MATRIX,(F.fontMatrix[0]===0||F.fontMatrix[3]===0)&&(0,r.warn)("Invalid font matrix for font "+d),o<0?(o=-o,F.fontDirection=-1):F.fontDirection=1,this.current.font=g,this.current.fontSize=o,!g.isType3Font){var N=g.loadedName||"sans-serif",J="normal";g.black?J="900":g.bold&&(J="bold");var le=g.italic?"italic":"normal",ve='"'.concat(N,'", ').concat(g.fallbackName),ye=o;o<L?ye=L:o>_&&(ye=_),this.current.fontSizeScale=o/ye,this.ctx.font="".concat(le," ").concat(J," ").concat(ye,"px ").concat(ve)}}},{key:"setTextRenderingMode",value:function(d){this.current.textRenderingMode=d}},{key:"setTextRise",value:function(d){this.current.textRise=d}},{key:"moveText",value:function(d,o){this.current.x=this.current.lineX+=d,this.current.y=this.current.lineY+=o}},{key:"setLeadingMoveText",value:function(d,o){this.setLeading(-o),this.moveText(d,o)}},{key:"setTextMatrix",value:function(d,o,g,F,N,J){this.current.textMatrix=[d,o,g,F,N,J],this.current.textMatrixScale=Math.hypot(d,o),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}},{key:"nextLine",value:function(){this.moveText(0,this.current.leading)}},{key:"paintChar",value:function(d,o,g,F,N){var J=this.ctx,le=this.current,ve=le.font,ye=le.textRenderingMode,pe=le.fontSize/le.fontSizeScale,Ae=ye&r.TextRenderingMode.FILL_STROKE_MASK,Te=!!(ye&r.TextRenderingMode.ADD_TO_PATH_FLAG),Ee=le.patternFill&&!ve.missingFile,Fe;if((ve.disableFontFace||Te||Ee)&&(Fe=ve.getPathGenerator(this.commonObjs,d)),ve.disableFontFace||Ee?(J.save(),J.translate(o,g),J.beginPath(),Fe(J,pe),F&&J.setTransform.apply(J,F),(Ae===r.TextRenderingMode.FILL||Ae===r.TextRenderingMode.FILL_STROKE)&&J.fill(),(Ae===r.TextRenderingMode.STROKE||Ae===r.TextRenderingMode.FILL_STROKE)&&(N&&(J.resetTransform(),J.lineWidth=Math.round(this._combinedScaleFactor)),J.stroke()),J.restore()):((Ae===r.TextRenderingMode.FILL||Ae===r.TextRenderingMode.FILL_STROKE)&&J.fillText(d,o,g),(Ae===r.TextRenderingMode.STROKE||Ae===r.TextRenderingMode.FILL_STROKE)&&(N?(J.save(),J.moveTo(o,g),J.resetTransform(),J.lineWidth=Math.round(this._combinedScaleFactor),J.strokeText(d,0,0),J.restore()):J.strokeText(d,o,g))),Te){var Ie=this.pendingTextPaths||(this.pendingTextPaths=[]);Ie.push({transform:J.mozCurrentTransform,x:o,y:g,fontSize:pe,addToPath:Fe})}}},{key:"isFontSubpixelAAEnabled",get:function(){var d=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10),o=d.context;o.scale(1.5,1),o.fillText("I",0,10);for(var g=o.getImageData(0,0,10,10).data,F=!1,N=3;N<g.length;N+=4)if(g[N]>0&&g[N]<255){F=!0;break}return(0,r.shadow)(this,"isFontSubpixelAAEnabled",F)}},{key:"showText",value:function(d){var o=this.current,g=o.font;if(g.isType3Font)return this.showType3Text(d);var F=o.fontSize;if(F!==0){var N=this.ctx,J=o.fontSizeScale,le=o.charSpacing,ve=o.wordSpacing,ye=o.fontDirection,pe=o.textHScale*ye,Ae=d.length,Te=g.vertical,Ee=Te?1:-1,Fe=g.defaultVMetrics,Ie=F*o.fontMatrix[0],We=o.textRenderingMode===r.TextRenderingMode.FILL&&!g.disableFontFace&&!o.patternFill;N.save(),N.transform.apply(N,o.textMatrix),N.translate(o.x,o.y+o.textRise),ye>0?N.scale(pe,-1):N.scale(pe,1);var je;if(o.patternFill){N.save();var fe=o.fillColor.getPattern(N,this,N.mozCurrentTransformInverse,i.PathType.FILL);je=N.mozCurrentTransform,N.restore(),N.fillStyle=fe}var de=o.lineWidth,U=!1,te=o.textMatrixScale;if(te===0||de===0){var K=o.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;(K===r.TextRenderingMode.STROKE||K===r.TextRenderingMode.FILL_STROKE)&&(this._cachedGetSinglePixelWidth=null,de=this.getSinglePixelWidth(),U=de<0)}else de/=te;J!==1&&(N.scale(J,J),de/=J),N.lineWidth=de;var oe=0,ne;for(ne=0;ne<Ae;++ne){var Q=d[ne];if((0,r.isNum)(Q)){oe+=Ee*Q*F/1e3;continue}var he=!1,ce=(Q.isSpace?ve:0)+le,Se=Q.fontChar,Re=Q.accent,De=void 0,Le=void 0,_e=Q.width;if(Te){var Ge=Q.vmetric||Fe,Oe=-(Q.vmetric?Ge[1]:_e*.5)*Ie,xe=Ge[2]*Ie;_e=Ge?-Ge[0]:_e,De=Oe/J,Le=(oe+xe)/J}else De=oe/J,Le=0;if(g.remeasure&&_e>0){var Be=N.measureText(Se).width*1e3/F*J;if(_e<Be&&this.isFontSubpixelAAEnabled){var Ne=_e/Be;he=!0,N.save(),N.scale(Ne,1),De/=Ne}else _e!==Be&&(De+=(_e-Be)/2e3*F/J)}if(this.contentVisible&&(Q.isInFont||g.missingFile)){if(We&&!Re)N.fillText(Se,De,Le);else if(this.paintChar(Se,De,Le,je,U),Re){var Ve=De+F*Re.offset.x/J,Xe=Le-F*Re.offset.y/J;this.paintChar(Re.fontChar,Ve,Xe,je,U)}}var Je=void 0;Te?Je=_e*Ie-ce*ye:Je=_e*Ie+ce*ye,oe+=Je,he&&N.restore()}Te?o.y-=oe:o.x+=oe*pe,N.restore(),this.compose()}}},{key:"showType3Text",value:function(d){var o=this.ctx,g=this.current,F=g.font,N=g.fontSize,J=g.fontDirection,le=F.vertical?1:-1,ve=g.charSpacing,ye=g.wordSpacing,pe=g.textHScale*J,Ae=g.fontMatrix||r.FONT_IDENTITY_MATRIX,Te=d.length,Ee=g.textRenderingMode===r.TextRenderingMode.INVISIBLE,Fe,Ie,We,je;if(!(Ee||N===0)){for(this._cachedGetSinglePixelWidth=null,o.save(),o.transform.apply(o,g.textMatrix),o.translate(g.x,g.y),o.scale(pe,J),Fe=0;Fe<Te;++Fe){if(Ie=d[Fe],(0,r.isNum)(Ie)){je=le*Ie*N/1e3,this.ctx.translate(je,0),g.x+=je*pe;continue}var fe=(Ie.isSpace?ye:0)+ve,de=F.charProcOperatorList[Ie.operatorListId];if(!de){(0,r.warn)('Type3 character "'.concat(Ie.operatorListId,'" is not available.'));continue}this.contentVisible&&(this.processingType3=Ie,this.save(),o.scale(N,N),o.transform.apply(o,Ae),this.executeOperatorList(de),this.restore());var U=r.Util.applyTransform([Ie.width,0],Ae);We=U[0]*N+fe,o.translate(We,0),g.x+=We*pe}o.restore(),this.processingType3=null}}},{key:"setCharWidth",value:function(d,o){}},{key:"setCharWidthAndBounds",value:function(d,o,g,F,N,J){this.ctx.rect(g,F,N-g,J-F),this.clip(),this.endPath()}},{key:"getColorN_Pattern",value:function(d){var o=this,g;if(d[0]==="TilingPattern"){var F=d[1],N=this.baseTransform||this.ctx.mozCurrentTransform.slice(),J={createCanvasGraphics:function(ve){return new z(ve,o.commonObjs,o.objs,o.canvasFactory)}};g=new i.TilingPattern(d,F,this.ctx,J,N)}else g=this._getPattern(d[1],d[2]);return g}},{key:"setStrokeColorN",value:function(){this.current.strokeColor=this.getColorN_Pattern(arguments)}},{key:"setFillColorN",value:function(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}},{key:"setStrokeRGBColor",value:function(d,o,g){var F=r.Util.makeHexColor(d,o,g);this.ctx.strokeStyle=F,this.current.strokeColor=F}},{key:"setFillRGBColor",value:function(d,o,g){var F=r.Util.makeHexColor(d,o,g);this.ctx.fillStyle=F,this.current.fillColor=F,this.current.patternFill=!1}},{key:"_getPattern",value:function(d){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,g;return this.cachedPatterns.has(d)?g=this.cachedPatterns.get(d):(g=(0,i.getShadingPattern)(this.objs.get(d)),this.cachedPatterns.set(d,g)),o&&(g.matrix=o),g}},{key:"shadingFill",value:function(d){if(!!this.contentVisible){var o=this.ctx;this.save();var g=this._getPattern(d);o.fillStyle=g.getPattern(o,this,o.mozCurrentTransformInverse,i.PathType.SHADING);var F=o.mozCurrentTransformInverse;if(F){var N=o.canvas,J=N.width,le=N.height,ve=r.Util.applyTransform([0,0],F),ye=r.Util.applyTransform([0,le],F),pe=r.Util.applyTransform([J,0],F),Ae=r.Util.applyTransform([J,le],F),Te=Math.min(ve[0],ye[0],pe[0],Ae[0]),Ee=Math.min(ve[1],ye[1],pe[1],Ae[1]),Fe=Math.max(ve[0],ye[0],pe[0],Ae[0]),Ie=Math.max(ve[1],ye[1],pe[1],Ae[1]);this.ctx.fillRect(Te,Ee,Fe-Te,Ie-Ee)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}}},{key:"beginInlineImage",value:function(){(0,r.unreachable)("Should not call beginInlineImage")}},{key:"beginImageData",value:function(){(0,r.unreachable)("Should not call beginImageData")}},{key:"paintFormXObjectBegin",value:function(d,o){if(!!this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(d)&&d.length===6&&this.transform.apply(this,d),this.baseTransform=this.ctx.mozCurrentTransform,o)){var g=o[2]-o[0],F=o[3]-o[1];this.ctx.rect(o[0],o[1],g,F),this.current.updatePathMinMax(this.ctx.mozCurrentTransform,o[0],o[1]),this.current.updatePathMinMax(this.ctx.mozCurrentTransform,o[2],o[3]),this.clip(),this.endPath()}}},{key:"paintFormXObjectEnd",value:function(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}},{key:"beginGroup",value:function(d){if(!!this.contentVisible){this.save();var o=this.suspendedCtx;this.current.activeSMask&&(this.suspendedCtx=null,this.current.activeSMask=null);var g=this.ctx;d.isolated||(0,r.info)("TODO: Support non-isolated groups."),d.knockout&&(0,r.warn)("Knockout groups not supported.");var F=g.mozCurrentTransform;if(d.matrix&&g.transform.apply(g,d.matrix),!d.bbox)throw new Error("Bounding box is required.");var N=r.Util.getAxialAlignedBoundingBox(d.bbox,g.mozCurrentTransform),J=[0,0,g.canvas.width,g.canvas.height];N=r.Util.intersect(N,J)||[0,0,0,0];var le=Math.floor(N[0]),ve=Math.floor(N[1]),ye=Math.max(Math.ceil(N[2])-le,1),pe=Math.max(Math.ceil(N[3])-ve,1),Ae=1,Te=1;ye>B&&(Ae=ye/B,ye=B),pe>B&&(Te=pe/B,pe=B),this.current.startNewPathAndClipBox([0,0,ye,pe]);var Ee="groupAt"+this.groupLevel;d.smask&&(Ee+="_smask_"+this.smaskCounter++%2);var Fe=this.cachedCanvases.getCanvas(Ee,ye,pe,!0),Ie=Fe.context;Ie.scale(1/Ae,1/Te),Ie.translate(-le,-ve),Ie.transform.apply(Ie,F),d.smask?this.smaskStack.push({canvas:Fe.canvas,context:Ie,offsetX:le,offsetY:ve,scaleX:Ae,scaleY:Te,subtype:d.smask.subtype,backdrop:d.smask.backdrop,transferMap:d.smask.transferMap||null,startTransformInverse:null}):(g.setTransform(1,0,0,1,0,0),g.translate(le,ve),g.scale(Ae,Te),g.save()),Z(g,Ie),this.ctx=Ie,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push({ctx:g,suspendedCtx:o}),this.groupLevel++}}},{key:"endGroup",value:function(d){if(!!this.contentVisible){this.groupLevel--;var o=this.ctx,g=this.groupStack.pop(),F=g.ctx,N=g.suspendedCtx;if(this.ctx=F,this.ctx.imageSmoothingEnabled=!1,N&&(this.suspendedCtx=N),d.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();var J=this.ctx.mozCurrentTransform;this.restore(),this.ctx.save(),this.ctx.setTransform.apply(this.ctx,J);var le=r.Util.getAxialAlignedBoundingBox([0,0,o.canvas.width,o.canvas.height],J);this.ctx.drawImage(o.canvas,0,0),this.ctx.restore(),this.compose(le)}}}},{key:"beginAnnotations",value:function(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)}},{key:"endAnnotations",value:function(){this.restore()}},{key:"beginAnnotation",value:function(d,o,g,F,N){if(this.save(),Array.isArray(o)&&o.length===4){var J=o[2]-o[0],le=o[3]-o[1];if(N&&this.annotationCanvasMap){g=g.slice(),g[4]-=o[0],g[5]-=o[1],o=o.slice(),o[0]=o[1]=0,o[2]=J,o[3]=le;var ve=r.Util.singularValueDecompose2dScale(this.ctx.mozCurrentTransform),ye=W(ve,2),pe=ye[0],Ae=ye[1],Te=this.viewportScale,Ee=Math.ceil(J*this.outputScaleX*Te),Fe=Math.ceil(le*this.outputScaleY*Te);this.annotationCanvas=this.canvasFactory.create(Ee,Fe);var Ie=this.annotationCanvas,We=Ie.canvas,je=Ie.context;We.style.width="calc(".concat(J,"px * var(--viewport-scale-factor))"),We.style.height="calc(".concat(le,"px * var(--viewport-scale-factor))"),this.annotationCanvasMap.set(d,We),this.annotationCanvas.savedCtx=this.ctx,this.ctx=je,this.ctx.setTransform(pe,0,0,-Ae,0,le*Ae),b(this.ctx),ie(this.ctx)}else ie(this.ctx),this.ctx.rect(o[0],o[1],J,le),this.clip(),this.endPath()}this.current=new I(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,g),this.transform.apply(this,F)}},{key:"endAnnotation",value:function(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas),this.restore()}},{key:"paintImageMaskXObject",value:function(d){if(!!this.contentVisible){var o=this.ctx,g=d.width,F=d.height,N=this.processingType3;if(N&&N.compiled===void 0&&(g<=u&&F<=u?N.compiled=G({data:d.data,width:g,height:F}):N.compiled=null),N!=null&&N.compiled){N.compiled(o);return}var J=this._createMaskCanvas(d),le=J.canvas;o.save(),o.setTransform(1,0,0,1,0,0),o.drawImage(le,J.offsetX,J.offsetY),o.restore(),this.compose()}}},{key:"paintImageMaskXObjectRepeat",value:function(d,o){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,F=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,N=arguments.length>4?arguments[4]:void 0,J=arguments.length>5?arguments[5]:void 0;if(!!this.contentVisible){var le=this.ctx;le.save();var ve=le.mozCurrentTransform;le.transform(o,g,F,N,0,0);var ye=this._createMaskCanvas(d);le.setTransform(1,0,0,1,0,0);for(var pe=0,Ae=J.length;pe<Ae;pe+=2){var Te=r.Util.transform(ve,[o,g,F,N,J[pe],J[pe+1]]),Ee=r.Util.applyTransform([0,0],Te),Fe=W(Ee,2),Ie=Fe[0],We=Fe[1];le.drawImage(ye.canvas,Ie,We)}le.restore(),this.compose()}}},{key:"paintImageMaskXObjectGroup",value:function(d){if(!!this.contentVisible){for(var o=this.ctx,g=this.current.fillColor,F=this.current.patternFill,N=0,J=d.length;N<J;N++){var le=d[N],ve=le.width,ye=le.height,pe=this.cachedCanvases.getCanvas("maskCanvas",ve,ye),Ae=pe.context;Ae.save(),ee(Ae,le),Ae.globalCompositeOperation="source-in",Ae.fillStyle=F?g.getPattern(Ae,this,o.mozCurrentTransformInverse,i.PathType.FILL):g,Ae.fillRect(0,0,ve,ye),Ae.restore(),o.save(),o.transform.apply(o,le.transform),o.scale(1,-1),o.drawImage(pe.canvas,0,0,ve,ye,0,-1,1,1),o.restore()}this.compose()}}},{key:"paintImageXObject",value:function(d){if(!!this.contentVisible){var o=d.startsWith("g_")?this.commonObjs.get(d):this.objs.get(d);if(!o){(0,r.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(o)}}},{key:"paintImageXObjectRepeat",value:function(d,o,g,F){if(!!this.contentVisible){var N=d.startsWith("g_")?this.commonObjs.get(d):this.objs.get(d);if(!N){(0,r.warn)("Dependent image isn't ready yet");return}for(var J=N.width,le=N.height,ve=[],ye=0,pe=F.length;ye<pe;ye+=2)ve.push({transform:[o,0,0,g,F[ye],F[ye+1]],x:0,y:0,w:J,h:le});this.paintInlineImageXObjectGroup(N,ve)}}},{key:"paintInlineImageXObject",value:function(d){if(!!this.contentVisible){var o=d.width,g=d.height,F=this.ctx;this.save(),F.scale(1/o,-1/g);var N;if(typeof HTMLElement=="function"&&d instanceof HTMLElement||!d.data)N=d;else{var J=this.cachedCanvases.getCanvas("inlineImage",o,g),le=J.context;$(le,d,this.current.transferMaps),N=J.canvas}var ve=this._scaleImage(N,F.mozCurrentTransformInverse);if(F.imageSmoothingEnabled=E(F.mozCurrentTransform,d.interpolate),F.drawImage(ve.img,0,0,ve.paintWidth,ve.paintHeight,0,-g,o,g),this.imageLayer){var ye=this.getCanvasPosition(0,-g);this.imageLayer.appendImage({imgData:d,left:ye[0],top:ye[1],width:o/F.mozCurrentTransformInverse[0],height:g/F.mozCurrentTransformInverse[3]})}this.compose(),this.restore()}}},{key:"paintInlineImageXObjectGroup",value:function(d,o){if(!!this.contentVisible){var g=this.ctx,F=d.width,N=d.height,J=this.cachedCanvases.getCanvas("inlineImage",F,N),le=J.context;$(le,d,this.current.transferMaps);for(var ve=0,ye=o.length;ve<ye;ve++){var pe=o[ve];if(g.save(),g.transform.apply(g,pe.transform),g.scale(1,-1),g.drawImage(J.canvas,pe.x,pe.y,pe.w,pe.h,0,-1,1,1),this.imageLayer){var Ae=this.getCanvasPosition(pe.x,pe.y);this.imageLayer.appendImage({imgData:d,left:Ae[0],top:Ae[1],width:F,height:N})}g.restore()}this.compose()}}},{key:"paintSolidColorImageMask",value:function(){!this.contentVisible||(this.ctx.fillRect(0,0,1,1),this.compose())}},{key:"markPoint",value:function(d){}},{key:"markPointProps",value:function(d,o){}},{key:"beginMarkedContent",value:function(d){this.markedContentStack.push({visible:!0})}},{key:"beginMarkedContentProps",value:function(d,o){d==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(o)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}},{key:"endMarkedContent",value:function(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}},{key:"beginCompat",value:function(){}},{key:"endCompat",value:function(){}},{key:"consumePath",value:function(d){this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(d);var o=this.ctx;this.pendingClip&&(this.pendingClip===be?o.clip("evenodd"):o.clip(),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),o.beginPath()}},{key:"getSinglePixelWidth",value:function(){if(this._cachedGetSinglePixelWidth===null){var d=this.ctx.mozCurrentTransform,o=Math.abs(d[0]*d[3]-d[2]*d[1]),g=Math.pow(d[0],2)+Math.pow(d[2],2),F=Math.pow(d[1],2)+Math.pow(d[3],2),N=Math.sqrt(Math.max(g,F))/o;g!==F&&this._combinedScaleFactor*N>1?this._cachedGetSinglePixelWidth=-(this._combinedScaleFactor*N):o>Number.EPSILON?this._cachedGetSinglePixelWidth=N:this._cachedGetSinglePixelWidth=1}return this._cachedGetSinglePixelWidth}},{key:"getCanvasPosition",value:function(d,o){var g=this.ctx.mozCurrentTransform;return[g[0]*d+g[2]*o+g[4],g[1]*d+g[3]*o+g[5]]}},{key:"isContentVisible",value:function(){for(var d=this.markedContentStack.length-1;d>=0;d--)if(!this.markedContentStack[d].visible)return!1;return!0}}]),z}();n.CanvasGraphics=ke;for(var we in r.OPS)ke.prototype[we]!==void 0&&(ke.prototype[r.OPS[we]]=ke.prototype[we])},(s,n,e)=>{function r(I){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?r=function(ee){return typeof ee}:r=function(ee){return ee&&typeof Symbol=="function"&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee},r(I)}Object.defineProperty(n,"__esModule",{value:!0}),n.TilingPattern=n.PathType=void 0,n.getShadingPattern=b;var i=e(4);function f(I,$){var ee=typeof Symbol!="undefined"&&I[Symbol.iterator]||I["@@iterator"];if(!ee){if(Array.isArray(I)||(ee=m(I))||$&&I&&typeof I.length=="number"){ee&&(I=ee);var Z=0,ie=function(){};return{s:ie,n:function(){return Z>=I.length?{done:!0}:{done:!1,value:I[Z++]}},e:function(A){throw A},f:ie}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var H=!0,X=!1,P;return{s:function(){ee=ee.call(I)},n:function(){var A=ee.next();return H=A.done,A},e:function(A){X=!0,P=A},f:function(){try{!H&&ee.return!=null&&ee.return()}finally{if(X)throw P}}}}function m(I,$){if(!!I){if(typeof I=="string")return S(I,$);var ee=Object.prototype.toString.call(I).slice(8,-1);if(ee==="Object"&&I.constructor&&(ee=I.constructor.name),ee==="Map"||ee==="Set")return Array.from(I);if(ee==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ee))return S(I,$)}}function S(I,$){($==null||$>I.length)&&($=I.length);for(var ee=0,Z=new Array($);ee<$;ee++)Z[ee]=I[ee];return Z}function D(I,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create($&&$.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),$&&M(I,$)}function M(I,$){return M=Object.setPrototypeOf||function(Z,ie){return Z.__proto__=ie,Z},M(I,$)}function j(I){var $=O();return function(){var Z=w(I),ie;if($){var H=w(this).constructor;ie=Reflect.construct(Z,arguments,H)}else ie=Z.apply(this,arguments);return W(this,ie)}}function W(I,$){if($&&(r($)==="object"||typeof $=="function"))return $;if($!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return V(I)}function V(I){if(I===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I}function O(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function w(I){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(ee){return ee.__proto__||Object.getPrototypeOf(ee)},w(I)}function x(I,$){if(!(I instanceof $))throw new TypeError("Cannot call a class as a function")}function k(I,$){for(var ee=0;ee<$.length;ee++){var Z=$[ee];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(I,Z.key,Z)}}function L(I,$,ee){return $&&k(I.prototype,$),ee&&k(I,ee),I}var _={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};n.PathType=_;function B(I,$){if(!(!$||typeof Path2D=="undefined")){var ee=$[2]-$[0],Z=$[3]-$[1],ie=new Path2D;ie.rect($[0],$[1],ee,Z),I.clip(ie)}}var h=function(){function I(){x(this,I),this.constructor===I&&(0,i.unreachable)("Cannot initialize BaseShadingPattern.")}return L(I,[{key:"getPattern",value:function(){(0,i.unreachable)("Abstract method `getPattern` called.")}}]),I}(),l=function(I){D(ee,I);var $=j(ee);function ee(Z){var ie;return x(this,ee),ie=$.call(this),ie._type=Z[1],ie._bbox=Z[2],ie._colorStops=Z[3],ie._p0=Z[4],ie._p1=Z[5],ie._r0=Z[6],ie._r1=Z[7],ie.matrix=null,ie}return L(ee,[{key:"_createGradient",value:function(ie){var H;this._type==="axial"?H=ie.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(H=ie.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));var X=f(this._colorStops),P;try{for(X.s();!(P=X.n()).done;){var v=P.value;H.addColorStop(v[0],v[1])}}catch(A){X.e(A)}finally{X.f()}return H}},{key:"getPattern",value:function(ie,H,X,P){var v;if(P===_.STROKE||P===_.FILL){var A=H.current.getClippedPathBoundingBox(P,ie.mozCurrentTransform)||[0,0,0,0],E=Math.ceil(A[2]-A[0])||1,q=Math.ceil(A[3]-A[1])||1,re=H.cachedCanvases.getCanvas("pattern",E,q,!0),Y=re.context;Y.clearRect(0,0,Y.canvas.width,Y.canvas.height),Y.beginPath(),Y.rect(0,0,Y.canvas.width,Y.canvas.height),Y.translate(-A[0],-A[1]),X=i.Util.transform(X,[1,0,0,1,A[0],A[1]]),Y.transform.apply(Y,H.baseTransform),this.matrix&&Y.transform.apply(Y,this.matrix),B(Y,this._bbox),Y.fillStyle=this._createGradient(Y),Y.fill(),v=ie.createPattern(re.canvas,"no-repeat");var be=new DOMMatrix(X);try{v.setTransform(be)}catch(ke){(0,i.warn)('RadialAxialShadingPattern.getPattern: "'.concat(ke==null?void 0:ke.message,'".'))}}else B(ie,this._bbox),v=this._createGradient(ie);return v}}]),ee}(h);function u(I,$,ee,Z,ie,H,X,P){var v=$.coords,A=$.colors,E=I.data,q=I.width*4,re;v[ee+1]>v[Z+1]&&(re=ee,ee=Z,Z=re,re=H,H=X,X=re),v[Z+1]>v[ie+1]&&(re=Z,Z=ie,ie=re,re=X,X=P,P=re),v[ee+1]>v[Z+1]&&(re=ee,ee=Z,Z=re,re=H,H=X,X=re);var Y=(v[ee]+$.offsetX)*$.scaleX,be=(v[ee+1]+$.offsetY)*$.scaleY,ke=(v[Z]+$.offsetX)*$.scaleX,we=(v[Z+1]+$.offsetY)*$.scaleY,z=(v[ie]+$.offsetX)*$.scaleX,R=(v[ie+1]+$.offsetY)*$.scaleY;if(!(be>=R))for(var d=A[H],o=A[H+1],g=A[H+2],F=A[X],N=A[X+1],J=A[X+2],le=A[P],ve=A[P+1],ye=A[P+2],pe=Math.round(be),Ae=Math.round(R),Te,Ee,Fe,Ie,We,je,fe,de,U=pe;U<=Ae;U++){if(U<we){var te=void 0;U<be?te=0:te=(be-U)/(be-we),Te=Y-(Y-ke)*te,Ee=d-(d-F)*te,Fe=o-(o-N)*te,Ie=g-(g-J)*te}else{var K=void 0;U>R?K=1:we===R?K=0:K=(we-U)/(we-R),Te=ke-(ke-z)*K,Ee=F-(F-le)*K,Fe=N-(N-ve)*K,Ie=J-(J-ye)*K}var oe=void 0;U<be?oe=0:U>R?oe=1:oe=(be-U)/(be-R),We=Y-(Y-z)*oe,je=d-(d-le)*oe,fe=o-(o-ve)*oe,de=g-(g-ye)*oe;for(var ne=Math.round(Math.min(Te,We)),Q=Math.round(Math.max(Te,We)),he=q*U+ne*4,ce=ne;ce<=Q;ce++)oe=(Te-ce)/(Te-We),oe<0?oe=0:oe>1&&(oe=1),E[he++]=Ee-(Ee-je)*oe|0,E[he++]=Fe-(Fe-fe)*oe|0,E[he++]=Ie-(Ie-de)*oe|0,E[he++]=255}}function y(I,$,ee){var Z=$.coords,ie=$.colors,H,X;switch($.type){case"lattice":var P=$.verticesPerRow,v=Math.floor(Z.length/P)-1,A=P-1;for(H=0;H<v;H++)for(var E=H*P,q=0;q<A;q++,E++)u(I,ee,Z[E],Z[E+1],Z[E+P],ie[E],ie[E+1],ie[E+P]),u(I,ee,Z[E+P+1],Z[E+1],Z[E+P],ie[E+P+1],ie[E+1],ie[E+P]);break;case"triangles":for(H=0,X=Z.length;H<X;H+=3)u(I,ee,Z[H],Z[H+1],Z[H+2],ie[H],ie[H+1],ie[H+2]);break;default:throw new Error("illegal figure")}}var p=function(I){D(ee,I);var $=j(ee);function ee(Z){var ie;return x(this,ee),ie=$.call(this),ie._coords=Z[2],ie._colors=Z[3],ie._figures=Z[4],ie._bounds=Z[5],ie._bbox=Z[7],ie._background=Z[8],ie.matrix=null,ie}return L(ee,[{key:"_createMeshCanvas",value:function(ie,H,X){var P=1.1,v=3e3,A=2,E=Math.floor(this._bounds[0]),q=Math.floor(this._bounds[1]),re=Math.ceil(this._bounds[2])-E,Y=Math.ceil(this._bounds[3])-q,be=Math.min(Math.ceil(Math.abs(re*ie[0]*P)),v),ke=Math.min(Math.ceil(Math.abs(Y*ie[1]*P)),v),we=re/be,z=Y/ke,R={coords:this._coords,colors:this._colors,offsetX:-E,offsetY:-q,scaleX:1/we,scaleY:1/z},d=be+A*2,o=ke+A*2,g=X.getCanvas("mesh",d,o,!1),F=g.context,N=F.createImageData(be,ke);if(H)for(var J=N.data,le=0,ve=J.length;le<ve;le+=4)J[le]=H[0],J[le+1]=H[1],J[le+2]=H[2],J[le+3]=255;var ye=f(this._figures),pe;try{for(ye.s();!(pe=ye.n()).done;){var Ae=pe.value;y(N,Ae,R)}}catch(Ee){ye.e(Ee)}finally{ye.f()}F.putImageData(N,A,A);var Te=g.canvas;return{canvas:Te,offsetX:E-A*we,offsetY:q-A*z,scaleX:we,scaleY:z}}},{key:"getPattern",value:function(ie,H,X,P){B(ie,this._bbox);var v;if(P===_.SHADING)v=i.Util.singularValueDecompose2dScale(ie.mozCurrentTransform);else if(v=i.Util.singularValueDecompose2dScale(H.baseTransform),this.matrix){var A=i.Util.singularValueDecompose2dScale(this.matrix);v=[v[0]*A[0],v[1]*A[1]]}var E=this._createMeshCanvas(v,P===_.SHADING?null:this._background,H.cachedCanvases);return P!==_.SHADING&&(ie.setTransform.apply(ie,H.baseTransform),this.matrix&&ie.transform.apply(ie,this.matrix)),ie.translate(E.offsetX,E.offsetY),ie.scale(E.scaleX,E.scaleY),ie.createPattern(E.canvas,"no-repeat")}}]),ee}(h),c=function(I){D(ee,I);var $=j(ee);function ee(){return x(this,ee),$.apply(this,arguments)}return L(ee,[{key:"getPattern",value:function(){return"hotpink"}}]),ee}(h);function b(I){switch(I[0]){case"RadialAxial":return new l(I);case"Mesh":return new p(I);case"Dummy":return new c}throw new Error("Unknown IR type: ".concat(I[0]))}var C={COLORED:1,UNCOLORED:2},G=function(){function I($,ee,Z,ie,H){x(this,I),this.operatorList=$[2],this.matrix=$[3]||[1,0,0,1,0,0],this.bbox=$[4],this.xstep=$[5],this.ystep=$[6],this.paintType=$[7],this.tilingType=$[8],this.color=ee,this.ctx=Z,this.canvasGraphicsFactory=ie,this.baseTransform=H}return L(I,[{key:"createPatternCanvas",value:function(ee){var Z=this.operatorList,ie=this.bbox,H=this.xstep,X=this.ystep,P=this.paintType,v=this.tilingType,A=this.color,E=this.canvasGraphicsFactory;(0,i.info)("TilingType: "+v);var q=ie[0],re=ie[1],Y=ie[2],be=ie[3],ke=i.Util.singularValueDecompose2dScale(this.matrix),we=i.Util.singularValueDecompose2dScale(this.baseTransform),z=[ke[0]*we[0],ke[1]*we[1]],R=this.getSizeAndScale(H,this.ctx.canvas.width,z[0]),d=this.getSizeAndScale(X,this.ctx.canvas.height,z[1]),o=ee.cachedCanvases.getCanvas("pattern",R.size,d.size,!0),g=o.context,F=E.createCanvasGraphics(g);F.groupLevel=ee.groupLevel,this.setFillAndStrokeStyleToContext(F,P,A);var N=q,J=re,le=Y,ve=be;return q<0&&(N=0,le+=Math.abs(q)),re<0&&(J=0,ve+=Math.abs(re)),g.translate(-(R.scale*N),-(d.scale*J)),F.transform(R.scale,0,0,d.scale,0,0),this.clipBbox(F,N,J,le,ve),F.baseTransform=F.ctx.mozCurrentTransform.slice(),F.executeOperatorList(Z),F.endDrawing(),{canvas:o.canvas,scaleX:R.scale,scaleY:d.scale,offsetX:N,offsetY:J}}},{key:"getSizeAndScale",value:function(ee,Z,ie){ee=Math.abs(ee);var H=Math.max(I.MAX_PATTERN_SIZE,Z),X=Math.ceil(ee*ie);return X>=H?X=H:ie=X/ee,{scale:ie,size:X}}},{key:"clipBbox",value:function(ee,Z,ie,H,X){var P=H-Z,v=X-ie;ee.ctx.rect(Z,ie,P,v),ee.clip(),ee.endPath()}},{key:"setFillAndStrokeStyleToContext",value:function(ee,Z,ie){var H=ee.ctx,X=ee.current;switch(Z){case C.COLORED:var P=this.ctx;H.fillStyle=P.fillStyle,H.strokeStyle=P.strokeStyle,X.fillColor=P.fillStyle,X.strokeColor=P.strokeStyle;break;case C.UNCOLORED:var v=i.Util.makeHexColor(ie[0],ie[1],ie[2]);H.fillStyle=v,H.strokeStyle=v,X.fillColor=v,X.strokeColor=v;break;default:throw new i.FormatError("Unsupported paint type: ".concat(Z))}}},{key:"getPattern",value:function(ee,Z,ie,H){var X=ie;H!==_.SHADING&&(X=i.Util.transform(X,Z.baseTransform),this.matrix&&(X=i.Util.transform(X,this.matrix)));var P=this.createPatternCanvas(Z),v=new DOMMatrix(X);v=v.translate(P.offsetX,P.offsetY),v=v.scale(1/P.scaleX,1/P.scaleY);var A=ee.createPattern(P.canvas,"repeat");try{A.setTransform(v)}catch(E){(0,i.warn)('TilingPattern.getPattern: "'.concat(E==null?void 0:E.message,'".'))}return A}}],[{key:"MAX_PATTERN_SIZE",get:function(){return(0,i.shadow)(this,"MAX_PATTERN_SIZE",3e3)}}]),I}();n.TilingPattern=G},(s,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.GlobalWorkerOptions=void 0;var e=Object.create(null);n.GlobalWorkerOptions=e,e.workerPort=e.workerPort===void 0?null:e.workerPort,e.workerSrc=e.workerSrc===void 0?"":e.workerSrc},(s,n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.MessageHandler=void 0;var r=f(e(2)),i=e(4);function f(k){return k&&k.__esModule?k:{default:k}}function m(k,L,_,B,h,l,u){try{var y=k[l](u),p=y.value}catch(c){_(c);return}y.done?L(p):Promise.resolve(p).then(B,h)}function S(k){return function(){var L=this,_=arguments;return new Promise(function(B,h){var l=k.apply(L,_);function u(p){m(l,B,h,u,y,"next",p)}function y(p){m(l,B,h,u,y,"throw",p)}u(void 0)})}}function D(k,L){if(!(k instanceof L))throw new TypeError("Cannot call a class as a function")}function M(k,L){for(var _=0;_<L.length;_++){var B=L[_];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(k,B.key,B)}}function j(k,L,_){return L&&M(k.prototype,L),_&&M(k,_),k}function W(k){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?W=function(_){return typeof _}:W=function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},W(k)}var V={UNKNOWN:0,DATA:1,ERROR:2},O={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function w(k){if(!(k instanceof Error||W(k)==="object"&&k!==null))return(0,i.warn)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),k;switch(k.name){case"AbortException":return new i.AbortException(k.message);case"MissingPDFException":return new i.MissingPDFException(k.message);case"PasswordException":return new i.PasswordException(k.message,k.code);case"UnexpectedResponseException":return new i.UnexpectedResponseException(k.message,k.status);case"UnknownErrorException":return new i.UnknownErrorException(k.message,k.details);default:return new i.UnknownErrorException(k.message,k.toString())}}var x=function(){function k(L,_,B){var h=this;D(this,k),this.sourceName=L,this.targetName=_,this.comObj=B,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=function(l){var u=l.data;if(u.targetName===h.sourceName){if(u.stream){h._processStreamMessage(u);return}if(u.callback){var y=u.callbackId,p=h.callbackCapabilities[y];if(!p)throw new Error("Cannot resolve callback ".concat(y));if(delete h.callbackCapabilities[y],u.callback===V.DATA)p.resolve(u.data);else if(u.callback===V.ERROR)p.reject(w(u.reason));else throw new Error("Unexpected callback case");return}var c=h.actionHandler[u.action];if(!c)throw new Error("Unknown action from worker: ".concat(u.action));if(u.callbackId){var b=h.sourceName,C=u.sourceName;new Promise(function(G){G(c(u.data))}).then(function(G){B.postMessage({sourceName:b,targetName:C,callback:V.DATA,callbackId:u.callbackId,data:G})},function(G){B.postMessage({sourceName:b,targetName:C,callback:V.ERROR,callbackId:u.callbackId,reason:w(G)})});return}if(u.streamId){h._createStreamSink(u);return}c(u.data)}},B.addEventListener("message",this._onComObjOnMessage)}return j(k,[{key:"on",value:function(_,B){var h=this.actionHandler;if(h[_])throw new Error('There is already an actionName called "'.concat(_,'"'));h[_]=B}},{key:"send",value:function(_,B,h){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:_,data:B},h)}},{key:"sendWithPromise",value:function(_,B,h){var l=this.callbackId++,u=(0,i.createPromiseCapability)();this.callbackCapabilities[l]=u;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:_,callbackId:l,data:B},h)}catch(y){u.reject(y)}return u.promise}},{key:"sendWithStream",value:function(_,B,h,l){var u=this,y=this.streamId++,p=this.sourceName,c=this.targetName,b=this.comObj;return new ReadableStream({start:function(G){var I=(0,i.createPromiseCapability)();return u.streamControllers[y]={controller:G,startCall:I,pullCall:null,cancelCall:null,isClosed:!1},b.postMessage({sourceName:p,targetName:c,action:_,streamId:y,data:B,desiredSize:G.desiredSize},l),I.promise},pull:function(G){var I=(0,i.createPromiseCapability)();return u.streamControllers[y].pullCall=I,b.postMessage({sourceName:p,targetName:c,stream:O.PULL,streamId:y,desiredSize:G.desiredSize}),I.promise},cancel:function(G){(0,i.assert)(G instanceof Error,"cancel must have a valid reason");var I=(0,i.createPromiseCapability)();return u.streamControllers[y].cancelCall=I,u.streamControllers[y].isClosed=!0,b.postMessage({sourceName:p,targetName:c,stream:O.CANCEL,streamId:y,reason:w(G)}),I.promise}},h)}},{key:"_createStreamSink",value:function(_){var B=_.streamId,h=this.sourceName,l=_.sourceName,u=this.comObj,y=this,p=this.actionHandler[_.action],c={enqueue:function(C){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,I=arguments.length>2?arguments[2]:void 0;if(!this.isCancelled){var $=this.desiredSize;this.desiredSize-=G,$>0&&this.desiredSize<=0&&(this.sinkCapability=(0,i.createPromiseCapability)(),this.ready=this.sinkCapability.promise),u.postMessage({sourceName:h,targetName:l,stream:O.ENQUEUE,streamId:B,chunk:C},I)}},close:function(){this.isCancelled||(this.isCancelled=!0,u.postMessage({sourceName:h,targetName:l,stream:O.CLOSE,streamId:B}),delete y.streamSinks[B])},error:function(C){(0,i.assert)(C instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,u.postMessage({sourceName:h,targetName:l,stream:O.ERROR,streamId:B,reason:w(C)}))},sinkCapability:(0,i.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:_.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[B]=c,new Promise(function(b){b(p(_.data,c))}).then(function(){u.postMessage({sourceName:h,targetName:l,stream:O.START_COMPLETE,streamId:B,success:!0})},function(b){u.postMessage({sourceName:h,targetName:l,stream:O.START_COMPLETE,streamId:B,reason:w(b)})})}},{key:"_processStreamMessage",value:function(_){var B=_.streamId,h=this.sourceName,l=_.sourceName,u=this.comObj,y=this.streamControllers[B],p=this.streamSinks[B];switch(_.stream){case O.START_COMPLETE:_.success?y.startCall.resolve():y.startCall.reject(w(_.reason));break;case O.PULL_COMPLETE:_.success?y.pullCall.resolve():y.pullCall.reject(w(_.reason));break;case O.PULL:if(!p){u.postMessage({sourceName:h,targetName:l,stream:O.PULL_COMPLETE,streamId:B,success:!0});break}p.desiredSize<=0&&_.desiredSize>0&&p.sinkCapability.resolve(),p.desiredSize=_.desiredSize,new Promise(function(c){c(p.onPull&&p.onPull())}).then(function(){u.postMessage({sourceName:h,targetName:l,stream:O.PULL_COMPLETE,streamId:B,success:!0})},function(c){u.postMessage({sourceName:h,targetName:l,stream:O.PULL_COMPLETE,streamId:B,reason:w(c)})});break;case O.ENQUEUE:if((0,i.assert)(y,"enqueue should have stream controller"),y.isClosed)break;y.controller.enqueue(_.chunk);break;case O.CLOSE:if((0,i.assert)(y,"close should have stream controller"),y.isClosed)break;y.isClosed=!0,y.controller.close(),this._deleteStreamController(y,B);break;case O.ERROR:(0,i.assert)(y,"error should have stream controller"),y.controller.error(w(_.reason)),this._deleteStreamController(y,B);break;case O.CANCEL_COMPLETE:_.success?y.cancelCall.resolve():y.cancelCall.reject(w(_.reason)),this._deleteStreamController(y,B);break;case O.CANCEL:if(!p)break;new Promise(function(c){c(p.onCancel&&p.onCancel(w(_.reason)))}).then(function(){u.postMessage({sourceName:h,targetName:l,stream:O.CANCEL_COMPLETE,streamId:B,success:!0})},function(c){u.postMessage({sourceName:h,targetName:l,stream:O.CANCEL_COMPLETE,streamId:B,reason:w(c)})}),p.sinkCapability.reject(w(_.reason)),p.isCancelled=!0,delete this.streamSinks[B];break;default:throw new Error("Unexpected stream case")}}},{key:"_deleteStreamController",value:function(){var L=S(r.default.mark(function B(h,l){return r.default.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,Promise.allSettled([h.startCall&&h.startCall.promise,h.pullCall&&h.pullCall.promise,h.cancelCall&&h.cancelCall.promise]);case 2:delete this.streamControllers[l];case 3:case"end":return y.stop()}},B,this)}));function _(B,h){return L.apply(this,arguments)}return _}()},{key:"destroy",value:function(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}]),k}();n.MessageHandler=x},(s,n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Metadata=void 0;var r=e(4);function i(L,_){if(!(L instanceof _))throw new TypeError("Cannot call a class as a function")}function f(L,_){for(var B=0;B<_.length;B++){var h=_[B];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(L,h.key,h)}}function m(L,_,B){return _&&f(L.prototype,_),B&&f(L,B),L}function S(L,_,B){D(L,_),_.set(L,B)}function D(L,_){if(_.has(L))throw new TypeError("Cannot initialize the same private elements twice on an object")}function M(L,_){var B=V(L,_,"get");return j(L,B)}function j(L,_){return _.get?_.get.call(L):_.value}function W(L,_,B){var h=V(L,_,"set");return O(L,h,B),B}function V(L,_,B){if(!_.has(L))throw new TypeError("attempted to "+B+" private field on non-instance");return _.get(L)}function O(L,_,B){if(_.set)_.set.call(L,B);else{if(!_.writable)throw new TypeError("attempted to set read only private field");_.value=B}}var w=new WeakMap,x=new WeakMap,k=function(){function L(_){var B=_.parsedData,h=_.rawData;i(this,L),S(this,w,{writable:!0,value:void 0}),S(this,x,{writable:!0,value:void 0}),W(this,w,B),W(this,x,h)}return m(L,[{key:"getRaw",value:function(){return M(this,x)}},{key:"get",value:function(B){var h;return(h=M(this,w).get(B))!==null&&h!==void 0?h:null}},{key:"getAll",value:function(){return(0,r.objectFromMap)(M(this,w))}},{key:"has",value:function(B){return M(this,w).has(B)}}]),L}();n.Metadata=k},(s,n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.OptionalContentConfig=void 0;var r=e(4);function i(V,O){var w=typeof Symbol!="undefined"&&V[Symbol.iterator]||V["@@iterator"];if(!w){if(Array.isArray(V)||(w=f(V))||O&&V&&typeof V.length=="number"){w&&(V=w);var x=0,k=function(){};return{s:k,n:function(){return x>=V.length?{done:!0}:{done:!1,value:V[x++]}},e:function(l){throw l},f:k}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var L=!0,_=!1,B;return{s:function(){w=w.call(V)},n:function(){var l=w.next();return L=l.done,l},e:function(l){_=!0,B=l},f:function(){try{!L&&w.return!=null&&w.return()}finally{if(_)throw B}}}}function f(V,O){if(!!V){if(typeof V=="string")return m(V,O);var w=Object.prototype.toString.call(V).slice(8,-1);if(w==="Object"&&V.constructor&&(w=V.constructor.name),w==="Map"||w==="Set")return Array.from(V);if(w==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w))return m(V,O)}}function m(V,O){(O==null||O>V.length)&&(O=V.length);for(var w=0,x=new Array(O);w<O;w++)x[w]=V[w];return x}function S(V,O){for(var w=0;w<O.length;w++){var x=O[w];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(V,x.key,x)}}function D(V,O,w){return O&&S(V.prototype,O),w&&S(V,w),V}function M(V,O){if(!(V instanceof O))throw new TypeError("Cannot call a class as a function")}var j=function V(O,w){M(this,V),this.visible=!0,this.name=O,this.intent=w},W=function(){function V(O){if(M(this,V),this.name=null,this.creator=null,this._order=null,this._groups=new Map,O!==null){this.name=O.name,this.creator=O.creator,this._order=O.order;var w=i(O.groups),x;try{for(w.s();!(x=w.n()).done;){var k=x.value;this._groups.set(k.id,new j(k.name,k.intent))}}catch(b){w.e(b)}finally{w.f()}if(O.baseState==="OFF"){var L=i(this._groups),_;try{for(L.s();!(_=L.n()).done;){var B=_.value;B.visible=!1}}catch(b){L.e(b)}finally{L.f()}}var h=i(O.on),l;try{for(h.s();!(l=h.n()).done;){var u=l.value;this._groups.get(u).visible=!0}}catch(b){h.e(b)}finally{h.f()}var y=i(O.off),p;try{for(y.s();!(p=y.n()).done;){var c=p.value;this._groups.get(c).visible=!1}}catch(b){y.e(b)}finally{y.f()}}}return D(V,[{key:"_evaluateVisibilityExpression",value:function(w){var x=w.length;if(x<2)return!0;for(var k=w[0],L=1;L<x;L++){var _=w[L],B=void 0;if(Array.isArray(_))B=this._evaluateVisibilityExpression(_);else if(this._groups.has(_))B=this._groups.get(_).visible;else return(0,r.warn)("Optional content group not found: ".concat(_)),!0;switch(k){case"And":if(!B)return!1;break;case"Or":if(B)return!0;break;case"Not":return!B;default:return!0}}return k==="And"}},{key:"isVisible",value:function(w){if(this._groups.size===0)return!0;if(!w)return(0,r.warn)("Optional content group not defined."),!0;if(w.type==="OCG")return this._groups.has(w.id)?this._groups.get(w.id).visible:((0,r.warn)("Optional content group not found: ".concat(w.id)),!0);if(w.type==="OCMD"){if(w.expression)return this._evaluateVisibilityExpression(w.expression);if(!w.policy||w.policy==="AnyOn"){var x=i(w.ids),k;try{for(x.s();!(k=x.n()).done;){var L=k.value;if(!this._groups.has(L))return(0,r.warn)("Optional content group not found: ".concat(L)),!0;if(this._groups.get(L).visible)return!0}}catch(C){x.e(C)}finally{x.f()}return!1}else if(w.policy==="AllOn"){var _=i(w.ids),B;try{for(_.s();!(B=_.n()).done;){var h=B.value;if(!this._groups.has(h))return(0,r.warn)("Optional content group not found: ".concat(h)),!0;if(!this._groups.get(h).visible)return!1}}catch(C){_.e(C)}finally{_.f()}return!0}else if(w.policy==="AnyOff"){var l=i(w.ids),u;try{for(l.s();!(u=l.n()).done;){var y=u.value;if(!this._groups.has(y))return(0,r.warn)("Optional content group not found: ".concat(y)),!0;if(!this._groups.get(y).visible)return!0}}catch(C){l.e(C)}finally{l.f()}return!1}else if(w.policy==="AllOff"){var p=i(w.ids),c;try{for(p.s();!(c=p.n()).done;){var b=c.value;if(!this._groups.has(b))return(0,r.warn)("Optional content group not found: ".concat(b)),!0;if(this._groups.get(b).visible)return!1}}catch(C){p.e(C)}finally{p.f()}return!0}return(0,r.warn)("Unknown optional content policy ".concat(w.policy,".")),!0}return(0,r.warn)("Unknown group type ".concat(w.type,".")),!0}},{key:"setVisibility",value:function(w){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!this._groups.has(w)){(0,r.warn)("Optional content group not found: ".concat(w));return}this._groups.get(w).visible=!!x}},{key:"getOrder",value:function(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}},{key:"getGroups",value:function(){return this._groups.size>0?(0,r.objectFromMap)(this._groups):null}},{key:"getGroup",value:function(w){return this._groups.get(w)||null}}]),V}();n.OptionalContentConfig=W},(s,n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PDFDataTransportStream=void 0;var r=m(e(2)),i=e(4),f=e(1);function m(_){return _&&_.__esModule?_:{default:_}}function S(_,B,h,l,u,y,p){try{var c=_[y](p),b=c.value}catch(C){h(C);return}c.done?B(b):Promise.resolve(b).then(l,u)}function D(_){return function(){var B=this,h=arguments;return new Promise(function(l,u){var y=_.apply(B,h);function p(b){S(y,l,u,p,c,"next",b)}function c(b){S(y,l,u,p,c,"throw",b)}p(void 0)})}}function M(_,B){var h=typeof Symbol!="undefined"&&_[Symbol.iterator]||_["@@iterator"];if(!h){if(Array.isArray(_)||(h=j(_))||B&&_&&typeof _.length=="number"){h&&(_=h);var l=0,u=function(){};return{s:u,n:function(){return l>=_.length?{done:!0}:{done:!1,value:_[l++]}},e:function(C){throw C},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var y=!0,p=!1,c;return{s:function(){h=h.call(_)},n:function(){var C=h.next();return y=C.done,C},e:function(C){p=!0,c=C},f:function(){try{!y&&h.return!=null&&h.return()}finally{if(p)throw c}}}}function j(_,B){if(!!_){if(typeof _=="string")return W(_,B);var h=Object.prototype.toString.call(_).slice(8,-1);if(h==="Object"&&_.constructor&&(h=_.constructor.name),h==="Map"||h==="Set")return Array.from(_);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return W(_,B)}}function W(_,B){(B==null||B>_.length)&&(B=_.length);for(var h=0,l=new Array(B);h<B;h++)l[h]=_[h];return l}function V(_,B){if(!(_ instanceof B))throw new TypeError("Cannot call a class as a function")}function O(_,B){for(var h=0;h<B.length;h++){var l=B[h];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(_,l.key,l)}}function w(_,B,h){return B&&O(_.prototype,B),h&&O(_,h),_}var x=function(){function _(B,h){var l=this;V(this,_),(0,i.assert)(h,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=B.progressiveDone||!1,this._contentDispositionFilename=B.contentDispositionFilename||null;var u=B.initialData;if((u==null?void 0:u.length)>0){var y=new Uint8Array(u).buffer;this._queuedChunks.push(y)}this._pdfDataRangeTransport=h,this._isStreamingSupported=!B.disableStream,this._isRangeSupported=!B.disableRange,this._contentLength=B.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener(function(p,c){l._onReceiveData({begin:p,chunk:c})}),this._pdfDataRangeTransport.addProgressListener(function(p,c){l._onProgress({loaded:p,total:c})}),this._pdfDataRangeTransport.addProgressiveReadListener(function(p){l._onReceiveData({chunk:p})}),this._pdfDataRangeTransport.addProgressiveDoneListener(function(){l._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}return w(_,[{key:"_onReceiveData",value:function(h){var l=new Uint8Array(h.chunk).buffer;if(h.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(l):this._queuedChunks.push(l);else{var u=this._rangeReaders.some(function(y){return y._begin!==h.begin?!1:(y._enqueue(l),!0)});(0,i.assert)(u,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}},{key:"_progressiveDataLength",get:function(){var h,l;return(h=(l=this._fullRequestReader)===null||l===void 0?void 0:l._loaded)!==null&&h!==void 0?h:0}},{key:"_onProgress",value:function(h){if(h.total===void 0){var l=this._rangeReaders[0];l!=null&&l.onProgress&&l.onProgress({loaded:h.loaded})}else{var u=this._fullRequestReader;u!=null&&u.onProgress&&u.onProgress({loaded:h.loaded,total:h.total})}}},{key:"_onProgressiveDone",value:function(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}},{key:"_removeRangeReader",value:function(h){var l=this._rangeReaders.indexOf(h);l>=0&&this._rangeReaders.splice(l,1)}},{key:"getFullReader",value:function(){(0,i.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");var h=this._queuedChunks;return this._queuedChunks=null,new k(this,h,this._progressiveDone,this._contentDispositionFilename)}},{key:"getRangeReader",value:function(h,l){if(l<=this._progressiveDataLength)return null;var u=new L(this,h,l);return this._pdfDataRangeTransport.requestDataRange(h,l),this._rangeReaders.push(u),u}},{key:"cancelAllRequests",value:function(h){this._fullRequestReader&&this._fullRequestReader.cancel(h);var l=M(this._rangeReaders.slice(0)),u;try{for(l.s();!(u=l.n()).done;){var y=u.value;y.cancel(h)}}catch(p){l.e(p)}finally{l.f()}this._pdfDataRangeTransport.abort()}}]),_}();n.PDFDataTransportStream=x;var k=function(){function _(B,h){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;V(this,_),this._stream=B,this._done=l||!1,this._filename=(0,f.isPdfFile)(u)?u:null,this._queuedChunks=h||[],this._loaded=0;var y=M(this._queuedChunks),p;try{for(y.s();!(p=y.n()).done;){var c=p.value;this._loaded+=c.byteLength}}catch(b){y.e(b)}finally{y.f()}this._requests=[],this._headersReady=Promise.resolve(),B._fullRequestReader=this,this.onProgress=null}return w(_,[{key:"_enqueue",value:function(h){if(!this._done){if(this._requests.length>0){var l=this._requests.shift();l.resolve({value:h,done:!1})}else this._queuedChunks.push(h);this._loaded+=h.byteLength}}},{key:"headersReady",get:function(){return this._headersReady}},{key:"filename",get:function(){return this._filename}},{key:"isRangeSupported",get:function(){return this._stream._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._stream._isStreamingSupported}},{key:"contentLength",get:function(){return this._stream._contentLength}},{key:"read",value:function(){var B=D(r.default.mark(function l(){var u,y;return r.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!(this._queuedChunks.length>0)){c.next=3;break}return u=this._queuedChunks.shift(),c.abrupt("return",{value:u,done:!1});case 3:if(!this._done){c.next=5;break}return c.abrupt("return",{value:void 0,done:!0});case 5:return y=(0,i.createPromiseCapability)(),this._requests.push(y),c.abrupt("return",y.promise);case 8:case"end":return c.stop()}},l,this)}));function h(){return B.apply(this,arguments)}return h}()},{key:"cancel",value:function(h){this._done=!0;var l=M(this._requests),u;try{for(l.s();!(u=l.n()).done;){var y=u.value;y.resolve({value:void 0,done:!0})}}catch(p){l.e(p)}finally{l.f()}this._requests.length=0}},{key:"progressiveDone",value:function(){this._done||(this._done=!0)}}]),_}(),L=function(){function _(B,h,l){V(this,_),this._stream=B,this._begin=h,this._end=l,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}return w(_,[{key:"_enqueue",value:function(h){if(!this._done){if(this._requests.length===0)this._queuedChunk=h;else{var l=this._requests.shift();l.resolve({value:h,done:!1});var u=M(this._requests),y;try{for(u.s();!(y=u.n()).done;){var p=y.value;p.resolve({value:void 0,done:!0})}}catch(c){u.e(c)}finally{u.f()}this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}},{key:"isStreamingSupported",get:function(){return!1}},{key:"read",value:function(){var B=D(r.default.mark(function l(){var u,y;return r.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!this._queuedChunk){c.next=4;break}return u=this._queuedChunk,this._queuedChunk=null,c.abrupt("return",{value:u,done:!1});case 4:if(!this._done){c.next=6;break}return c.abrupt("return",{value:void 0,done:!0});case 6:return y=(0,i.createPromiseCapability)(),this._requests.push(y),c.abrupt("return",y.promise);case 9:case"end":return c.stop()}},l,this)}));function h(){return B.apply(this,arguments)}return h}()},{key:"cancel",value:function(h){this._done=!0;var l=M(this._requests),u;try{for(l.s();!(u=l.n()).done;){var y=u.value;y.resolve({value:void 0,done:!0})}}catch(p){l.e(p)}finally{l.f()}this._requests.length=0,this._stream._removeRangeReader(this)}}]),_}()},(s,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.XfaText=void 0;function e(M,j){var W=typeof Symbol!="undefined"&&M[Symbol.iterator]||M["@@iterator"];if(!W){if(Array.isArray(M)||(W=r(M))||j&&M&&typeof M.length=="number"){W&&(M=W);var V=0,O=function(){};return{s:O,n:function(){return V>=M.length?{done:!0}:{done:!1,value:M[V++]}},e:function(_){throw _},f:O}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var w=!0,x=!1,k;return{s:function(){W=W.call(M)},n:function(){var _=W.next();return w=_.done,_},e:function(_){x=!0,k=_},f:function(){try{!w&&W.return!=null&&W.return()}finally{if(x)throw k}}}}function r(M,j){if(!!M){if(typeof M=="string")return i(M,j);var W=Object.prototype.toString.call(M).slice(8,-1);if(W==="Object"&&M.constructor&&(W=M.constructor.name),W==="Map"||W==="Set")return Array.from(M);if(W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W))return i(M,j)}}function i(M,j){(j==null||j>M.length)&&(j=M.length);for(var W=0,V=new Array(j);W<j;W++)V[W]=M[W];return V}function f(M,j){if(!(M instanceof j))throw new TypeError("Cannot call a class as a function")}function m(M,j){for(var W=0;W<j.length;W++){var V=j[W];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(M,V.key,V)}}function S(M,j,W){return j&&m(M.prototype,j),W&&m(M,W),M}var D=function(){function M(){f(this,M)}return S(M,null,[{key:"textContent",value:function(W){var V=[],O={items:V,styles:Object.create(null)};function w(x){var k;if(!!x){var L=null,_=x.name;if(_==="#text")L=x.value;else if(M.shouldBuildText(_))x!=null&&(k=x.attributes)!==null&&k!==void 0&&k.textContent?L=x.attributes.textContent:x.value&&(L=x.value);else return;if(L!==null&&V.push({str:L}),!!x.children){var B=e(x.children),h;try{for(B.s();!(h=B.n()).done;){var l=h.value;w(l)}}catch(u){B.e(u)}finally{B.f()}}}}return w(W),O}},{key:"shouldBuildText",value:function(W){return!(W==="textarea"||W==="input"||W==="option"||W==="select")}}]),M}();n.XfaText=D},(s,n,e)=>{function r(fe){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?r=function(U){return typeof U}:r=function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},r(fe)}Object.defineProperty(n,"__esModule",{value:!0}),n.AnnotationLayer=void 0;var i=e(4),f=e(1),m=e(139),S=e(149),D=e(150);function M(fe,de,U){return j(fe,de),U}function j(fe,de){if(fe!==de)throw new TypeError("Private static access of wrong provenance")}function W(fe,de,U){return typeof Reflect!="undefined"&&Reflect.get?W=Reflect.get:W=function(K,oe,ne){var Q=V(K,oe);if(!!Q){var he=Object.getOwnPropertyDescriptor(Q,oe);return he.get?he.get.call(ne):he.value}},W(fe,de,U||fe)}function V(fe,de){for(;!Object.prototype.hasOwnProperty.call(fe,de)&&(fe=p(fe),fe!==null););return fe}function O(fe,de,U){return de in fe?Object.defineProperty(fe,de,{value:U,enumerable:!0,configurable:!0,writable:!0}):fe[de]=U,fe}function w(fe){return L(fe)||k(fe)||G(fe)||x()}function x(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k(fe){if(typeof Symbol!="undefined"&&fe[Symbol.iterator]!=null||fe["@@iterator"]!=null)return Array.from(fe)}function L(fe){if(Array.isArray(fe))return I(fe)}function _(fe,de){if(typeof de!="function"&&de!==null)throw new TypeError("Super expression must either be null or a function");fe.prototype=Object.create(de&&de.prototype,{constructor:{value:fe,writable:!0,configurable:!0}}),de&&B(fe,de)}function B(fe,de){return B=Object.setPrototypeOf||function(te,K){return te.__proto__=K,te},B(fe,de)}function h(fe){var de=y();return function(){var te=p(fe),K;if(de){var oe=p(this).constructor;K=Reflect.construct(te,arguments,oe)}else K=te.apply(this,arguments);return l(this,K)}}function l(fe,de){if(de&&(r(de)==="object"||typeof de=="function"))return de;if(de!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return u(fe)}function u(fe){if(fe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return fe}function y(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function p(fe){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)},p(fe)}function c(fe,de){var U=typeof Symbol!="undefined"&&fe[Symbol.iterator]||fe["@@iterator"];if(!U){if(Array.isArray(fe)||(U=G(fe))||de&&fe&&typeof fe.length=="number"){U&&(fe=U);var te=0,K=function(){};return{s:K,n:function(){return te>=fe.length?{done:!0}:{done:!1,value:fe[te++]}},e:function(ce){throw ce},f:K}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var oe=!0,ne=!1,Q;return{s:function(){U=U.call(fe)},n:function(){var ce=U.next();return oe=ce.done,ce},e:function(ce){ne=!0,Q=ce},f:function(){try{!oe&&U.return!=null&&U.return()}finally{if(ne)throw Q}}}}function b(fe,de){return ee(fe)||$(fe,de)||G(fe,de)||C()}function C(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G(fe,de){if(!!fe){if(typeof fe=="string")return I(fe,de);var U=Object.prototype.toString.call(fe).slice(8,-1);if(U==="Object"&&fe.constructor&&(U=fe.constructor.name),U==="Map"||U==="Set")return Array.from(fe);if(U==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(U))return I(fe,de)}}function I(fe,de){(de==null||de>fe.length)&&(de=fe.length);for(var U=0,te=new Array(de);U<de;U++)te[U]=fe[U];return te}function $(fe,de){var U=fe==null?null:typeof Symbol!="undefined"&&fe[Symbol.iterator]||fe["@@iterator"];if(U!=null){var te=[],K=!0,oe=!1,ne,Q;try{for(U=U.call(fe);!(K=(ne=U.next()).done)&&(te.push(ne.value),!(de&&te.length===de));K=!0);}catch(he){oe=!0,Q=he}finally{try{!K&&U.return!=null&&U.return()}finally{if(oe)throw Q}}return te}}function ee(fe){if(Array.isArray(fe))return fe}function Z(fe,de){if(!(fe instanceof de))throw new TypeError("Cannot call a class as a function")}function ie(fe,de){for(var U=0;U<de.length;U++){var te=de[U];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(fe,te.key,te)}}function H(fe,de,U){return de&&ie(fe.prototype,de),U&&ie(fe,U),fe}var X=1e3,P=new WeakSet,v=function(){function fe(){Z(this,fe)}return H(fe,null,[{key:"create",value:function(U){var te=U.data.annotationType;switch(te){case i.AnnotationType.LINK:return new E(U);case i.AnnotationType.TEXT:return new q(U);case i.AnnotationType.WIDGET:var K=U.data.fieldType;switch(K){case"Tx":return new Y(U);case"Btn":return U.data.radioButton?new ke(U):U.data.checkBox?new be(U):new we(U);case"Ch":return new z(U)}return new re(U);case i.AnnotationType.POPUP:return new R(U);case i.AnnotationType.FREETEXT:return new o(U);case i.AnnotationType.LINE:return new g(U);case i.AnnotationType.SQUARE:return new F(U);case i.AnnotationType.CIRCLE:return new N(U);case i.AnnotationType.POLYLINE:return new J(U);case i.AnnotationType.CARET:return new ve(U);case i.AnnotationType.INK:return new ye(U);case i.AnnotationType.POLYGON:return new le(U);case i.AnnotationType.HIGHLIGHT:return new pe(U);case i.AnnotationType.UNDERLINE:return new Ae(U);case i.AnnotationType.SQUIGGLY:return new Te(U);case i.AnnotationType.STRIKEOUT:return new Ee(U);case i.AnnotationType.STAMP:return new Fe(U);case i.AnnotationType.FILEATTACHMENT:return new Ie(U);default:return new A(U)}}}]),fe}(),A=function(){function fe(de){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},te=U.isRenderable,K=te===void 0?!1:te,oe=U.ignoreBorder,ne=oe===void 0?!1:oe,Q=U.createQuadrilaterals,he=Q===void 0?!1:Q;Z(this,fe),this.isRenderable=K,this.data=de.data,this.layer=de.layer,this.page=de.page,this.viewport=de.viewport,this.linkService=de.linkService,this.downloadManager=de.downloadManager,this.imageResourcesPath=de.imageResourcesPath,this.renderForms=de.renderForms,this.svgFactory=de.svgFactory,this.annotationStorage=de.annotationStorage,this.enableScripting=de.enableScripting,this.hasJSActions=de.hasJSActions,this._fieldObjects=de.fieldObjects,this._mouseState=de.mouseState,K&&(this.container=this._createContainer(ne)),he&&(this.quadrilaterals=this._createQuadrilaterals(ne))}return H(fe,[{key:"_createContainer",value:function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,te=this.data,K=this.page,oe=this.viewport,ne=document.createElement("section"),Q=te.rect[2]-te.rect[0],he=te.rect[3]-te.rect[1];ne.setAttribute("data-annotation-id",te.id);var ce=i.Util.normalizeRect([te.rect[0],K.view[3]-te.rect[1]+K.view[1],te.rect[2],K.view[3]-te.rect[3]+K.view[1]]);if(te.hasOwnCanvas){var Se=oe.transform.slice(),Re=i.Util.singularValueDecompose2dScale(Se),De=b(Re,2),Le=De[0],_e=De[1];Q=Math.ceil(Q*Le),he=Math.ceil(he*_e),ce[0]*=Le,ce[1]*=_e;for(var Ge=0;Ge<4;Ge++)Se[Ge]=Math.sign(Se[Ge]);ne.style.transform="matrix(".concat(Se.join(","),")")}else ne.style.transform="matrix(".concat(oe.transform.join(","),")");if(ne.style.transformOrigin="".concat(-ce[0],"px ").concat(-ce[1],"px"),!U&&te.borderStyle.width>0){ne.style.borderWidth="".concat(te.borderStyle.width,"px"),te.borderStyle.style!==i.AnnotationBorderStyleType.UNDERLINE&&(Q-=2*te.borderStyle.width,he-=2*te.borderStyle.width);var Oe=te.borderStyle.horizontalCornerRadius,xe=te.borderStyle.verticalCornerRadius;if(Oe>0||xe>0){var Be="".concat(Oe,"px / ").concat(xe,"px");ne.style.borderRadius=Be}switch(te.borderStyle.style){case i.AnnotationBorderStyleType.SOLID:ne.style.borderStyle="solid";break;case i.AnnotationBorderStyleType.DASHED:ne.style.borderStyle="dashed";break;case i.AnnotationBorderStyleType.BEVELED:(0,i.warn)("Unimplemented border style: beveled");break;case i.AnnotationBorderStyleType.INSET:(0,i.warn)("Unimplemented border style: inset");break;case i.AnnotationBorderStyleType.UNDERLINE:ne.style.borderBottomStyle="solid";break}var Ne=te.borderColor||te.color||null;Ne?ne.style.borderColor=i.Util.makeHexColor(te.color[0]|0,te.color[1]|0,te.color[2]|0):ne.style.borderWidth=0}return ne.style.left="".concat(ce[0],"px"),ne.style.top="".concat(ce[1],"px"),te.hasOwnCanvas?ne.style.width=ne.style.height="auto":(ne.style.width="".concat(Q,"px"),ne.style.height="".concat(he,"px")),ne}},{key:"_createQuadrilaterals",value:function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.data.quadPoints)return null;var te=[],K=this.data.rect,oe=c(this.data.quadPoints),ne;try{for(oe.s();!(ne=oe.n()).done;){var Q=ne.value;this.data.rect=[Q[2].x,Q[2].y,Q[1].x,Q[1].y],te.push(this._createContainer(U))}}catch(he){oe.e(he)}finally{oe.f()}return this.data.rect=K,te}},{key:"_createPopup",value:function(U,te){var K=this.container;this.quadrilaterals&&(U=U||this.quadrilaterals,K=this.quadrilaterals[0]),U||(U=document.createElement("div"),U.style.height=K.style.height,U.style.width=K.style.width,K.appendChild(U));var oe=new d({container:K,trigger:U,color:te.color,titleObj:te.titleObj,modificationDate:te.modificationDate,contentsObj:te.contentsObj,richText:te.richText,hideWrapper:!0}),ne=oe.render();ne.style.left=K.style.width,K.appendChild(ne)}},{key:"_renderQuadrilaterals",value:function(U){var te=c(this.quadrilaterals),K;try{for(te.s();!(K=te.n()).done;){var oe=K.value;oe.className=U}}catch(ne){te.e(ne)}finally{te.f()}return this.quadrilaterals}},{key:"render",value:function(){(0,i.unreachable)("Abstract method `AnnotationElement.render` called")}},{key:"_getElementsByName",value:function(U){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,K=[];if(this._fieldObjects){var oe=this._fieldObjects[U];if(oe){var ne=c(oe),Q;try{for(ne.s();!(Q=ne.n()).done;){var he=Q.value,ce=he.page,Se=he.id,Re=he.exportValues;if(ce!==-1&&Se!==te){var De=typeof Re=="string"?Re:null,Le=document.getElementById(Se);if(Le&&!P.has(Le)){(0,i.warn)("_getElementsByName - element not allowed: ".concat(Se));continue}K.push({id:Se,exportValue:De,domElement:Le})}}}catch(Ne){ne.e(Ne)}finally{ne.f()}}return K}var _e=c(document.getElementsByName(U)),Ge;try{for(_e.s();!(Ge=_e.n()).done;){var Oe=Ge.value,xe=Oe.id,Be=Oe.exportValue;xe!==te&&(!P.has(Oe)||K.push({id:xe,exportValue:Be,domElement:Oe}))}}catch(Ne){_e.e(Ne)}finally{_e.f()}return K}}],[{key:"platform",get:function(){var U=typeof navigator!="undefined"?navigator.platform:"";return(0,i.shadow)(this,"platform",{isWin:U.includes("Win"),isMac:U.includes("Mac")})}}]),fe}(),E=function(fe){_(U,fe);var de=h(U);function U(te){var K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Z(this,U);var oe=!!(te.data.url||te.data.dest||te.data.action||te.data.isTooltipOnly||te.data.resetForm||te.data.actions&&(te.data.actions.Action||te.data.actions["Mouse Up"]||te.data.actions["Mouse Down"]));return de.call(this,te,{isRenderable:oe,ignoreBorder:!!(K!=null&&K.ignoreBorder),createQuadrilaterals:!0})}return H(U,[{key:"render",value:function(){var K=this.data,oe=this.linkService,ne=document.createElement("a");if(K.url){var Q;oe.addLinkAttributes||(0,i.warn)("LinkAnnotationElement.render - missing `addLinkAttributes`-method on the `linkService`-instance."),(Q=oe.addLinkAttributes)===null||Q===void 0||Q.call(oe,ne,K.url,K.newWindow)}else if(K.action)this._bindNamedAction(ne,K.action);else if(K.dest)this._bindLink(ne,K.dest);else{var he=!1;K.actions&&(K.actions.Action||K.actions["Mouse Up"]||K.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(he=!0,this._bindJSAction(ne,K)),K.resetForm?this._bindResetFormAction(ne,K.resetForm):he||this._bindLink(ne,"")}return this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map(function(ce,Se){var Re=Se===0?ne:ne.cloneNode();return ce.appendChild(Re),ce}):(this.container.className="linkAnnotation",this.container.appendChild(ne),this.container)}},{key:"_bindLink",value:function(K,oe){var ne=this;K.href=this.linkService.getDestinationHash(oe),K.onclick=function(){return oe&&ne.linkService.goToDestination(oe),!1},(oe||oe==="")&&(K.className="internalLink")}},{key:"_bindNamedAction",value:function(K,oe){var ne=this;K.href=this.linkService.getAnchorUrl(""),K.onclick=function(){return ne.linkService.executeNamedAction(oe),!1},K.className="internalLink"}},{key:"_bindJSAction",value:function(K,oe){var ne=this;K.href=this.linkService.getAnchorUrl("");for(var Q=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]),he=function(){var Le=Se[ce],_e=Q.get(Le);if(!_e)return"continue";K[_e]=function(){var Ge;return(Ge=ne.linkService.eventBus)===null||Ge===void 0||Ge.dispatch("dispatcheventinsandbox",{source:ne,detail:{id:oe.id,name:Le}}),!1}},ce=0,Se=Object.keys(oe.actions);ce<Se.length;ce++)var Re=he();K.onclick||(K.onclick=function(){return!1}),K.className="internalLink"}},{key:"_bindResetFormAction",value:function(K,oe){var ne=this,Q=K.onclick;if(Q||(K.href=this.linkService.getAnchorUrl("")),K.className="internalLink",!this._fieldObjects){(0,i.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),Q||(K.onclick=function(){return!1});return}K.onclick=function(){Q&&Q();var he=oe.fields,ce=oe.refs,Se=oe.include,Re=[];if(he.length!==0||ce.length!==0){var De=new Set(ce),Le=c(he),_e;try{for(Le.s();!(_e=Le.n()).done;){var Ge=_e.value,Oe=ne._fieldObjects[Ge]||[],xe=c(Oe),Be;try{for(xe.s();!(Be=xe.n()).done;){var Ne=Be.value.id;De.add(Ne)}}catch(ze){xe.e(ze)}finally{xe.f()}}}catch(ze){Le.e(ze)}finally{Le.f()}for(var Ve=0,Xe=Object.values(ne._fieldObjects);Ve<Xe.length;Ve++){var Je=Xe[Ve],rt=c(Je),it;try{for(rt.s();!(it=rt.n()).done;){var yt=it.value;De.has(yt.id)===Se&&Re.push(yt)}}catch(ze){rt.e(ze)}finally{rt.f()}}}else for(var ht=0,Rt=Object.values(ne._fieldObjects);ht<Rt.length;ht++){var Yt=Rt[ht];Re.push.apply(Re,w(Yt))}for(var Ot=ne.annotationStorage,xt=[],Ft=0,Xt=Re;Ft<Xt.length;Ft++){var At=Xt[Ft],wt=At.id;switch(xt.push(wt),At.type){case"text":{var ue=At.defaultValue||"";Ot.setValue(wt,{value:ue,valueAsString:ue});break}case"checkbox":case"radiobutton":{var Pe=At.defaultValue===At.exportValues;Ot.setValue(wt,{value:Pe});break}case"combobox":case"listbox":{var se=At.defaultValue||"";Ot.setValue(wt,{value:se});break}default:continue}var ge=document.getElementById(wt);!ge||!P.has(ge)||ge.dispatchEvent(new Event("resetform"))}if(ne.enableScripting){var Ue;(Ue=ne.linkService.eventBus)===null||Ue===void 0||Ue.dispatch("dispatcheventinsandbox",{source:ne,detail:{id:"app",ids:xt,name:"ResetForm"}})}return!1}}}]),U}(A),q=function(fe){_(U,fe);var de=h(U);function U(te){var K,oe,ne;Z(this,U);var Q=!!(te.data.hasPopup||(K=te.data.titleObj)!==null&&K!==void 0&&K.str||(oe=te.data.contentsObj)!==null&&oe!==void 0&&oe.str||(ne=te.data.richText)!==null&&ne!==void 0&&ne.str);return de.call(this,te,{isRenderable:Q})}return H(U,[{key:"render",value:function(){this.container.className="textAnnotation";var K=document.createElement("img");return K.style.height=this.container.style.height,K.style.width=this.container.style.width,K.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",K.alt="[{{type}} Annotation]",K.dataset.l10nId="text_annotation_type",K.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(K,this.data),this.container.appendChild(K),this.container}}]),U}(A),re=function(fe){_(U,fe);var de=h(U);function U(){return Z(this,U),de.apply(this,arguments)}return H(U,[{key:"render",value:function(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}},{key:"_getKeyModifier",value:function(K){var oe=A.platform,ne=oe.isWin,Q=oe.isMac;return ne&&K.ctrlKey||Q&&K.metaKey}},{key:"_setEventListener",value:function(K,oe,ne,Q){var he=this;oe.includes("mouse")?K.addEventListener(oe,function(ce){var Se;(Se=he.linkService.eventBus)===null||Se===void 0||Se.dispatch("dispatcheventinsandbox",{source:he,detail:{id:he.data.id,name:ne,value:Q(ce),shift:ce.shiftKey,modifier:he._getKeyModifier(ce)}})}):K.addEventListener(oe,function(ce){var Se;(Se=he.linkService.eventBus)===null||Se===void 0||Se.dispatch("dispatcheventinsandbox",{source:he,detail:{id:he.data.id,name:ne,value:ce.target.checked}})})}},{key:"_setEventListeners",value:function(K,oe,ne){var Q=c(oe),he;try{for(Q.s();!(he=Q.n()).done;){var ce,Se=b(he.value,2),Re=Se[0],De=Se[1];(De==="Action"||(ce=this.data.actions)!==null&&ce!==void 0&&ce[De])&&this._setEventListener(K,Re,De,ne)}}catch(Le){Q.e(Le)}finally{Q.f()}}},{key:"_setBackgroundColor",value:function(K){var oe=this.data.backgroundColor||null;K.style.backgroundColor=oe===null?"transparent":i.Util.makeHexColor(oe[0],oe[1],oe[2])}},{key:"_dispatchEventFromSandbox",value:function(K,oe){for(var ne=this,Q=function(_e,Ge,Oe){var xe=Oe.detail[_e];Oe.target.style[Ge]=S.ColorConverters["".concat(xe[0],"_HTML")](xe.slice(1))},he={display:function(_e){var Ge=_e.detail.display%2===1;_e.target.style.visibility=Ge?"hidden":"visible",ne.annotationStorage.setValue(ne.data.id,{hidden:Ge,print:_e.detail.display===0||_e.detail.display===3})},print:function(_e){ne.annotationStorage.setValue(ne.data.id,{print:_e.detail.print})},hidden:function(_e){_e.target.style.visibility=_e.detail.hidden?"hidden":"visible",ne.annotationStorage.setValue(ne.data.id,{hidden:_e.detail.hidden})},focus:function(_e){setTimeout(function(){return _e.target.focus({preventScroll:!1})},0)},userName:function(_e){_e.target.title=_e.detail.userName},readonly:function(_e){_e.detail.readonly?_e.target.setAttribute("readonly",""):_e.target.removeAttribute("readonly")},required:function(_e){_e.detail.required?_e.target.setAttribute("required",""):_e.target.removeAttribute("required")},bgColor:function(_e){Q("bgColor","backgroundColor",_e)},fillColor:function(_e){Q("fillColor","backgroundColor",_e)},fgColor:function(_e){Q("fgColor","color",_e)},textColor:function(_e){Q("textColor","color",_e)},borderColor:function(_e){Q("borderColor","borderColor",_e)},strokeColor:function(_e){Q("strokeColor","borderColor",_e)}},ce=0,Se=Object.keys(oe.detail);ce<Se.length;ce++){var Re=Se[ce],De=K[Re]||he[Re];De&&De(oe)}}}]),U}(A),Y=function(fe){_(U,fe);var de=h(U);function U(te){Z(this,U);var K=te.renderForms||!te.data.hasAppearance&&!!te.data.fieldValue;return de.call(this,te,{isRenderable:K})}return H(U,[{key:"setPropertyOnSiblings",value:function(K,oe,ne,Q){var he=this.annotationStorage,ce=c(this._getElementsByName(K.name,K.id)),Se;try{for(ce.s();!(Se=ce.n()).done;){var Re=Se.value;Re.domElement&&(Re.domElement[oe]=ne),he.setValue(Re.id,O({},Q,ne))}}catch(De){ce.e(De)}finally{ce.f()}}},{key:"render",value:function(){var K=this,oe=this.annotationStorage,ne=this.data.id;this.container.className="textWidgetAnnotation";var Q=null;if(this.renderForms){var he=oe.getValue(ne,{value:this.data.fieldValue,valueAsString:this.data.fieldValue}),ce=he.valueAsString||he.value||"",Se={userValue:null,formattedValue:null,beforeInputSelectionRange:null,beforeInputValue:null};this.data.multiLine?(Q=document.createElement("textarea"),Q.textContent=ce):(Q=document.createElement("input"),Q.type="text",Q.setAttribute("value",ce)),P.add(Q),Q.disabled=this.data.readOnly,Q.name=this.data.fieldName,Q.tabIndex=X,Se.userValue=ce,Q.setAttribute("id",ne),Q.addEventListener("input",function(Oe){oe.setValue(ne,{value:Oe.target.value}),K.setPropertyOnSiblings(Q,"value",Oe.target.value,"value")}),Q.addEventListener("resetform",function(Oe){var xe=K.data.defaultFieldValue||"";Q.value=Se.userValue=xe,delete Se.formattedValue});var Re=function(xe){Se.formattedValue&&(xe.target.value=Se.formattedValue),xe.target.scrollLeft=0,Se.beforeInputSelectionRange=null};if(this.enableScripting&&this.hasJSActions){var De;Q.addEventListener("focus",function(Oe){Se.userValue&&(Oe.target.value=Se.userValue)}),Q.addEventListener("updatefromsandbox",function(Oe){var xe={value:function(Ne){Se.userValue=Ne.detail.value||"",oe.setValue(ne,{value:Se.userValue.toString()}),Se.formattedValue||(Ne.target.value=Se.userValue)},valueAsString:function(Ne){Se.formattedValue=Ne.detail.valueAsString||"",Ne.target!==document.activeElement&&(Ne.target.value=Se.formattedValue),oe.setValue(ne,{formattedValue:Se.formattedValue})},selRange:function(Ne){var Ve=b(Ne.detail.selRange,2),Xe=Ve[0],Je=Ve[1];Xe>=0&&Je<Ne.target.value.length&&Ne.target.setSelectionRange(Xe,Je)}};K._dispatchEventFromSandbox(xe,Oe)}),Q.addEventListener("keydown",function(Oe){var xe;Se.beforeInputValue=Oe.target.value;var Be=-1;Oe.key==="Escape"?Be=0:Oe.key==="Enter"?Be=2:Oe.key==="Tab"&&(Be=3),Be!==-1&&(Se.userValue=Oe.target.value,(xe=K.linkService.eventBus)===null||xe===void 0||xe.dispatch("dispatcheventinsandbox",{source:K,detail:{id:ne,name:"Keystroke",value:Oe.target.value,willCommit:!0,commitKey:Be,selStart:Oe.target.selectionStart,selEnd:Oe.target.selectionEnd}}))});var Le=Re;Re=null,Q.addEventListener("blur",function(Oe){if(K._mouseState.isDown){var xe;Se.userValue=Oe.target.value,(xe=K.linkService.eventBus)===null||xe===void 0||xe.dispatch("dispatcheventinsandbox",{source:K,detail:{id:ne,name:"Keystroke",value:Oe.target.value,willCommit:!0,commitKey:1,selStart:Oe.target.selectionStart,selEnd:Oe.target.selectionEnd}})}Le(Oe)}),Q.addEventListener("mousedown",function(Oe){Se.beforeInputValue=Oe.target.value,Se.beforeInputSelectionRange=null}),Q.addEventListener("keyup",function(Oe){Oe.target.selectionStart===Oe.target.selectionEnd&&(Se.beforeInputSelectionRange=null)}),Q.addEventListener("select",function(Oe){Se.beforeInputSelectionRange=[Oe.target.selectionStart,Oe.target.selectionEnd]}),(De=this.data.actions)!==null&&De!==void 0&&De.Keystroke&&Q.addEventListener("input",function(Oe){var xe,Be=-1,Ne=-1;if(Se.beforeInputSelectionRange){var Ve=b(Se.beforeInputSelectionRange,2);Be=Ve[0],Ne=Ve[1]}(xe=K.linkService.eventBus)===null||xe===void 0||xe.dispatch("dispatcheventinsandbox",{source:K,detail:{id:ne,name:"Keystroke",value:Se.beforeInputValue,change:Oe.data,willCommit:!1,selStart:Be,selEnd:Ne}})}),this._setEventListeners(Q,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(Oe){return Oe.target.value})}if(Re&&Q.addEventListener("blur",Re),this.data.maxLen!==null&&(Q.maxLength=this.data.maxLen),this.data.comb){var _e=this.data.rect[2]-this.data.rect[0],Ge=_e/this.data.maxLen;Q.classList.add("comb"),Q.style.letterSpacing="calc(".concat(Ge,"px - 1ch)")}}else Q=document.createElement("div"),Q.textContent=this.data.fieldValue,Q.style.verticalAlign="middle",Q.style.display="table-cell";return this._setTextStyle(Q),this._setBackgroundColor(Q),this.container.appendChild(Q),this.container}},{key:"_setTextStyle",value:function(K){var oe=["left","center","right"],ne=this.data.defaultAppearanceData,Q=ne.fontSize,he=ne.fontColor,ce=K.style;Q&&(ce.fontSize="".concat(Q,"px")),ce.color=i.Util.makeHexColor(he[0],he[1],he[2]),this.data.textAlignment!==null&&(ce.textAlign=oe[this.data.textAlignment])}}]),U}(re),be=function(fe){_(U,fe);var de=h(U);function U(te){return Z(this,U),de.call(this,te,{isRenderable:te.renderForms})}return H(U,[{key:"render",value:function(){var K=this,oe=this.annotationStorage,ne=this.data,Q=ne.id,he=oe.getValue(Q,{value:ne.exportValue===ne.fieldValue}).value;typeof he=="string"&&(he=he!=="Off",oe.setValue(Q,{value:he})),this.container.className="buttonWidgetAnnotation checkBox";var ce=document.createElement("input");return P.add(ce),ce.disabled=ne.readOnly,ce.type="checkbox",ce.name=ne.fieldName,he&&ce.setAttribute("checked",!0),ce.setAttribute("id",Q),ce.setAttribute("exportValue",ne.exportValue),ce.tabIndex=X,ce.addEventListener("change",function(Se){var Re=Se.target,De=Re.name,Le=Re.checked,_e=c(K._getElementsByName(De,Q)),Ge;try{for(_e.s();!(Ge=_e.n()).done;){var Oe=Ge.value,xe=Le&&Oe.exportValue===ne.exportValue;Oe.domElement&&(Oe.domElement.checked=xe),oe.setValue(Oe.id,{value:xe})}}catch(Be){_e.e(Be)}finally{_e.f()}oe.setValue(Q,{value:Le})}),ce.addEventListener("resetform",function(Se){var Re=ne.defaultFieldValue||"Off";Se.target.checked=Re===ne.exportValue}),this.enableScripting&&this.hasJSActions&&(ce.addEventListener("updatefromsandbox",function(Se){var Re={value:function(Le){Le.target.checked=Le.detail.value!=="Off",oe.setValue(Q,{value:Le.target.checked})}};K._dispatchEventFromSandbox(Re,Se)}),this._setEventListeners(ce,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(Se){return Se.target.checked})),this._setBackgroundColor(ce),this.container.appendChild(ce),this.container}}]),U}(re),ke=function(fe){_(U,fe);var de=h(U);function U(te){return Z(this,U),de.call(this,te,{isRenderable:te.renderForms})}return H(U,[{key:"render",value:function(){var K=this;this.container.className="buttonWidgetAnnotation radioButton";var oe=this.annotationStorage,ne=this.data,Q=ne.id,he=oe.getValue(Q,{value:ne.fieldValue===ne.buttonValue}).value;typeof he=="string"&&(he=he!==ne.buttonValue,oe.setValue(Q,{value:he}));var ce=document.createElement("input");if(P.add(ce),ce.disabled=ne.readOnly,ce.type="radio",ce.name=ne.fieldName,he&&ce.setAttribute("checked",!0),ce.setAttribute("id",Q),ce.tabIndex=X,ce.addEventListener("change",function(Re){var De=Re.target,Le=De.name,_e=De.checked,Ge=c(K._getElementsByName(Le,Q)),Oe;try{for(Ge.s();!(Oe=Ge.n()).done;){var xe=Oe.value;oe.setValue(xe.id,{value:!1})}}catch(Be){Ge.e(Be)}finally{Ge.f()}oe.setValue(Q,{value:_e})}),ce.addEventListener("resetform",function(Re){var De=ne.defaultFieldValue;Re.target.checked=De!=null&&De===ne.buttonValue}),this.enableScripting&&this.hasJSActions){var Se=ne.buttonValue;ce.addEventListener("updatefromsandbox",function(Re){var De={value:function(_e){var Ge=Se===_e.detail.value,Oe=c(K._getElementsByName(_e.target.name)),xe;try{for(Oe.s();!(xe=Oe.n()).done;){var Be=xe.value,Ne=Ge&&Be.id===Q;Be.domElement&&(Be.domElement.checked=Ne),oe.setValue(Be.id,{value:Ne})}}catch(Ve){Oe.e(Ve)}finally{Oe.f()}}};K._dispatchEventFromSandbox(De,Re)}),this._setEventListeners(ce,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(Re){return Re.target.checked})}return this._setBackgroundColor(ce),this.container.appendChild(ce),this.container}}]),U}(re),we=function(fe){_(U,fe);var de=h(U);function U(te){return Z(this,U),de.call(this,te,{ignoreBorder:te.data.hasAppearance})}return H(U,[{key:"render",value:function(){var K=W(p(U.prototype),"render",this).call(this);return K.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(K.title=this.data.alternativeText),K}}]),U}(E),z=function(fe){_(U,fe);var de=h(U);function U(te){return Z(this,U),de.call(this,te,{isRenderable:te.renderForms})}return H(U,[{key:"render",value:function(){var K=this;this.container.className="choiceWidgetAnnotation";var oe=this.annotationStorage,ne=this.data.id;oe.getValue(ne,{value:this.data.fieldValue.length>0?this.data.fieldValue[0]:void 0});var Q=this.data.defaultAppearanceData.fontSize;Q||(Q=9);var he="calc(".concat(Q,"px * var(--zoom-factor))"),ce=document.createElement("select");P.add(ce),ce.disabled=this.data.readOnly,ce.name=this.data.fieldName,ce.setAttribute("id",ne),ce.tabIndex=X,ce.style.fontSize="".concat(Q,"px"),this.data.combo||(ce.size=this.data.options.length,this.data.multiSelect&&(ce.multiple=!0)),ce.addEventListener("resetform",function(Oe){var xe=K.data.defaultFieldValue,Be=c(ce.options),Ne;try{for(Be.s();!(Ne=Be.n()).done;){var Ve=Ne.value;Ve.selected=Ve.value===xe}}catch(Xe){Be.e(Xe)}finally{Be.f()}});var Se=c(this.data.options),Re;try{for(Se.s();!(Re=Se.n()).done;){var De=Re.value,Le=document.createElement("option");Le.textContent=De.displayValue,Le.value=De.exportValue,this.data.combo&&(Le.style.fontSize=he),this.data.fieldValue.includes(De.exportValue)&&Le.setAttribute("selected",!0),ce.appendChild(Le)}}catch(Oe){Se.e(Oe)}finally{Se.f()}var _e=function(xe,Be){var Ne=Be?"value":"textContent",Ve=xe.target.options;return xe.target.multiple?Array.prototype.filter.call(Ve,function(Xe){return Xe.selected}).map(function(Xe){return Xe[Ne]}):Ve.selectedIndex===-1?null:Ve[Ve.selectedIndex][Ne]},Ge=function(xe){var Be=xe.target.options;return Array.prototype.map.call(Be,function(Ne){return{displayValue:Ne.textContent,exportValue:Ne.value}})};return this.enableScripting&&this.hasJSActions?(ce.addEventListener("updatefromsandbox",function(Oe){var xe={value:function(Ne){var Ve=Ne.detail.value,Xe=new Set(Array.isArray(Ve)?Ve:[Ve]),Je=c(ce.options),rt;try{for(Je.s();!(rt=Je.n()).done;){var it=rt.value;it.selected=Xe.has(it.value)}}catch(yt){Je.e(yt)}finally{Je.f()}oe.setValue(ne,{value:_e(Ne,!0)})},multipleSelection:function(Ne){ce.multiple=!0},remove:function(Ne){var Ve=ce.options,Xe=Ne.detail.remove;if(Ve[Xe].selected=!1,ce.remove(Xe),Ve.length>0){var Je=Array.prototype.findIndex.call(Ve,function(rt){return rt.selected});Je===-1&&(Ve[0].selected=!0)}oe.setValue(ne,{value:_e(Ne,!0),items:Ge(Ne)})},clear:function(Ne){for(;ce.length!==0;)ce.remove(0);oe.setValue(ne,{value:null,items:[]})},insert:function(Ne){var Ve=Ne.detail.insert,Xe=Ve.index,Je=Ve.displayValue,rt=Ve.exportValue,it=document.createElement("option");it.textContent=Je,it.value=rt,ce.insertBefore(it,ce.children[Xe]),oe.setValue(ne,{value:_e(Ne,!0),items:Ge(Ne)})},items:function(Ne){for(var Ve=Ne.detail.items;ce.length!==0;)ce.remove(0);var Xe=c(Ve),Je;try{for(Xe.s();!(Je=Xe.n()).done;){var rt=Je.value,it=rt.displayValue,yt=rt.exportValue,ht=document.createElement("option");ht.textContent=it,ht.value=yt,ce.appendChild(ht)}}catch(Rt){Xe.e(Rt)}finally{Xe.f()}ce.options.length>0&&(ce.options[0].selected=!0),oe.setValue(ne,{value:_e(Ne,!0),items:Ge(Ne)})},indices:function(Ne){var Ve=new Set(Ne.detail.indices),Xe=c(Ne.target.options),Je;try{for(Xe.s();!(Je=Xe.n()).done;){var rt=Je.value;rt.selected=Ve.has(rt.index)}}catch(it){Xe.e(it)}finally{Xe.f()}oe.setValue(ne,{value:_e(Ne,!0)})},editable:function(Ne){Ne.target.disabled=!Ne.detail.editable}};K._dispatchEventFromSandbox(xe,Oe)}),ce.addEventListener("input",function(Oe){var xe,Be=_e(Oe,!0),Ne=_e(Oe,!1);oe.setValue(ne,{value:Be}),(xe=K.linkService.eventBus)===null||xe===void 0||xe.dispatch("dispatcheventinsandbox",{source:K,detail:{id:ne,name:"Keystroke",value:Ne,changeEx:Be,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(ce,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],function(Oe){return Oe.target.checked})):ce.addEventListener("input",function(Oe){oe.setValue(ne,{value:_e(Oe)})}),this._setBackgroundColor(ce),this.container.appendChild(ce),this.container}}]),U}(re),R=function(fe){_(U,fe);var de=h(U);function U(te){var K,oe,ne;Z(this,U);var Q=!!((K=te.data.titleObj)!==null&&K!==void 0&&K.str||(oe=te.data.contentsObj)!==null&&oe!==void 0&&oe.str||(ne=te.data.richText)!==null&&ne!==void 0&&ne.str);return de.call(this,te,{isRenderable:Q})}return H(U,[{key:"render",value:function(){var K=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",K.includes(this.data.parentType))return this.container;var oe='[data-annotation-id="'.concat(this.data.parentId,'"]'),ne=this.layer.querySelectorAll(oe);if(ne.length===0)return this.container;var Q=new d({container:this.container,trigger:Array.from(ne),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),he=this.page,ce=i.Util.normalizeRect([this.data.parentRect[0],he.view[3]-this.data.parentRect[1]+he.view[1],this.data.parentRect[2],he.view[3]-this.data.parentRect[3]+he.view[1]]),Se=ce[0]+this.data.parentRect[2]-this.data.parentRect[0],Re=ce[1];return this.container.style.transformOrigin="".concat(-Se,"px ").concat(-Re,"px"),this.container.style.left="".concat(Se,"px"),this.container.style.top="".concat(Re,"px"),this.container.appendChild(Q.render()),this.container}}]),U}(A),d=function(){function fe(de){Z(this,fe),this.container=de.container,this.trigger=de.trigger,this.color=de.color,this.titleObj=de.titleObj,this.modificationDate=de.modificationDate,this.contentsObj=de.contentsObj,this.richText=de.richText,this.hideWrapper=de.hideWrapper||!1,this.pinned=!1}return H(fe,[{key:"render",value:function(){var U,te,K=.7,oe=document.createElement("div");oe.className="popupWrapper",this.hideElement=this.hideWrapper?oe:this.container,this.hideElement.hidden=!0;var ne=document.createElement("div");ne.className="popup";var Q=this.color;if(Q){var he=K*(255-Q[0])+Q[0],ce=K*(255-Q[1])+Q[1],Se=K*(255-Q[2])+Q[2];ne.style.backgroundColor=i.Util.makeHexColor(he|0,ce|0,Se|0)}var Re=document.createElement("h1");Re.dir=this.titleObj.dir,Re.textContent=this.titleObj.str,ne.appendChild(Re);var De=f.PDFDateString.toDateObject(this.modificationDate);if(De){var Le=document.createElement("span");Le.className="popupDate",Le.textContent="{{date}}, {{time}}",Le.dataset.l10nId="annotation_date_string",Le.dataset.l10nArgs=JSON.stringify({date:De.toLocaleDateString(),time:De.toLocaleTimeString()}),ne.appendChild(Le)}if((U=this.richText)!==null&&U!==void 0&&U.str&&(!((te=this.contentsObj)!==null&&te!==void 0&&te.str)||this.contentsObj.str===this.richText.str))D.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:ne}),ne.lastChild.className="richText popupContent";else{var _e=this._formatContents(this.contentsObj);ne.appendChild(_e)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);var Ge=c(this.trigger),Oe;try{for(Ge.s();!(Oe=Ge.n()).done;){var xe=Oe.value;xe.addEventListener("click",this._toggle.bind(this)),xe.addEventListener("mouseover",this._show.bind(this,!1)),xe.addEventListener("mouseout",this._hide.bind(this,!1))}}catch(Be){Ge.e(Be)}finally{Ge.f()}return ne.addEventListener("click",this._hide.bind(this,!0)),oe.appendChild(ne),oe}},{key:"_formatContents",value:function(U){var te=U.str,K=U.dir,oe=document.createElement("p");oe.className="popupContent",oe.dir=K;for(var ne=te.split(/(?:\r\n?|\n)/),Q=0,he=ne.length;Q<he;++Q){var ce=ne[Q];oe.appendChild(document.createTextNode(ce)),Q<he-1&&oe.appendChild(document.createElement("br"))}return oe}},{key:"_toggle",value:function(){this.pinned?this._hide(!0):this._show(!0)}},{key:"_show",value:function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;U&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}},{key:"_hide",value:function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;U&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}]),fe}(),o=function(fe){_(U,fe);var de=h(U);function U(te){var K,oe,ne;Z(this,U);var Q=!!(te.data.hasPopup||(K=te.data.titleObj)!==null&&K!==void 0&&K.str||(oe=te.data.contentsObj)!==null&&oe!==void 0&&oe.str||(ne=te.data.richText)!==null&&ne!==void 0&&ne.str);return de.call(this,te,{isRenderable:Q,ignoreBorder:!0})}return H(U,[{key:"render",value:function(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}]),U}(A),g=function(fe){_(U,fe);var de=h(U);function U(te){var K,oe,ne;Z(this,U);var Q=!!(te.data.hasPopup||(K=te.data.titleObj)!==null&&K!==void 0&&K.str||(oe=te.data.contentsObj)!==null&&oe!==void 0&&oe.str||(ne=te.data.richText)!==null&&ne!==void 0&&ne.str);return de.call(this,te,{isRenderable:Q,ignoreBorder:!0})}return H(U,[{key:"render",value:function(){this.container.className="lineAnnotation";var K=this.data,oe=K.rect[2]-K.rect[0],ne=K.rect[3]-K.rect[1],Q=this.svgFactory.create(oe,ne),he=this.svgFactory.createElement("svg:line");return he.setAttribute("x1",K.rect[2]-K.lineCoordinates[0]),he.setAttribute("y1",K.rect[3]-K.lineCoordinates[1]),he.setAttribute("x2",K.rect[2]-K.lineCoordinates[2]),he.setAttribute("y2",K.rect[3]-K.lineCoordinates[3]),he.setAttribute("stroke-width",K.borderStyle.width||1),he.setAttribute("stroke","transparent"),he.setAttribute("fill","transparent"),Q.appendChild(he),this.container.append(Q),this._createPopup(he,K),this.container}}]),U}(A),F=function(fe){_(U,fe);var de=h(U);function U(te){var K,oe,ne;Z(this,U);var Q=!!(te.data.hasPopup||(K=te.data.titleObj)!==null&&K!==void 0&&K.str||(oe=te.data.contentsObj)!==null&&oe!==void 0&&oe.str||(ne=te.data.richText)!==null&&ne!==void 0&&ne.str);return de.call(this,te,{isRenderable:Q,ignoreBorder:!0})}return H(U,[{key:"render",value:function(){this.container.className="squareAnnotation";var K=this.data,oe=K.rect[2]-K.rect[0],ne=K.rect[3]-K.rect[1],Q=this.svgFactory.create(oe,ne),he=K.borderStyle.width,ce=this.svgFactory.createElement("svg:rect");return ce.setAttribute("x",he/2),ce.setAttribute("y",he/2),ce.setAttribute("width",oe-he),ce.setAttribute("height",ne-he),ce.setAttribute("stroke-width",he||1),ce.setAttribute("stroke","transparent"),ce.setAttribute("fill","transparent"),Q.appendChild(ce),this.container.append(Q),this._createPopup(ce,K),this.container}}]),U}(A),N=function(fe){_(U,fe);var de=h(U);function U(te){var K,oe,ne;Z(this,U);var Q=!!(te.data.hasPopup||(K=te.data.titleObj)!==null&&K!==void 0&&K.str||(oe=te.data.contentsObj)!==null&&oe!==void 0&&oe.str||(ne=te.data.richText)!==null&&ne!==void 0&&ne.str);return de.call(this,te,{isRenderable:Q,ignoreBorder:!0})}return H(U,[{key:"render",value:function(){this.container.className="circleAnnotation";var K=this.data,oe=K.rect[2]-K.rect[0],ne=K.rect[3]-K.rect[1],Q=this.svgFactory.create(oe,ne),he=K.borderStyle.width,ce=this.svgFactory.createElement("svg:ellipse");return ce.setAttribute("cx",oe/2),ce.setAttribute("cy",ne/2),ce.setAttribute("rx",oe/2-he/2),ce.setAttribute("ry",ne/2-he/2),ce.setAttribute("stroke-width",he||1),ce.setAttribute("stroke","transparent"),ce.setAttribute("fill","transparent"),Q.appendChild(ce),this.container.append(Q),this._createPopup(ce,K),this.container}}]),U}(A),J=function(fe){_(U,fe);var de=h(U);function U(te){var K,oe,ne,Q;Z(this,U);var he=!!(te.data.hasPopup||(K=te.data.titleObj)!==null&&K!==void 0&&K.str||(oe=te.data.contentsObj)!==null&&oe!==void 0&&oe.str||(ne=te.data.richText)!==null&&ne!==void 0&&ne.str);return Q=de.call(this,te,{isRenderable:he,ignoreBorder:!0}),Q.containerClassName="polylineAnnotation",Q.svgElementName="svg:polyline",Q}return H(U,[{key:"render",value:function(){this.container.className=this.containerClassName;var K=this.data,oe=K.rect[2]-K.rect[0],ne=K.rect[3]-K.rect[1],Q=this.svgFactory.create(oe,ne),he=[],ce=c(K.vertices),Se;try{for(ce.s();!(Se=ce.n()).done;){var Re=Se.value,De=Re.x-K.rect[0],Le=K.rect[3]-Re.y;he.push(De+","+Le)}}catch(Ge){ce.e(Ge)}finally{ce.f()}he=he.join(" ");var _e=this.svgFactory.createElement(this.svgElementName);return _e.setAttribute("points",he),_e.setAttribute("stroke-width",K.borderStyle.width||1),_e.setAttribute("stroke","transparent"),_e.setAttribute("fill","transparent"),Q.appendChild(_e),this.container.append(Q),this._createPopup(_e,K),this.container}}]),U}(A),le=function(fe){_(U,fe);var de=h(U);function U(te){var K;return Z(this,U),K=de.call(this,te),K.containerClassName="polygonAnnotation",K.svgElementName="svg:polygon",K}return U}(J),ve=function(fe){_(U,fe);var de=h(U);function U(te){var K,oe,ne;Z(this,U);var Q=!!(te.data.hasPopup||(K=te.data.titleObj)!==null&&K!==void 0&&K.str||(oe=te.data.contentsObj)!==null&&oe!==void 0&&oe.str||(ne=te.data.richText)!==null&&ne!==void 0&&ne.str);return de.call(this,te,{isRenderable:Q,ignoreBorder:!0})}return H(U,[{key:"render",value:function(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}]),U}(A),ye=function(fe){_(U,fe);var de=h(U);function U(te){var K,oe,ne,Q;Z(this,U);var he=!!(te.data.hasPopup||(K=te.data.titleObj)!==null&&K!==void 0&&K.str||(oe=te.data.contentsObj)!==null&&oe!==void 0&&oe.str||(ne=te.data.richText)!==null&&ne!==void 0&&ne.str);return Q=de.call(this,te,{isRenderable:he,ignoreBorder:!0}),Q.containerClassName="inkAnnotation",Q.svgElementName="svg:polyline",Q}return H(U,[{key:"render",value:function(){this.container.className=this.containerClassName;var K=this.data,oe=K.rect[2]-K.rect[0],ne=K.rect[3]-K.rect[1],Q=this.svgFactory.create(oe,ne),he=c(K.inkLists),ce;try{for(he.s();!(ce=he.n()).done;){var Se=ce.value,Re=[],De=c(Se),Le;try{for(De.s();!(Le=De.n()).done;){var _e=Le.value,Ge=_e.x-K.rect[0],Oe=K.rect[3]-_e.y;Re.push("".concat(Ge,",").concat(Oe))}}catch(Be){De.e(Be)}finally{De.f()}Re=Re.join(" ");var xe=this.svgFactory.createElement(this.svgElementName);xe.setAttribute("points",Re),xe.setAttribute("stroke-width",K.borderStyle.width||1),xe.setAttribute("stroke","transparent"),xe.setAttribute("fill","transparent"),this._createPopup(xe,K),Q.appendChild(xe)}}catch(Be){he.e(Be)}finally{he.f()}return this.container.append(Q),this.container}}]),U}(A),pe=function(fe){_(U,fe);var de=h(U);function U(te){var K,oe,ne;Z(this,U);var Q=!!(te.data.hasPopup||(K=te.data.titleObj)!==null&&K!==void 0&&K.str||(oe=te.data.contentsObj)!==null&&oe!==void 0&&oe.str||(ne=te.data.richText)!==null&&ne!==void 0&&ne.str);return de.call(this,te,{isRenderable:Q,ignoreBorder:!0,createQuadrilaterals:!0})}return H(U,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}]),U}(A),Ae=function(fe){_(U,fe);var de=h(U);function U(te){var K,oe,ne;Z(this,U);var Q=!!(te.data.hasPopup||(K=te.data.titleObj)!==null&&K!==void 0&&K.str||(oe=te.data.contentsObj)!==null&&oe!==void 0&&oe.str||(ne=te.data.richText)!==null&&ne!==void 0&&ne.str);return de.call(this,te,{isRenderable:Q,ignoreBorder:!0,createQuadrilaterals:!0})}return H(U,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}]),U}(A),Te=function(fe){_(U,fe);var de=h(U);function U(te){var K,oe,ne;Z(this,U);var Q=!!(te.data.hasPopup||(K=te.data.titleObj)!==null&&K!==void 0&&K.str||(oe=te.data.contentsObj)!==null&&oe!==void 0&&oe.str||(ne=te.data.richText)!==null&&ne!==void 0&&ne.str);return de.call(this,te,{isRenderable:Q,ignoreBorder:!0,createQuadrilaterals:!0})}return H(U,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}]),U}(A),Ee=function(fe){_(U,fe);var de=h(U);function U(te){var K,oe,ne;Z(this,U);var Q=!!(te.data.hasPopup||(K=te.data.titleObj)!==null&&K!==void 0&&K.str||(oe=te.data.contentsObj)!==null&&oe!==void 0&&oe.str||(ne=te.data.richText)!==null&&ne!==void 0&&ne.str);return de.call(this,te,{isRenderable:Q,ignoreBorder:!0,createQuadrilaterals:!0})}return H(U,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}]),U}(A),Fe=function(fe){_(U,fe);var de=h(U);function U(te){var K,oe,ne;Z(this,U);var Q=!!(te.data.hasPopup||(K=te.data.titleObj)!==null&&K!==void 0&&K.str||(oe=te.data.contentsObj)!==null&&oe!==void 0&&oe.str||(ne=te.data.richText)!==null&&ne!==void 0&&ne.str);return de.call(this,te,{isRenderable:Q,ignoreBorder:!0})}return H(U,[{key:"render",value:function(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}]),U}(A),Ie=function(fe){_(U,fe);var de=h(U);function U(te){var K,oe;Z(this,U),oe=de.call(this,te,{isRenderable:!0});var ne=oe.data.file,Q=ne.filename,he=ne.content;return oe.filename=(0,f.getFilenameFromUrl)(Q),oe.content=he,(K=oe.linkService.eventBus)===null||K===void 0||K.dispatch("fileattachmentannotation",{source:u(oe),id:(0,i.stringToPDFString)(Q),filename:Q,content:he}),oe}return H(U,[{key:"render",value:function(){var K,oe;this.container.className="fileAttachmentAnnotation";var ne=document.createElement("div");return ne.style.height=this.container.style.height,ne.style.width=this.container.style.width,ne.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((K=this.data.titleObj)!==null&&K!==void 0&&K.str||(oe=this.data.contentsObj)!==null&&oe!==void 0&&oe.str||this.data.richText)&&this._createPopup(ne,this.data),this.container.appendChild(ne),this.container}},{key:"_download",value:function(){var K;(K=this.downloadManager)===null||K===void 0||K.openOrDownloadData(this.container,this.content,this.filename)}}]),U}(A),We=function(){function fe(){Z(this,fe)}return H(fe,null,[{key:"render",value:function(U){var te=[],K=[],oe=c(U.annotations),ne;try{for(oe.s();!(ne=oe.n()).done;){var Q=ne.value;if(!!Q){if(Q.annotationType===i.AnnotationType.POPUP){K.push(Q);continue}te.push(Q)}}}catch(xe){oe.e(xe)}finally{oe.f()}K.length&&te.push.apply(te,K);for(var he=U.div,ce=0,Se=te;ce<Se.length;ce++){var Re=Se[ce],De=v.create({data:Re,layer:he,page:U.page,viewport:U.viewport,linkService:U.linkService,downloadManager:U.downloadManager,imageResourcesPath:U.imageResourcesPath||"",renderForms:U.renderForms!==!1,svgFactory:new f.DOMSVGFactory,annotationStorage:U.annotationStorage||new m.AnnotationStorage,enableScripting:U.enableScripting,hasJSActions:U.hasJSActions,fieldObjects:U.fieldObjects,mouseState:U.mouseState||{isDown:!1}});if(De.isRenderable){var Le=De.render();if(Re.hidden&&(Le.style.visibility="hidden"),Array.isArray(Le)){var _e=c(Le),Ge;try{for(_e.s();!(Ge=_e.n()).done;){var Oe=Ge.value;he.appendChild(Oe)}}catch(xe){_e.e(xe)}finally{_e.f()}}else De instanceof R?he.prepend(Le):he.appendChild(Le)}}M(this,fe,je).call(this,he,U.annotationCanvasMap)}},{key:"update",value:function(U){var te=U.page,K=U.viewport,oe=U.annotations,ne=U.annotationCanvasMap,Q=U.div,he=K.transform,ce="matrix(".concat(he.join(","),")"),Se,Re,De=c(oe),Le;try{for(De.s();!(Le=De.n()).done;){var _e=Le.value,Ge=Q.querySelectorAll('[data-annotation-id="'.concat(_e.id,'"]'));if(Ge){var Oe=c(Ge),xe;try{for(Oe.s();!(xe=Oe.n()).done;){var Be=xe.value;if(_e.hasOwnCanvas){var Ne=i.Util.normalizeRect([_e.rect[0],te.view[3]-_e.rect[1]+te.view[1],_e.rect[2],te.view[3]-_e.rect[3]+te.view[1]]);if(!Re){Se=Math.abs(he[0]||he[1]);for(var Ve=he.slice(),Xe=0;Xe<4;Xe++)Ve[Xe]=Math.sign(Ve[Xe]);Re="matrix(".concat(Ve.join(","),")")}var Je=Ne[0]*Se,rt=Ne[1]*Se;Be.style.left="".concat(Je,"px"),Be.style.top="".concat(rt,"px"),Be.style.transformOrigin="".concat(-Je,"px ").concat(-rt,"px"),Be.style.transform=Re}else Be.style.transform=ce}}catch(it){Oe.e(it)}finally{Oe.f()}}}}catch(it){De.e(it)}finally{De.f()}M(this,fe,je).call(this,Q,ne),Q.hidden=!1}}]),fe}();n.AnnotationLayer=We;function je(fe,de){if(!!de){var U=c(de),te;try{for(U.s();!(te=U.n()).done;){var K=b(te.value,2),oe=K[0],ne=K[1],Q=fe.querySelector('[data-annotation-id="'.concat(oe,'"]'));if(!!Q){var he=Q.firstChild;he.nodeName==="CANVAS"?Q.replaceChild(ne,he):Q.insertBefore(ne,he)}}}catch(ce){U.e(ce)}finally{U.f()}de.clear()}}},(s,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ColorConverters=void 0;function e(O,w){return S(O)||m(O,w)||i(O,w)||r()}function r(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i(O,w){if(!!O){if(typeof O=="string")return f(O,w);var x=Object.prototype.toString.call(O).slice(8,-1);if(x==="Object"&&O.constructor&&(x=O.constructor.name),x==="Map"||x==="Set")return Array.from(O);if(x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x))return f(O,w)}}function f(O,w){(w==null||w>O.length)&&(w=O.length);for(var x=0,k=new Array(w);x<w;x++)k[x]=O[x];return k}function m(O,w){var x=O==null?null:typeof Symbol!="undefined"&&O[Symbol.iterator]||O["@@iterator"];if(x!=null){var k=[],L=!0,_=!1,B,h;try{for(x=x.call(O);!(L=(B=x.next()).done)&&(k.push(B.value),!(w&&k.length===w));L=!0);}catch(l){_=!0,h=l}finally{try{!L&&x.return!=null&&x.return()}finally{if(_)throw h}}return k}}function S(O){if(Array.isArray(O))return O}function D(O,w){if(!(O instanceof w))throw new TypeError("Cannot call a class as a function")}function M(O,w){for(var x=0;x<w.length;x++){var k=w[x];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(O,k.key,k)}}function j(O,w,x){return w&&M(O.prototype,w),x&&M(O,x),O}function W(O){return Math.floor(Math.max(0,Math.min(1,O))*255).toString(16).padStart(2,"0")}var V=function(){function O(){D(this,O)}return j(O,null,[{key:"CMYK_G",value:function(x){var k=e(x,4),L=k[0],_=k[1],B=k[2],h=k[3];return["G",1-Math.min(1,.3*L+.59*B+.11*_+h)]}},{key:"G_CMYK",value:function(x){var k=e(x,1),L=k[0];return["CMYK",0,0,0,1-L]}},{key:"G_RGB",value:function(x){var k=e(x,1),L=k[0];return["RGB",L,L,L]}},{key:"G_HTML",value:function(x){var k=e(x,1),L=k[0],_=W(L);return"#".concat(_).concat(_).concat(_)}},{key:"RGB_G",value:function(x){var k=e(x,3),L=k[0],_=k[1],B=k[2];return["G",.3*L+.59*_+.11*B]}},{key:"RGB_HTML",value:function(x){var k=e(x,3),L=k[0],_=k[1],B=k[2],h=W(L),l=W(_),u=W(B);return"#".concat(h).concat(l).concat(u)}},{key:"T_HTML",value:function(){return"#00000000"}},{key:"CMYK_RGB",value:function(x){var k=e(x,4),L=k[0],_=k[1],B=k[2],h=k[3];return["RGB",1-Math.min(1,L+h),1-Math.min(1,B+h),1-Math.min(1,_+h)]}},{key:"CMYK_HTML",value:function(x){return this.RGB_HTML(this.CMYK_RGB(x))}},{key:"RGB_CMYK",value:function(x){var k=e(x,3),L=k[0],_=k[1],B=k[2],h=1-L,l=1-_,u=1-B,y=Math.min(h,l,u);return["CMYK",h,l,u,y]}}]),O}();n.ColorConverters=V},(s,n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.XfaLayer=void 0;var r=e(4),i=e(147);function f(k,L){return D(k)||S(k,L)||j(k,L)||m()}function m(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S(k,L){var _=k==null?null:typeof Symbol!="undefined"&&k[Symbol.iterator]||k["@@iterator"];if(_!=null){var B=[],h=!0,l=!1,u,y;try{for(_=_.call(k);!(h=(u=_.next()).done)&&(B.push(u.value),!(L&&B.length===L));h=!0);}catch(p){l=!0,y=p}finally{try{!h&&_.return!=null&&_.return()}finally{if(l)throw y}}return B}}function D(k){if(Array.isArray(k))return k}function M(k,L){var _=typeof Symbol!="undefined"&&k[Symbol.iterator]||k["@@iterator"];if(!_){if(Array.isArray(k)||(_=j(k))||L&&k&&typeof k.length=="number"){_&&(k=_);var B=0,h=function(){};return{s:h,n:function(){return B>=k.length?{done:!0}:{done:!1,value:k[B++]}},e:function(c){throw c},f:h}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l=!0,u=!1,y;return{s:function(){_=_.call(k)},n:function(){var c=_.next();return l=c.done,c},e:function(c){u=!0,y=c},f:function(){try{!l&&_.return!=null&&_.return()}finally{if(u)throw y}}}}function j(k,L){if(!!k){if(typeof k=="string")return W(k,L);var _=Object.prototype.toString.call(k).slice(8,-1);if(_==="Object"&&k.constructor&&(_=k.constructor.name),_==="Map"||_==="Set")return Array.from(k);if(_==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_))return W(k,L)}}function W(k,L){(L==null||L>k.length)&&(L=k.length);for(var _=0,B=new Array(L);_<L;_++)B[_]=k[_];return B}function V(k,L){if(!(k instanceof L))throw new TypeError("Cannot call a class as a function")}function O(k,L){for(var _=0;_<L.length;_++){var B=L[_];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(k,B.key,B)}}function w(k,L,_){return L&&O(k.prototype,L),_&&O(k,_),k}var x=function(){function k(){V(this,k)}return w(k,null,[{key:"setupStorage",value:function(_,B,h,l,u){var y=l.getValue(B,{value:null});switch(h.name){case"textarea":if(y.value!==null&&(_.textContent=y.value),u==="print")break;_.addEventListener("input",function(C){l.setValue(B,{value:C.target.value})});break;case"input":if(h.attributes.type==="radio"||h.attributes.type==="checkbox"){if(y.value===h.attributes.xfaOn?_.setAttribute("checked",!0):y.value===h.attributes.xfaOff&&_.removeAttribute("checked"),u==="print")break;_.addEventListener("change",function(C){l.setValue(B,{value:C.target.checked?C.target.getAttribute("xfaOn"):C.target.getAttribute("xfaOff")})})}else{if(y.value!==null&&_.setAttribute("value",y.value),u==="print")break;_.addEventListener("input",function(C){l.setValue(B,{value:C.target.value})})}break;case"select":if(y.value!==null){var p=M(h.children),c;try{for(p.s();!(c=p.n()).done;){var b=c.value;b.attributes.value===y.value&&(b.attributes.selected=!0)}}catch(C){p.e(C)}finally{p.f()}}_.addEventListener("input",function(C){var G=C.target.options,I=G.selectedIndex===-1?"":G[G.selectedIndex].value;l.setValue(B,{value:I})});break}}},{key:"setAttributes",value:function(_){var B=_.html,h=_.element,l=_.storage,u=l===void 0?null:l,y=_.intent,p=_.linkService,c=h.attributes,b=B instanceof HTMLAnchorElement;c.type==="radio"&&(c.name="".concat(c.name,"-").concat(y));for(var C=0,G=Object.entries(c);C<G.length;C++){var I=f(G[C],2),$=I[0],ee=I[1];if(!(ee==null||$==="dataId"))if($!=="style")if($==="textContent")B.textContent=ee;else if($==="class")ee.length&&B.setAttribute($,ee.join(" "));else{if(b&&($==="href"||$==="newWindow"))continue;B.setAttribute($,ee)}else Object.assign(B.style,ee)}if(b){var Z;p.addLinkAttributes||(0,r.warn)("XfaLayer.setAttribute - missing `addLinkAttributes`-method on the `linkService`-instance."),(Z=p.addLinkAttributes)===null||Z===void 0||Z.call(p,B,c.href,c.newWindow)}u&&c.dataId&&this.setupStorage(B,c.dataId,h,u)}},{key:"render",value:function(_){var B=_.annotationStorage,h=_.linkService,l=_.xfaHtml,u=_.intent||"display",y=document.createElement(l.name);l.attributes&&this.setAttributes({html:y,element:l,intent:u,linkService:h});var p=[[l,-1,y]],c=_.div;if(c.appendChild(y),_.viewport){var b="matrix(".concat(_.viewport.transform.join(","),")");c.style.transform=b}u!=="richText"&&c.setAttribute("class","xfaLayer xfaFont");for(var C=[];p.length>0;){var G,I=f(p[p.length-1],3),$=I[0],ee=I[1],Z=I[2];if(ee+1===$.children.length){p.pop();continue}var ie=$.children[++p[p.length-1][1]];if(ie!==null){var H=ie.name;if(H==="#text"){var X=document.createTextNode(ie.value);C.push(X),Z.appendChild(X);continue}var P=void 0;if(ie!=null&&(G=ie.attributes)!==null&&G!==void 0&&G.xmlns?P=document.createElementNS(ie.attributes.xmlns,H):P=document.createElement(H),Z.appendChild(P),ie.attributes&&this.setAttributes({html:P,element:ie,storage:B,intent:u,linkService:h}),ie.children&&ie.children.length>0)p.push([ie,-1,P]);else if(ie.value){var v=document.createTextNode(ie.value);i.XfaText.shouldBuildText(H)&&C.push(v),P.appendChild(v)}}}var A=M(c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea")),E;try{for(A.s();!(E=A.n()).done;){var q=E.value;q.setAttribute("readOnly",!0)}}catch(re){A.e(re)}finally{A.f()}return{textDivs:C}}},{key:"update",value:function(_){var B="matrix(".concat(_.viewport.transform.join(","),")");_.div.style.transform=B,_.div.hidden=!1}}]),k}();n.XfaLayer=x},(s,n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.renderTextLayer=y;var r=e(4);function i(p,c){if(!(p instanceof c))throw new TypeError("Cannot call a class as a function")}function f(p,c){for(var b=0;b<c.length;b++){var C=c[b];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(p,C.key,C)}}function m(p,c,b){return c&&f(p.prototype,c),b&&f(p,b),p}function S(p,c){var b=typeof Symbol!="undefined"&&p[Symbol.iterator]||p["@@iterator"];if(!b){if(Array.isArray(p)||(b=D(p))||c&&p&&typeof p.length=="number"){b&&(p=b);var C=0,G=function(){};return{s:G,n:function(){return C>=p.length?{done:!0}:{done:!1,value:p[C++]}},e:function(ie){throw ie},f:G}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I=!0,$=!1,ee;return{s:function(){b=b.call(p)},n:function(){var ie=b.next();return I=ie.done,ie},e:function(ie){$=!0,ee=ie},f:function(){try{!I&&b.return!=null&&b.return()}finally{if($)throw ee}}}}function D(p,c){if(!!p){if(typeof p=="string")return M(p,c);var b=Object.prototype.toString.call(p).slice(8,-1);if(b==="Object"&&p.constructor&&(b=p.constructor.name),b==="Map"||b==="Set")return Array.from(p);if(b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return M(p,c)}}function M(p,c){(c==null||c>p.length)&&(c=p.length);for(var b=0,C=new Array(c);b<c;b++)C[b]=p[b];return C}var j=1e5,W=30,V=.8,O=new Map,w=/^\s+$/g;function x(p,c){var b=O.get(p);if(b)return b;c.save(),c.font="".concat(W,"px ").concat(p);var C=c.measureText(""),G=C.fontBoundingBoxAscent,I=Math.abs(C.fontBoundingBoxDescent);if(G){c.restore();var $=G/(G+I);return O.set(p,$),$}c.strokeStyle="red",c.clearRect(0,0,W,W),c.strokeText("g",0,0);var ee=c.getImageData(0,0,W,W).data;I=0;for(var Z=ee.length-1-3;Z>=0;Z-=4)if(ee[Z]>0){I=Math.ceil(Z/4/W);break}c.clearRect(0,0,W,W),c.strokeText("A",0,W),ee=c.getImageData(0,0,W,W).data,G=0;for(var ie=0,H=ee.length;ie<H;ie+=4)if(ee[ie]>0){G=W-Math.floor(ie/4/W);break}if(c.restore(),G){var X=G/(G+I);return O.set(p,X),X}return O.set(p,V),V}function k(p,c,b,C){var G=document.createElement("span"),I=p._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:c.str!=="",hasEOL:c.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1}:{angle:0,canvasWidth:0,hasText:c.str!=="",hasEOL:c.hasEOL};p._textDivs.push(G);var $=r.Util.transform(p._viewport.transform,c.transform),ee=Math.atan2($[1],$[0]),Z=b[c.fontName];Z.vertical&&(ee+=Math.PI/2);var ie=Math.hypot($[2],$[3]),H=ie*x(Z.fontFamily,C),X,P;ee===0?(X=$[4],P=$[5]-H):(X=$[4]+H*Math.sin(ee),P=$[5]-H*Math.cos(ee)),G.style.left="".concat(X,"px"),G.style.top="".concat(P,"px"),G.style.fontSize="".concat(ie,"px"),G.style.fontFamily=Z.fontFamily,G.setAttribute("role","presentation"),G.textContent=c.str,G.dir=c.dir,p._fontInspectorEnabled&&(G.dataset.fontName=c.fontName),ee!==0&&(I.angle=ee*(180/Math.PI));var v=!1;if(c.str.length>1||p._enhanceTextSelection&&w.test(c.str))v=!0;else if(c.str!==" "&&c.transform[0]!==c.transform[3]){var A=Math.abs(c.transform[0]),E=Math.abs(c.transform[3]);A!==E&&Math.max(A,E)/Math.min(A,E)>1.5&&(v=!0)}if(v&&(Z.vertical?I.canvasWidth=c.height*p._viewport.scale:I.canvasWidth=c.width*p._viewport.scale),p._textDivProperties.set(G,I),p._textContentStream&&p._layoutText(G),p._enhanceTextSelection&&I.hasText){var q=1,re=0;ee!==0&&(q=Math.cos(ee),re=Math.sin(ee));var Y=(Z.vertical?c.height:c.width)*p._viewport.scale,be=ie,ke,we;ee!==0?(ke=[q,re,-re,q,X,P],we=r.Util.getAxialAlignedBoundingBox([0,0,Y,be],ke)):we=[X,P,X+Y,P+be],p._bounds.push({left:we[0],top:we[1],right:we[2],bottom:we[3],div:G,size:[Y,be],m:ke})}}function L(p){if(!p._canceled){var c=p._textDivs,b=p._capability,C=c.length;if(C>j){p._renderingDone=!0,b.resolve();return}if(!p._textContentStream)for(var G=0;G<C;G++)p._layoutText(c[G]);p._renderingDone=!0,b.resolve()}}function _(p,c,b){for(var C=0,G=0;G<b;G++){var I=p[c++];I>0&&(C=C?Math.min(I,C):I)}return C}function B(p){for(var c=p._bounds,b=p._viewport,C=h(b.width,b.height,c),G=0;G<C.length;G++){var I=c[G].div,$=p._textDivProperties.get(I);if($.angle===0){$.paddingLeft=c[G].left-C[G].left,$.paddingTop=c[G].top-C[G].top,$.paddingRight=C[G].right-c[G].right,$.paddingBottom=C[G].bottom-c[G].bottom,p._textDivProperties.set(I,$);continue}for(var ee=C[G],Z=c[G],ie=Z.m,H=ie[0],X=ie[1],P=[[0,0],[0,Z.size[1]],[Z.size[0],0],Z.size],v=new Float64Array(64),A=0,E=P.length;A<E;A++){var q=r.Util.applyTransform(P[A],ie);v[A+0]=H&&(ee.left-q[0])/H,v[A+4]=X&&(ee.top-q[1])/X,v[A+8]=H&&(ee.right-q[0])/H,v[A+12]=X&&(ee.bottom-q[1])/X,v[A+16]=X&&(ee.left-q[0])/-X,v[A+20]=H&&(ee.top-q[1])/H,v[A+24]=X&&(ee.right-q[0])/-X,v[A+28]=H&&(ee.bottom-q[1])/H,v[A+32]=H&&(ee.left-q[0])/-H,v[A+36]=X&&(ee.top-q[1])/-X,v[A+40]=H&&(ee.right-q[0])/-H,v[A+44]=X&&(ee.bottom-q[1])/-X,v[A+48]=X&&(ee.left-q[0])/X,v[A+52]=H&&(ee.top-q[1])/-H,v[A+56]=X&&(ee.right-q[0])/X,v[A+60]=H&&(ee.bottom-q[1])/-H}var re=1+Math.min(Math.abs(H),Math.abs(X));$.paddingLeft=_(v,32,16)/re,$.paddingTop=_(v,48,16)/re,$.paddingRight=_(v,0,16)/re,$.paddingBottom=_(v,16,16)/re,p._textDivProperties.set(I,$)}}function h(p,c,b){var C=b.map(function(v,A){return{x1:v.left,y1:v.top,x2:v.right,y2:v.bottom,index:A,x1New:void 0,x2New:void 0}});l(p,C);var G=new Array(b.length),I=S(C),$;try{for(I.s();!($=I.n()).done;){var ee=$.value,Z=ee.index;G[Z]={left:ee.x1New,top:0,right:ee.x2New,bottom:0}}}catch(v){I.e(v)}finally{I.f()}b.map(function(v,A){var E=G[A],q=C[A];q.x1=v.top,q.y1=p-E.right,q.x2=v.bottom,q.y2=p-E.left,q.index=A,q.x1New=void 0,q.x2New=void 0}),l(c,C);var ie=S(C),H;try{for(ie.s();!(H=ie.n()).done;){var X=H.value,P=X.index;G[P].top=X.x1New,G[P].bottom=X.x2New}}catch(v){ie.e(v)}finally{ie.f()}return G}function l(p,c){c.sort(function(R,d){return R.x1-d.x1||R.index-d.index});var b={x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0},C=[{start:-1/0,end:1/0,boundary:b}],G=S(c),I;try{for(G.s();!(I=G.n()).done;){for(var $=I.value,ee=0;ee<C.length&&C[ee].end<=$.y1;)ee++;for(var Z=C.length-1;Z>=0&&C[Z].start>=$.y2;)Z--;var ie=void 0,H=void 0,X=void 0,P=void 0,v=-1/0;for(X=ee;X<=Z;X++){ie=C[X],H=ie.boundary;var A=void 0;H.x2>$.x1?A=H.index>$.index?H.x1New:$.x1:H.x2New===void 0?A=(H.x2+$.x1)/2:A=H.x2New,A>v&&(v=A)}for($.x1New=v,X=ee;X<=Z;X++)ie=C[X],H=ie.boundary,H.x2New===void 0?H.x2>$.x1?H.index>$.index&&(H.x2New=H.x2):H.x2New=v:H.x2New>v&&(H.x2New=Math.max(v,H.x2));var E=[],q=null;for(X=ee;X<=Z;X++){ie=C[X],H=ie.boundary;var re=H.x2>$.x2?H:$;q===re?E[E.length-1].end=ie.end:(E.push({start:ie.start,end:ie.end,boundary:re}),q=re)}for(C[ee].start<$.y1&&(E[0].start=$.y1,E.unshift({start:C[ee].start,end:$.y1,boundary:C[ee].boundary})),$.y2<C[Z].end&&(E[E.length-1].end=$.y2,E.push({start:$.y2,end:C[Z].end,boundary:C[Z].boundary})),X=ee;X<=Z;X++)if(ie=C[X],H=ie.boundary,H.x2New===void 0){var Y=!1;for(P=ee-1;!Y&&P>=0&&C[P].start>=H.y1;P--)Y=C[P].boundary===H;for(P=Z+1;!Y&&P<C.length&&C[P].end<=H.y2;P++)Y=C[P].boundary===H;for(P=0;!Y&&P<E.length;P++)Y=E[P].boundary===H;Y||(H.x2New=v)}Array.prototype.splice.apply(C,[ee,Z-ee+1].concat(E))}}catch(R){G.e(R)}finally{G.f()}for(var be=0,ke=C;be<ke.length;be++){var we=ke[be],z=we.boundary;z.x2New===void 0&&(z.x2New=Math.max(p,z.x2))}}var u=function(){function p(c){var b,C=this,G=c.textContent,I=c.textContentStream,$=c.container,ee=c.viewport,Z=c.textDivs,ie=c.textContentItemsStr,H=c.enhanceTextSelection;i(this,p),this._textContent=G,this._textContentStream=I,this._container=$,this._document=$.ownerDocument,this._viewport=ee,this._textDivs=Z||[],this._textContentItemsStr=ie||[],this._enhanceTextSelection=!!H,this._fontInspectorEnabled=!!((b=globalThis.FontInspector)!==null&&b!==void 0&&b.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,r.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally(function(){C._enhanceTextSelection||(C._textDivProperties=null),C._layoutTextCtx&&(C._layoutTextCtx.canvas.width=0,C._layoutTextCtx.canvas.height=0,C._layoutTextCtx=null)}).catch(function(){})}return m(p,[{key:"promise",get:function(){return this._capability.promise}},{key:"cancel",value:function(){this._canceled=!0,this._reader&&(this._reader.cancel(new r.AbortException("TextLayer task cancelled.")).catch(function(){}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}},{key:"_processItems",value:function(b,C){for(var G=0,I=b.length;G<I;G++){if(b[G].str===void 0){if(b[G].type==="beginMarkedContentProps"||b[G].type==="beginMarkedContent"){var $=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),b[G].id!==null&&this._container.setAttribute("id","".concat(b[G].id)),$.appendChild(this._container)}else b[G].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(b[G].str),k(this,b[G],C,this._layoutTextCtx)}}},{key:"_layoutText",value:function(b){var C=this._textDivProperties.get(b),G="";if(C.canvasWidth!==0&&C.hasText){var I=b.style,$=I.fontSize,ee=I.fontFamily;($!==this._layoutTextLastFontSize||ee!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font="".concat($," ").concat(ee),this._layoutTextLastFontSize=$,this._layoutTextLastFontFamily=ee);var Z=this._layoutTextCtx.measureText(b.textContent),ie=Z.width;if(ie>0){var H=C.canvasWidth/ie;this._enhanceTextSelection&&(C.scale=H),G="scaleX(".concat(H,")")}}if(C.angle!==0&&(G="rotate(".concat(C.angle,"deg) ").concat(G)),G.length>0&&(this._enhanceTextSelection&&(C.originalTransform=G),b.style.transform=G),C.hasText&&this._container.appendChild(b),C.hasEOL){var X=document.createElement("br");X.setAttribute("role","presentation"),this._container.appendChild(X)}}},{key:"_render",value:function(){var b=this,C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,G=(0,r.createPromiseCapability)(),I=Object.create(null),$=this._document.createElement("canvas");if($.height=$.width=W,$.mozOpaque=!0,this._layoutTextCtx=$.getContext("2d",{alpha:!1}),this._textContent){var ee=this._textContent.items,Z=this._textContent.styles;this._processItems(ee,Z),G.resolve()}else if(this._textContentStream){var ie=function H(){b._reader.read().then(function(X){var P=X.value,v=X.done;if(v){G.resolve();return}Object.assign(I,P.styles),b._processItems(P.items,I),H()},G.reject)};this._reader=this._textContentStream.getReader(),ie()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');G.promise.then(function(){I=null,C?b._renderTimer=setTimeout(function(){L(b),b._renderTimer=null},C):L(b)},this._capability.reject)}},{key:"expandTextDivs",value:function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!(!this._enhanceTextSelection||!this._renderingDone)){this._bounds!==null&&(B(this),this._bounds=null);for(var C=[],G=[],I=0,$=this._textDivs.length;I<$;I++){var ee=this._textDivs[I],Z=this._textDivProperties.get(ee);!Z.hasText||(b?(C.length=0,G.length=0,Z.originalTransform&&C.push(Z.originalTransform),Z.paddingTop>0?(G.push("".concat(Z.paddingTop,"px")),C.push("translateY(".concat(-Z.paddingTop,"px)"))):G.push(0),Z.paddingRight>0?G.push("".concat(Z.paddingRight/Z.scale,"px")):G.push(0),Z.paddingBottom>0?G.push("".concat(Z.paddingBottom,"px")):G.push(0),Z.paddingLeft>0?(G.push("".concat(Z.paddingLeft/Z.scale,"px")),C.push("translateX(".concat(-Z.paddingLeft/Z.scale,"px)"))):G.push(0),ee.style.padding=G.join(" "),C.length&&(ee.style.transform=C.join(" "))):(ee.style.padding=null,ee.style.transform=Z.originalTransform))}}}}]),p}();function y(p){var c=new u({textContent:p.textContent,textContentStream:p.textContentStream,container:p.container,viewport:p.viewport,textDivs:p.textDivs,textContentItemsStr:p.textContentItemsStr,enhanceTextSelection:p.enhanceTextSelection});return c._render(p.timeout),c}},(s,n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.SVGGraphics=void 0;var r=e(4),i=e(1),f=e(6);function m(H){return M(H)||D(H)||x(H)||S()}function S(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D(H){if(typeof Symbol!="undefined"&&H[Symbol.iterator]!=null||H["@@iterator"]!=null)return Array.from(H)}function M(H){if(Array.isArray(H))return k(H)}function j(H,X){return O(H)||V(H,X)||x(H,X)||W()}function W(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V(H,X){var P=H==null?null:typeof Symbol!="undefined"&&H[Symbol.iterator]||H["@@iterator"];if(P!=null){var v=[],A=!0,E=!1,q,re;try{for(P=P.call(H);!(A=(q=P.next()).done)&&(v.push(q.value),!(X&&v.length===X));A=!0);}catch(Y){E=!0,re=Y}finally{try{!A&&P.return!=null&&P.return()}finally{if(E)throw re}}return v}}function O(H){if(Array.isArray(H))return H}function w(H,X){var P=typeof Symbol!="undefined"&&H[Symbol.iterator]||H["@@iterator"];if(!P){if(Array.isArray(H)||(P=x(H))||X&&H&&typeof H.length=="number"){P&&(H=P);var v=0,A=function(){};return{s:A,n:function(){return v>=H.length?{done:!0}:{done:!1,value:H[v++]}},e:function(be){throw be},f:A}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var E=!0,q=!1,re;return{s:function(){P=P.call(H)},n:function(){var be=P.next();return E=be.done,be},e:function(be){q=!0,re=be},f:function(){try{!E&&P.return!=null&&P.return()}finally{if(q)throw re}}}}function x(H,X){if(!!H){if(typeof H=="string")return k(H,X);var P=Object.prototype.toString.call(H).slice(8,-1);if(P==="Object"&&H.constructor&&(P=H.constructor.name),P==="Map"||P==="Set")return Array.from(H);if(P==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(P))return k(H,X)}}function k(H,X){(X==null||X>H.length)&&(X=H.length);for(var P=0,v=new Array(X);P<X;P++)v[P]=H[P];return v}function L(H,X){for(var P=0;P<X.length;P++){var v=X[P];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(H,v.key,v)}}function _(H,X,P){return X&&L(H.prototype,X),P&&L(H,P),H}function B(H,X){if(!(H instanceof X))throw new TypeError("Cannot call a class as a function")}var h=function H(){B(this,H),(0,r.unreachable)("Not implemented: SVGGraphics")};n.SVGGraphics=h;{var l=function(X){var P=[],v=[],A=w(X),E;try{for(A.s();!(E=A.n()).done;){var q=E.value;if(q.fn==="save"){P.push({fnId:92,fn:"group",items:[]}),v.push(P),P=P[P.length-1].items;continue}q.fn==="restore"?P=v.pop():P.push(q)}}catch(re){A.e(re)}finally{A.f()}return P},u=function(X){if(Number.isInteger(X))return X.toString();var P=X.toFixed(10),v=P.length-1;if(P[v]!=="0")return P;do v--;while(P[v]==="0");return P.substring(0,P[v]==="."?v:v+1)},y=function(X){if(X[4]===0&&X[5]===0){if(X[1]===0&&X[2]===0)return X[0]===1&&X[3]===1?"":"scale(".concat(u(X[0])," ").concat(u(X[3]),")");if(X[0]===X[3]&&X[1]===-X[2]){var P=Math.acos(X[0])*180/Math.PI;return"rotate(".concat(u(P),")")}}else if(X[0]===1&&X[1]===0&&X[2]===0&&X[3]===1)return"translate(".concat(u(X[4])," ").concat(u(X[5]),")");return"matrix(".concat(u(X[0])," ").concat(u(X[1])," ").concat(u(X[2])," ").concat(u(X[3])," ").concat(u(X[4])," ")+"".concat(u(X[5]),")")},p={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},c="http://www.w3.org/XML/1998/namespace",b="http://www.w3.org/1999/xlink",C=["butt","round","square"],G=["miter","round","bevel"],I=function(){for(var H=new Uint8Array([137,80,78,71,13,10,26,10]),X=12,P=new Int32Array(256),v=0;v<256;v++){for(var A=v,E=0;E<8;E++)A&1?A=3988292384^A>>1&2147483647:A=A>>1&2147483647;P[v]=A}function q(z,R,d){for(var o=-1,g=R;g<d;g++){var F=(o^z[g])&255,N=P[F];o=o>>>8^N}return o^-1}function re(z,R,d,o){var g=o,F=R.length;d[g]=F>>24&255,d[g+1]=F>>16&255,d[g+2]=F>>8&255,d[g+3]=F&255,g+=4,d[g]=z.charCodeAt(0)&255,d[g+1]=z.charCodeAt(1)&255,d[g+2]=z.charCodeAt(2)&255,d[g+3]=z.charCodeAt(3)&255,g+=4,d.set(R,g),g+=R.length;var N=q(d,o+4,g);d[g]=N>>24&255,d[g+1]=N>>16&255,d[g+2]=N>>8&255,d[g+3]=N&255}function Y(z,R,d){for(var o=1,g=0,F=R;F<d;++F)o=(o+(z[F]&255))%65521,g=(g+o)%65521;return g<<16|o}function be(z){if(!f.isNodeJS)return ke(z);try{var R;parseInt(process.versions.node)>=8?R=z:R=Buffer.from(z);var d=require("zlib").deflateSync(R,{level:9});return d instanceof Uint8Array?d:new Uint8Array(d)}catch(o){(0,r.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+o)}return ke(z)}function ke(z){var R=z.length,d=65535,o=Math.ceil(R/d),g=new Uint8Array(2+R+o*5+4),F=0;g[F++]=120,g[F++]=156;for(var N=0;R>d;)g[F++]=0,g[F++]=255,g[F++]=255,g[F++]=0,g[F++]=0,g.set(z.subarray(N,N+d),F),F+=d,N+=d,R-=d;g[F++]=1,g[F++]=R&255,g[F++]=R>>8&255,g[F++]=~R&65535&255,g[F++]=(~R&65535)>>8&255,g.set(z.subarray(N),F),F+=z.length-N;var J=Y(z,0,z.length);return g[F++]=J>>24&255,g[F++]=J>>16&255,g[F++]=J>>8&255,g[F++]=J&255,g}function we(z,R,d,o){var g=z.width,F=z.height,N,J,le,ve=z.data;switch(R){case r.ImageKind.GRAYSCALE_1BPP:J=0,N=1,le=g+7>>3;break;case r.ImageKind.RGB_24BPP:J=2,N=8,le=g*3;break;case r.ImageKind.RGBA_32BPP:J=6,N=8,le=g*4;break;default:throw new Error("invalid format")}for(var ye=new Uint8Array((1+le)*F),pe=0,Ae=0,Te=0;Te<F;++Te)ye[pe++]=0,ye.set(ve.subarray(Ae,Ae+le),pe),Ae+=le,pe+=le;if(R===r.ImageKind.GRAYSCALE_1BPP&&o){pe=0;for(var Ee=0;Ee<F;Ee++){pe++;for(var Fe=0;Fe<le;Fe++)ye[pe++]^=255}}var Ie=new Uint8Array([g>>24&255,g>>16&255,g>>8&255,g&255,F>>24&255,F>>16&255,F>>8&255,F&255,N,J,0,0,0]),We=be(ye),je=H.length+X*3+Ie.length+We.length,fe=new Uint8Array(je),de=0;return fe.set(H,de),de+=H.length,re("IHDR",Ie,fe,de),de+=X+Ie.length,re("IDATA",We,fe,de),de+=X+We.length,re("IEND",new Uint8Array(0),fe,de),(0,r.createObjectURL)(fe,"image/png",d)}return function(R,d,o){var g=R.kind===void 0?r.ImageKind.GRAYSCALE_1BPP:R.kind;return we(R,g,d,o)}}(),$=function(){function H(){B(this,H),this.fontSizeScale=1,this.fontWeight=p.fontWeight,this.fontSize=0,this.textMatrix=r.IDENTITY_MATRIX,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=r.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=p.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}return _(H,[{key:"clone",value:function(){return Object.create(this)}},{key:"setCurrentPoint",value:function(P,v){this.x=P,this.y=v}}]),H}(),ee=0,Z=0,ie=0;n.SVGGraphics=h=function(){function H(X,P){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;B(this,H),this.svgFactory=new i.DOMSVGFactory,this.current=new $,this.transformMatrix=r.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=X,this.objs=P,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!v,this._operatorIdMapping=[];for(var A in r.OPS)this._operatorIdMapping[r.OPS[A]]=A}return _(H,[{key:"save",value:function(){this.transformStack.push(this.transformMatrix);var P=this.current;this.extraStack.push(P),this.current=P.clone()}},{key:"restore",value:function(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}},{key:"group",value:function(P){this.save(),this.executeOpTree(P),this.restore()}},{key:"loadDependencies",value:function(P){for(var v=this,A=P.fnArray,E=P.argsArray,q=0,re=A.length;q<re;q++)if(A[q]===r.OPS.dependency){var Y=w(E[q]),be;try{var ke=function(){var z=be.value,R=z.startsWith("g_")?v.commonObjs:v.objs,d=new Promise(function(o){R.get(z,o)});v.current.dependencies.push(d)};for(Y.s();!(be=Y.n()).done;)ke()}catch(we){Y.e(we)}finally{Y.f()}}return Promise.all(this.current.dependencies)}},{key:"transform",value:function(P,v,A,E,q,re){var Y=[P,v,A,E,q,re];this.transformMatrix=r.Util.transform(this.transformMatrix,Y),this.tgrp=null}},{key:"getSVG",value:function(P,v){var A=this;this.viewport=v;var E=this._initialize(v);return this.loadDependencies(P).then(function(){return A.transformMatrix=r.IDENTITY_MATRIX,A.executeOpTree(A.convertOpList(P)),E})}},{key:"convertOpList",value:function(P){for(var v=this._operatorIdMapping,A=P.argsArray,E=P.fnArray,q=[],re=0,Y=E.length;re<Y;re++){var be=E[re];q.push({fnId:be,fn:v[be],args:A[re]})}return l(q)}},{key:"executeOpTree",value:function(P){var v=w(P),A;try{for(v.s();!(A=v.n()).done;){var E=A.value,q=E.fn,re=E.fnId,Y=E.args;switch(re|0){case r.OPS.beginText:this.beginText();break;case r.OPS.dependency:break;case r.OPS.setLeading:this.setLeading(Y);break;case r.OPS.setLeadingMoveText:this.setLeadingMoveText(Y[0],Y[1]);break;case r.OPS.setFont:this.setFont(Y);break;case r.OPS.showText:this.showText(Y[0]);break;case r.OPS.showSpacedText:this.showText(Y[0]);break;case r.OPS.endText:this.endText();break;case r.OPS.moveText:this.moveText(Y[0],Y[1]);break;case r.OPS.setCharSpacing:this.setCharSpacing(Y[0]);break;case r.OPS.setWordSpacing:this.setWordSpacing(Y[0]);break;case r.OPS.setHScale:this.setHScale(Y[0]);break;case r.OPS.setTextMatrix:this.setTextMatrix(Y[0],Y[1],Y[2],Y[3],Y[4],Y[5]);break;case r.OPS.setTextRise:this.setTextRise(Y[0]);break;case r.OPS.setTextRenderingMode:this.setTextRenderingMode(Y[0]);break;case r.OPS.setLineWidth:this.setLineWidth(Y[0]);break;case r.OPS.setLineJoin:this.setLineJoin(Y[0]);break;case r.OPS.setLineCap:this.setLineCap(Y[0]);break;case r.OPS.setMiterLimit:this.setMiterLimit(Y[0]);break;case r.OPS.setFillRGBColor:this.setFillRGBColor(Y[0],Y[1],Y[2]);break;case r.OPS.setStrokeRGBColor:this.setStrokeRGBColor(Y[0],Y[1],Y[2]);break;case r.OPS.setStrokeColorN:this.setStrokeColorN(Y);break;case r.OPS.setFillColorN:this.setFillColorN(Y);break;case r.OPS.shadingFill:this.shadingFill(Y[0]);break;case r.OPS.setDash:this.setDash(Y[0],Y[1]);break;case r.OPS.setRenderingIntent:this.setRenderingIntent(Y[0]);break;case r.OPS.setFlatness:this.setFlatness(Y[0]);break;case r.OPS.setGState:this.setGState(Y[0]);break;case r.OPS.fill:this.fill();break;case r.OPS.eoFill:this.eoFill();break;case r.OPS.stroke:this.stroke();break;case r.OPS.fillStroke:this.fillStroke();break;case r.OPS.eoFillStroke:this.eoFillStroke();break;case r.OPS.clip:this.clip("nonzero");break;case r.OPS.eoClip:this.clip("evenodd");break;case r.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case r.OPS.paintImageXObject:this.paintImageXObject(Y[0]);break;case r.OPS.paintInlineImageXObject:this.paintInlineImageXObject(Y[0]);break;case r.OPS.paintImageMaskXObject:this.paintImageMaskXObject(Y[0]);break;case r.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(Y[0],Y[1]);break;case r.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case r.OPS.closePath:this.closePath();break;case r.OPS.closeStroke:this.closeStroke();break;case r.OPS.closeFillStroke:this.closeFillStroke();break;case r.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case r.OPS.nextLine:this.nextLine();break;case r.OPS.transform:this.transform(Y[0],Y[1],Y[2],Y[3],Y[4],Y[5]);break;case r.OPS.constructPath:this.constructPath(Y[0],Y[1]);break;case r.OPS.endPath:this.endPath();break;case 92:this.group(E.items);break;default:(0,r.warn)("Unimplemented operator ".concat(q));break}}}catch(be){v.e(be)}finally{v.f()}}},{key:"setWordSpacing",value:function(P){this.current.wordSpacing=P}},{key:"setCharSpacing",value:function(P){this.current.charSpacing=P}},{key:"nextLine",value:function(){this.moveText(0,this.current.leading)}},{key:"setTextMatrix",value:function(P,v,A,E,q,re){var Y=this.current;Y.textMatrix=Y.lineMatrix=[P,v,A,E,q,re],Y.textMatrixScale=Math.hypot(P,v),Y.x=Y.lineX=0,Y.y=Y.lineY=0,Y.xcoords=[],Y.ycoords=[],Y.tspan=this.svgFactory.createElement("svg:tspan"),Y.tspan.setAttributeNS(null,"font-family",Y.fontFamily),Y.tspan.setAttributeNS(null,"font-size","".concat(u(Y.fontSize),"px")),Y.tspan.setAttributeNS(null,"y",u(-Y.y)),Y.txtElement=this.svgFactory.createElement("svg:text"),Y.txtElement.appendChild(Y.tspan)}},{key:"beginText",value:function(){var P=this.current;P.x=P.lineX=0,P.y=P.lineY=0,P.textMatrix=r.IDENTITY_MATRIX,P.lineMatrix=r.IDENTITY_MATRIX,P.textMatrixScale=1,P.tspan=this.svgFactory.createElement("svg:tspan"),P.txtElement=this.svgFactory.createElement("svg:text"),P.txtgrp=this.svgFactory.createElement("svg:g"),P.xcoords=[],P.ycoords=[]}},{key:"moveText",value:function(P,v){var A=this.current;A.x=A.lineX+=P,A.y=A.lineY+=v,A.xcoords=[],A.ycoords=[],A.tspan=this.svgFactory.createElement("svg:tspan"),A.tspan.setAttributeNS(null,"font-family",A.fontFamily),A.tspan.setAttributeNS(null,"font-size","".concat(u(A.fontSize),"px")),A.tspan.setAttributeNS(null,"y",u(-A.y))}},{key:"showText",value:function(P){var v=this.current,A=v.font,E=v.fontSize;if(E!==0){var q=v.fontSizeScale,re=v.charSpacing,Y=v.wordSpacing,be=v.fontDirection,ke=v.textHScale*be,we=A.vertical,z=we?1:-1,R=A.defaultVMetrics,d=E*v.fontMatrix[0],o=0,g=w(P),F;try{for(g.s();!(F=g.n()).done;){var N=F.value;if(N===null){o+=be*Y;continue}else if((0,r.isNum)(N)){o+=z*N*E/1e3;continue}var J=(N.isSpace?Y:0)+re,le=N.fontChar,ve=void 0,ye=void 0,pe=N.width;if(we){var Ae=void 0,Te=N.vmetric||R;Ae=N.vmetric?Te[1]:pe*.5,Ae=-Ae*d;var Ee=Te[2]*d;pe=Te?-Te[0]:pe,ve=Ae/q,ye=(o+Ee)/q}else ve=o/q,ye=0;(N.isInFont||A.missingFile)&&(v.xcoords.push(v.x+ve),we&&v.ycoords.push(-v.y+ye),v.tspan.textContent+=le);var Fe=void 0;we?Fe=pe*d-J*be:Fe=pe*d+J*be,o+=Fe}}catch(fe){g.e(fe)}finally{g.f()}v.tspan.setAttributeNS(null,"x",v.xcoords.map(u).join(" ")),we?v.tspan.setAttributeNS(null,"y",v.ycoords.map(u).join(" ")):v.tspan.setAttributeNS(null,"y",u(-v.y)),we?v.y-=o:v.x+=o*ke,v.tspan.setAttributeNS(null,"font-family",v.fontFamily),v.tspan.setAttributeNS(null,"font-size","".concat(u(v.fontSize),"px")),v.fontStyle!==p.fontStyle&&v.tspan.setAttributeNS(null,"font-style",v.fontStyle),v.fontWeight!==p.fontWeight&&v.tspan.setAttributeNS(null,"font-weight",v.fontWeight);var Ie=v.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;if(Ie===r.TextRenderingMode.FILL||Ie===r.TextRenderingMode.FILL_STROKE?(v.fillColor!==p.fillColor&&v.tspan.setAttributeNS(null,"fill",v.fillColor),v.fillAlpha<1&&v.tspan.setAttributeNS(null,"fill-opacity",v.fillAlpha)):v.textRenderingMode===r.TextRenderingMode.ADD_TO_PATH?v.tspan.setAttributeNS(null,"fill","transparent"):v.tspan.setAttributeNS(null,"fill","none"),Ie===r.TextRenderingMode.STROKE||Ie===r.TextRenderingMode.FILL_STROKE){var We=1/(v.textMatrixScale||1);this._setStrokeAttributes(v.tspan,We)}var je=v.textMatrix;v.textRise!==0&&(je=je.slice(),je[5]+=v.textRise),v.txtElement.setAttributeNS(null,"transform","".concat(y(je)," scale(").concat(u(ke),", -1)")),v.txtElement.setAttributeNS(c,"xml:space","preserve"),v.txtElement.appendChild(v.tspan),v.txtgrp.appendChild(v.txtElement),this._ensureTransformGroup().appendChild(v.txtElement)}}},{key:"setLeadingMoveText",value:function(P,v){this.setLeading(-v),this.moveText(P,v)}},{key:"addFontStyle",value:function(P){if(!P.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));var v=(0,r.createObjectURL)(P.data,P.mimetype,this.forceDataSchema);this.cssStyle.textContent+='@font-face { font-family: "'.concat(P.loadedName,'";')+" src: url(".concat(v,`); }
`)}},{key:"setFont",value:function(P){var v=this.current,A=this.commonObjs.get(P[0]),E=P[1];v.font=A,this.embedFonts&&!A.missingFile&&!this.embeddedFonts[A.loadedName]&&(this.addFontStyle(A),this.embeddedFonts[A.loadedName]=A),v.fontMatrix=A.fontMatrix||r.FONT_IDENTITY_MATRIX;var q="normal";A.black?q="900":A.bold&&(q="bold");var re=A.italic?"italic":"normal";E<0?(E=-E,v.fontDirection=-1):v.fontDirection=1,v.fontSize=E,v.fontFamily=A.loadedName,v.fontWeight=q,v.fontStyle=re,v.tspan=this.svgFactory.createElement("svg:tspan"),v.tspan.setAttributeNS(null,"y",u(-v.y)),v.xcoords=[],v.ycoords=[]}},{key:"endText",value:function(){var P,v=this.current;v.textRenderingMode&r.TextRenderingMode.ADD_TO_PATH_FLAG&&(P=v.txtElement)!==null&&P!==void 0&&P.hasChildNodes()&&(v.element=v.txtElement,this.clip("nonzero"),this.endPath())}},{key:"setLineWidth",value:function(P){P>0&&(this.current.lineWidth=P)}},{key:"setLineCap",value:function(P){this.current.lineCap=C[P]}},{key:"setLineJoin",value:function(P){this.current.lineJoin=G[P]}},{key:"setMiterLimit",value:function(P){this.current.miterLimit=P}},{key:"setStrokeAlpha",value:function(P){this.current.strokeAlpha=P}},{key:"setStrokeRGBColor",value:function(P,v,A){this.current.strokeColor=r.Util.makeHexColor(P,v,A)}},{key:"setFillAlpha",value:function(P){this.current.fillAlpha=P}},{key:"setFillRGBColor",value:function(P,v,A){this.current.fillColor=r.Util.makeHexColor(P,v,A),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}},{key:"setStrokeColorN",value:function(P){this.current.strokeColor=this._makeColorN_Pattern(P)}},{key:"setFillColorN",value:function(P){this.current.fillColor=this._makeColorN_Pattern(P)}},{key:"shadingFill",value:function(P){var v=this.viewport.width,A=this.viewport.height,E=r.Util.inverseTransform(this.transformMatrix),q=r.Util.applyTransform([0,0],E),re=r.Util.applyTransform([0,A],E),Y=r.Util.applyTransform([v,0],E),be=r.Util.applyTransform([v,A],E),ke=Math.min(q[0],re[0],Y[0],be[0]),we=Math.min(q[1],re[1],Y[1],be[1]),z=Math.max(q[0],re[0],Y[0],be[0]),R=Math.max(q[1],re[1],Y[1],be[1]),d=this.svgFactory.createElement("svg:rect");d.setAttributeNS(null,"x",ke),d.setAttributeNS(null,"y",we),d.setAttributeNS(null,"width",z-ke),d.setAttributeNS(null,"height",R-we),d.setAttributeNS(null,"fill",this._makeShadingPattern(P)),this.current.fillAlpha<1&&d.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(d)}},{key:"_makeColorN_Pattern",value:function(P){return P[0]==="TilingPattern"?this._makeTilingPattern(P):this._makeShadingPattern(P)}},{key:"_makeTilingPattern",value:function(P){var v=P[1],A=P[2],E=P[3]||r.IDENTITY_MATRIX,q=j(P[4],4),re=q[0],Y=q[1],be=q[2],ke=q[3],we=P[5],z=P[6],R=P[7],d="shading".concat(ie++),o=r.Util.normalizeRect([].concat(m(r.Util.applyTransform([re,Y],E)),m(r.Util.applyTransform([be,ke],E)))),g=j(o,4),F=g[0],N=g[1],J=g[2],le=g[3],ve=r.Util.singularValueDecompose2dScale(E),ye=j(ve,2),pe=ye[0],Ae=ye[1],Te=we*pe,Ee=z*Ae,Fe=this.svgFactory.createElement("svg:pattern");Fe.setAttributeNS(null,"id",d),Fe.setAttributeNS(null,"patternUnits","userSpaceOnUse"),Fe.setAttributeNS(null,"width",Te),Fe.setAttributeNS(null,"height",Ee),Fe.setAttributeNS(null,"x","".concat(F)),Fe.setAttributeNS(null,"y","".concat(N));var Ie=this.svg,We=this.transformMatrix,je=this.current.fillColor,fe=this.current.strokeColor,de=this.svgFactory.create(J-F,le-N);if(this.svg=de,this.transformMatrix=E,R===2){var U=r.Util.makeHexColor.apply(r.Util,m(v));this.current.fillColor=U,this.current.strokeColor=U}return this.executeOpTree(this.convertOpList(A)),this.svg=Ie,this.transformMatrix=We,this.current.fillColor=je,this.current.strokeColor=fe,Fe.appendChild(de.childNodes[0]),this.defs.appendChild(Fe),"url(#".concat(d,")")}},{key:"_makeShadingPattern",value:function(P){switch(typeof P=="string"&&(P=this.objs.get(P)),P[0]){case"RadialAxial":var v="shading".concat(ie++),A=P[3],E;switch(P[1]){case"axial":var q=P[4],re=P[5];E=this.svgFactory.createElement("svg:linearGradient"),E.setAttributeNS(null,"id",v),E.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),E.setAttributeNS(null,"x1",q[0]),E.setAttributeNS(null,"y1",q[1]),E.setAttributeNS(null,"x2",re[0]),E.setAttributeNS(null,"y2",re[1]);break;case"radial":var Y=P[4],be=P[5],ke=P[6],we=P[7];E=this.svgFactory.createElement("svg:radialGradient"),E.setAttributeNS(null,"id",v),E.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),E.setAttributeNS(null,"cx",be[0]),E.setAttributeNS(null,"cy",be[1]),E.setAttributeNS(null,"r",we),E.setAttributeNS(null,"fx",Y[0]),E.setAttributeNS(null,"fy",Y[1]),E.setAttributeNS(null,"fr",ke);break;default:throw new Error("Unknown RadialAxial type: ".concat(P[1]))}var z=w(A),R;try{for(z.s();!(R=z.n()).done;){var d=R.value,o=this.svgFactory.createElement("svg:stop");o.setAttributeNS(null,"offset",d[0]),o.setAttributeNS(null,"stop-color",d[1]),E.appendChild(o)}}catch(g){z.e(g)}finally{z.f()}return this.defs.appendChild(E),"url(#".concat(v,")");case"Mesh":return(0,r.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error("Unknown IR type: ".concat(P[0]))}}},{key:"setDash",value:function(P,v){this.current.dashArray=P,this.current.dashPhase=v}},{key:"constructPath",value:function(P,v){var A=this.current,E=A.x,q=A.y,re=[],Y=0,be=w(P),ke;try{for(be.s();!(ke=be.n()).done;){var we=ke.value;switch(we|0){case r.OPS.rectangle:E=v[Y++],q=v[Y++];var z=v[Y++],R=v[Y++],d=E+z,o=q+R;re.push("M",u(E),u(q),"L",u(d),u(q),"L",u(d),u(o),"L",u(E),u(o),"Z");break;case r.OPS.moveTo:E=v[Y++],q=v[Y++],re.push("M",u(E),u(q));break;case r.OPS.lineTo:E=v[Y++],q=v[Y++],re.push("L",u(E),u(q));break;case r.OPS.curveTo:E=v[Y+4],q=v[Y+5],re.push("C",u(v[Y]),u(v[Y+1]),u(v[Y+2]),u(v[Y+3]),u(E),u(q)),Y+=6;break;case r.OPS.curveTo2:re.push("C",u(E),u(q),u(v[Y]),u(v[Y+1]),u(v[Y+2]),u(v[Y+3])),E=v[Y+2],q=v[Y+3],Y+=4;break;case r.OPS.curveTo3:E=v[Y+2],q=v[Y+3],re.push("C",u(v[Y]),u(v[Y+1]),u(E),u(q),u(E),u(q)),Y+=4;break;case r.OPS.closePath:re.push("Z");break}}}catch(g){be.e(g)}finally{be.f()}re=re.join(" "),A.path&&P.length>0&&P[0]!==r.OPS.rectangle&&P[0]!==r.OPS.moveTo?re=A.path.getAttributeNS(null,"d")+re:(A.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(A.path)),A.path.setAttributeNS(null,"d",re),A.path.setAttributeNS(null,"fill","none"),A.element=A.path,A.setCurrentPoint(E,q)}},{key:"endPath",value:function(){var P=this.current;if(P.path=null,!!this.pendingClip){if(!P.element){this.pendingClip=null;return}var v="clippath".concat(ee++),A=this.svgFactory.createElement("svg:clipPath");A.setAttributeNS(null,"id",v),A.setAttributeNS(null,"transform",y(this.transformMatrix));var E=P.element.cloneNode(!0);if(this.pendingClip==="evenodd"?E.setAttributeNS(null,"clip-rule","evenodd"):E.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,A.appendChild(E),this.defs.appendChild(A),P.activeClipUrl){P.clipGroup=null;var q=w(this.extraStack),re;try{for(q.s();!(re=q.n()).done;){var Y=re.value;Y.clipGroup=null}}catch(be){q.e(be)}finally{q.f()}A.setAttributeNS(null,"clip-path",P.activeClipUrl)}P.activeClipUrl="url(#".concat(v,")"),this.tgrp=null}}},{key:"clip",value:function(P){this.pendingClip=P}},{key:"closePath",value:function(){var P=this.current;if(P.path){var v="".concat(P.path.getAttributeNS(null,"d"),"Z");P.path.setAttributeNS(null,"d",v)}}},{key:"setLeading",value:function(P){this.current.leading=-P}},{key:"setTextRise",value:function(P){this.current.textRise=P}},{key:"setTextRenderingMode",value:function(P){this.current.textRenderingMode=P}},{key:"setHScale",value:function(P){this.current.textHScale=P/100}},{key:"setRenderingIntent",value:function(P){}},{key:"setFlatness",value:function(P){}},{key:"setGState",value:function(P){var v=w(P),A;try{for(v.s();!(A=v.n()).done;){var E=j(A.value,2),q=E[0],re=E[1];switch(q){case"LW":this.setLineWidth(re);break;case"LC":this.setLineCap(re);break;case"LJ":this.setLineJoin(re);break;case"ML":this.setMiterLimit(re);break;case"D":this.setDash(re[0],re[1]);break;case"RI":this.setRenderingIntent(re);break;case"FL":this.setFlatness(re);break;case"Font":this.setFont(re);break;case"CA":this.setStrokeAlpha(re);break;case"ca":this.setFillAlpha(re);break;default:(0,r.warn)("Unimplemented graphic state operator ".concat(q));break}}}catch(Y){v.e(Y)}finally{v.f()}}},{key:"fill",value:function(){var P=this.current;P.element&&(P.element.setAttributeNS(null,"fill",P.fillColor),P.element.setAttributeNS(null,"fill-opacity",P.fillAlpha),this.endPath())}},{key:"stroke",value:function(){var P=this.current;P.element&&(this._setStrokeAttributes(P.element),P.element.setAttributeNS(null,"fill","none"),this.endPath())}},{key:"_setStrokeAttributes",value:function(P){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,A=this.current,E=A.dashArray;v!==1&&E.length>0&&(E=E.map(function(q){return v*q})),P.setAttributeNS(null,"stroke",A.strokeColor),P.setAttributeNS(null,"stroke-opacity",A.strokeAlpha),P.setAttributeNS(null,"stroke-miterlimit",u(A.miterLimit)),P.setAttributeNS(null,"stroke-linecap",A.lineCap),P.setAttributeNS(null,"stroke-linejoin",A.lineJoin),P.setAttributeNS(null,"stroke-width",u(v*A.lineWidth)+"px"),P.setAttributeNS(null,"stroke-dasharray",E.map(u).join(" ")),P.setAttributeNS(null,"stroke-dashoffset",u(v*A.dashPhase)+"px")}},{key:"eoFill",value:function(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}},{key:"fillStroke",value:function(){this.stroke(),this.fill()}},{key:"eoFillStroke",value:function(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}},{key:"closeStroke",value:function(){this.closePath(),this.stroke()}},{key:"closeFillStroke",value:function(){this.closePath(),this.fillStroke()}},{key:"closeEOFillStroke",value:function(){this.closePath(),this.eoFillStroke()}},{key:"paintSolidColorImageMask",value:function(){var P=this.svgFactory.createElement("svg:rect");P.setAttributeNS(null,"x","0"),P.setAttributeNS(null,"y","0"),P.setAttributeNS(null,"width","1px"),P.setAttributeNS(null,"height","1px"),P.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(P)}},{key:"paintImageXObject",value:function(P){var v=P.startsWith("g_")?this.commonObjs.get(P):this.objs.get(P);if(!v){(0,r.warn)("Dependent image with object ID ".concat(P," is not ready yet"));return}this.paintInlineImageXObject(v)}},{key:"paintInlineImageXObject",value:function(P,v){var A=P.width,E=P.height,q=I(P,this.forceDataSchema,!!v),re=this.svgFactory.createElement("svg:rect");re.setAttributeNS(null,"x","0"),re.setAttributeNS(null,"y","0"),re.setAttributeNS(null,"width",u(A)),re.setAttributeNS(null,"height",u(E)),this.current.element=re,this.clip("nonzero");var Y=this.svgFactory.createElement("svg:image");Y.setAttributeNS(b,"xlink:href",q),Y.setAttributeNS(null,"x","0"),Y.setAttributeNS(null,"y",u(-E)),Y.setAttributeNS(null,"width",u(A)+"px"),Y.setAttributeNS(null,"height",u(E)+"px"),Y.setAttributeNS(null,"transform","scale(".concat(u(1/A)," ").concat(u(-1/E),")")),v?v.appendChild(Y):this._ensureTransformGroup().appendChild(Y)}},{key:"paintImageMaskXObject",value:function(P){var v=this.current,A=P.width,E=P.height,q=v.fillColor;v.maskId="mask".concat(Z++);var re=this.svgFactory.createElement("svg:mask");re.setAttributeNS(null,"id",v.maskId);var Y=this.svgFactory.createElement("svg:rect");Y.setAttributeNS(null,"x","0"),Y.setAttributeNS(null,"y","0"),Y.setAttributeNS(null,"width",u(A)),Y.setAttributeNS(null,"height",u(E)),Y.setAttributeNS(null,"fill",q),Y.setAttributeNS(null,"mask","url(#".concat(v.maskId,")")),this.defs.appendChild(re),this._ensureTransformGroup().appendChild(Y),this.paintInlineImageXObject(P,re)}},{key:"paintFormXObjectBegin",value:function(P,v){if(Array.isArray(P)&&P.length===6&&this.transform(P[0],P[1],P[2],P[3],P[4],P[5]),v){var A=v[2]-v[0],E=v[3]-v[1],q=this.svgFactory.createElement("svg:rect");q.setAttributeNS(null,"x",v[0]),q.setAttributeNS(null,"y",v[1]),q.setAttributeNS(null,"width",u(A)),q.setAttributeNS(null,"height",u(E)),this.current.element=q,this.clip("nonzero"),this.endPath()}}},{key:"paintFormXObjectEnd",value:function(){}},{key:"_initialize",value:function(P){var v=this.svgFactory.create(P.width,P.height),A=this.svgFactory.createElement("svg:defs");v.appendChild(A),this.defs=A;var E=this.svgFactory.createElement("svg:g");return E.setAttributeNS(null,"transform",y(P.transform)),v.appendChild(E),this.svg=E,v}},{key:"_ensureClipGroup",value:function(){if(!this.current.clipGroup){var P=this.svgFactory.createElement("svg:g");P.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(P),this.current.clipGroup=P}return this.current.clipGroup}},{key:"_ensureTransformGroup",value:function(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",y(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}]),H}()}},(s,n,e)=>{function r(v){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?r=function(E){return typeof E}:r=function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},r(v)}Object.defineProperty(n,"__esModule",{value:!0}),n.PDFNodeStream=void 0;var i=S(e(2)),f=e(4),m=e(154);function S(v){return v&&v.__esModule?v:{default:v}}function D(v,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(A&&A.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),A&&M(v,A)}function M(v,A){return M=Object.setPrototypeOf||function(q,re){return q.__proto__=re,q},M(v,A)}function j(v){var A=O();return function(){var q=w(v),re;if(A){var Y=w(this).constructor;re=Reflect.construct(q,arguments,Y)}else re=q.apply(this,arguments);return W(this,re)}}function W(v,A){if(A&&(r(A)==="object"||typeof A=="function"))return A;if(A!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return V(v)}function V(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function O(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function w(v){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(E){return E.__proto__||Object.getPrototypeOf(E)},w(v)}function x(v,A,E,q,re,Y,be){try{var ke=v[Y](be),we=ke.value}catch(z){E(z);return}ke.done?A(we):Promise.resolve(we).then(q,re)}function k(v){return function(){var A=this,E=arguments;return new Promise(function(q,re){var Y=v.apply(A,E);function be(we){x(Y,q,re,be,ke,"next",we)}function ke(we){x(Y,q,re,be,ke,"throw",we)}be(void 0)})}}function L(v,A){var E=typeof Symbol!="undefined"&&v[Symbol.iterator]||v["@@iterator"];if(!E){if(Array.isArray(v)||(E=_(v))||A&&v&&typeof v.length=="number"){E&&(v=E);var q=0,re=function(){};return{s:re,n:function(){return q>=v.length?{done:!0}:{done:!1,value:v[q++]}},e:function(z){throw z},f:re}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Y=!0,be=!1,ke;return{s:function(){E=E.call(v)},n:function(){var z=E.next();return Y=z.done,z},e:function(z){be=!0,ke=z},f:function(){try{!Y&&E.return!=null&&E.return()}finally{if(be)throw ke}}}}function _(v,A){if(!!v){if(typeof v=="string")return B(v,A);var E=Object.prototype.toString.call(v).slice(8,-1);if(E==="Object"&&v.constructor&&(E=v.constructor.name),E==="Map"||E==="Set")return Array.from(v);if(E==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E))return B(v,A)}}function B(v,A){(A==null||A>v.length)&&(A=v.length);for(var E=0,q=new Array(A);E<A;E++)q[E]=v[E];return q}function h(v,A){if(!(v instanceof A))throw new TypeError("Cannot call a class as a function")}function l(v,A){for(var E=0;E<A.length;E++){var q=A[E];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(v,q.key,q)}}function u(v,A,E){return A&&l(v.prototype,A),E&&l(v,E),v}var y=require$$2,p=require$$2,c=require$$2,b=require$$2,C=/^file:\/\/\/[a-zA-Z]:\//;function G(v){var A=b.parse(v);return A.protocol==="file:"||A.host?A:/^[a-z]:[/\\]/i.test(v)?b.parse("file:///".concat(v)):(A.host||(A.protocol="file:"),A)}var I=function(){function v(A){h(this,v),this.source=A,this.url=G(A.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&A.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}return u(v,[{key:"_progressiveDataLength",get:function(){var E,q;return(E=(q=this._fullRequestReader)===null||q===void 0?void 0:q._loaded)!==null&&E!==void 0?E:0}},{key:"getFullReader",value:function(){return(0,f.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new X(this):new ie(this),this._fullRequestReader}},{key:"getRangeReader",value:function(E,q){if(q<=this._progressiveDataLength)return null;var re=this.isFsUrl?new P(this,E,q):new H(this,E,q);return this._rangeRequestReaders.push(re),re}},{key:"cancelAllRequests",value:function(E){this._fullRequestReader&&this._fullRequestReader.cancel(E);var q=L(this._rangeRequestReaders.slice(0)),re;try{for(q.s();!(re=q.n()).done;){var Y=re.value;Y.cancel(E)}}catch(be){q.e(be)}finally{q.f()}}}]),v}();n.PDFNodeStream=I;var $=function(){function v(A){h(this,v),this._url=A.url,this._done=!1,this._storedError=null,this.onProgress=null;var E=A.source;this._contentLength=E.length,this._loaded=0,this._filename=null,this._disableRange=E.disableRange||!1,this._rangeChunkSize=E.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!E.disableStream,this._isRangeSupported=!E.disableRange,this._readableStream=null,this._readCapability=(0,f.createPromiseCapability)(),this._headersCapability=(0,f.createPromiseCapability)()}return u(v,[{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:function(){var A=k(i.default.mark(function q(){var re,Y;return i.default.wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return ke.next=2,this._readCapability.promise;case 2:if(!this._done){ke.next=4;break}return ke.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){ke.next=6;break}throw this._storedError;case 6:if(re=this._readableStream.read(),re!==null){ke.next=10;break}return this._readCapability=(0,f.createPromiseCapability)(),ke.abrupt("return",this.read());case 10:return this._loaded+=re.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),Y=new Uint8Array(re).buffer,ke.abrupt("return",{value:Y,done:!1});case 14:case"end":return ke.stop()}},q,this)}));function E(){return A.apply(this,arguments)}return E}()},{key:"cancel",value:function(E){if(!this._readableStream){this._error(E);return}this._readableStream.destroy(E)}},{key:"_error",value:function(E){this._storedError=E,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(E){var q=this;this._readableStream=E,E.on("readable",function(){q._readCapability.resolve()}),E.on("end",function(){E.destroy(),q._done=!0,q._readCapability.resolve()}),E.on("error",function(re){q._error(re)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new f.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}]),v}(),ee=function(){function v(A){h(this,v),this._url=A.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,f.createPromiseCapability)();var E=A.source;this._isStreamingSupported=!E.disableStream}return u(v,[{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:function(){var A=k(i.default.mark(function q(){var re,Y;return i.default.wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return ke.next=2,this._readCapability.promise;case 2:if(!this._done){ke.next=4;break}return ke.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){ke.next=6;break}throw this._storedError;case 6:if(re=this._readableStream.read(),re!==null){ke.next=10;break}return this._readCapability=(0,f.createPromiseCapability)(),ke.abrupt("return",this.read());case 10:return this._loaded+=re.length,this.onProgress&&this.onProgress({loaded:this._loaded}),Y=new Uint8Array(re).buffer,ke.abrupt("return",{value:Y,done:!1});case 14:case"end":return ke.stop()}},q,this)}));function E(){return A.apply(this,arguments)}return E}()},{key:"cancel",value:function(E){if(!this._readableStream){this._error(E);return}this._readableStream.destroy(E)}},{key:"_error",value:function(E){this._storedError=E,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(E){var q=this;this._readableStream=E,E.on("readable",function(){q._readCapability.resolve()}),E.on("end",function(){E.destroy(),q._done=!0,q._readCapability.resolve()}),E.on("error",function(re){q._error(re)}),this._storedError&&this._readableStream.destroy(this._storedError)}}]),v}();function Z(v,A){return{protocol:v.protocol,auth:v.auth,host:v.hostname,port:v.port,path:v.path,method:"GET",headers:A}}var ie=function(v){D(E,v);var A=j(E);function E(q){var re;h(this,E),re=A.call(this,q);var Y=function(ke){if(ke.statusCode===404){var we=new f.MissingPDFException('Missing PDF "'.concat(re._url,'".'));re._storedError=we,re._headersCapability.reject(we);return}re._headersCapability.resolve(),re._setReadableStream(ke);var z=function(F){return re._readableStream.headers[F.toLowerCase()]},R=(0,m.validateRangeRequestCapabilities)({getResponseHeader:z,isHttp:q.isHttp,rangeChunkSize:re._rangeChunkSize,disableRange:re._disableRange}),d=R.allowRangeRequests,o=R.suggestedLength;re._isRangeSupported=d,re._contentLength=o||re._contentLength,re._filename=(0,m.extractFilenameFromHeader)(z)};return re._request=null,re._url.protocol==="http:"?re._request=p.request(Z(re._url,q.httpHeaders),Y):re._request=c.request(Z(re._url,q.httpHeaders),Y),re._request.on("error",function(be){re._storedError=be,re._headersCapability.reject(be)}),re._request.end(),re}return E}($),H=function(v){D(E,v);var A=j(E);function E(q,re,Y){var be;h(this,E),be=A.call(this,q),be._httpHeaders={};for(var ke in q.httpHeaders){var we=q.httpHeaders[ke];typeof we!="undefined"&&(be._httpHeaders[ke]=we)}be._httpHeaders.Range="bytes=".concat(re,"-").concat(Y-1);var z=function(d){if(d.statusCode===404){var o=new f.MissingPDFException('Missing PDF "'.concat(be._url,'".'));be._storedError=o;return}be._setReadableStream(d)};return be._request=null,be._url.protocol==="http:"?be._request=p.request(Z(be._url,be._httpHeaders),z):be._request=c.request(Z(be._url,be._httpHeaders),z),be._request.on("error",function(R){be._storedError=R}),be._request.end(),be}return E}(ee),X=function(v){D(E,v);var A=j(E);function E(q){var re;h(this,E),re=A.call(this,q);var Y=decodeURIComponent(re._url.path);return C.test(re._url.href)&&(Y=Y.replace(/^\//,"")),y.lstat(Y,function(be,ke){if(be){be.code==="ENOENT"&&(be=new f.MissingPDFException('Missing PDF "'.concat(Y,'".'))),re._storedError=be,re._headersCapability.reject(be);return}re._contentLength=ke.size,re._setReadableStream(y.createReadStream(Y)),re._headersCapability.resolve()}),re}return E}($),P=function(v){D(E,v);var A=j(E);function E(q,re,Y){var be;h(this,E),be=A.call(this,q);var ke=decodeURIComponent(be._url.path);return C.test(be._url.href)&&(ke=ke.replace(/^\//,"")),be._setReadableStream(y.createReadStream(ke,{start:re,end:Y-1})),be}return E}(ee)},(s,n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.createResponseStatusError=D,n.extractFilenameFromHeader=S,n.validateRangeRequestCapabilities=m,n.validateResponseStatus=M;var r=e(4),i=e(155),f=e(1);function m(j){var W=j.getResponseHeader,V=j.isHttp,O=j.rangeChunkSize,w=j.disableRange;(0,r.assert)(O>0,"Range chunk size must be larger than zero");var x={allowRangeRequests:!1,suggestedLength:void 0},k=parseInt(W("Content-Length"),10);if(!Number.isInteger(k)||(x.suggestedLength=k,k<=2*O)||w||!V||W("Accept-Ranges")!=="bytes")return x;var L=W("Content-Encoding")||"identity";return L!=="identity"||(x.allowRangeRequests=!0),x}function S(j){var W=j("Content-Disposition");if(W){var V=(0,i.getFilenameFromContentDispositionHeader)(W);if(V.includes("%"))try{V=decodeURIComponent(V)}catch{}if((0,f.isPdfFile)(V))return V}return null}function D(j,W){return j===404||j===0&&W.startsWith("file:")?new r.MissingPDFException('Missing PDF "'+W+'".'):new r.UnexpectedResponseException("Unexpected server response (".concat(j,') while retrieving PDF "').concat(W,'".'),j)}function M(j){return j===200||j===206}},(s,n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.getFilenameFromContentDispositionHeader=j;var r=e(4);function i(W,V){return M(W)||D(W,V)||m(W,V)||f()}function f(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m(W,V){if(!!W){if(typeof W=="string")return S(W,V);var O=Object.prototype.toString.call(W).slice(8,-1);if(O==="Object"&&W.constructor&&(O=W.constructor.name),O==="Map"||O==="Set")return Array.from(W);if(O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O))return S(W,V)}}function S(W,V){(V==null||V>W.length)&&(V=W.length);for(var O=0,w=new Array(V);O<V;O++)w[O]=W[O];return w}function D(W,V){var O=W==null?null:typeof Symbol!="undefined"&&W[Symbol.iterator]||W["@@iterator"];if(O!=null){var w=[],x=!0,k=!1,L,_;try{for(O=O.call(W);!(x=(L=O.next()).done)&&(w.push(L.value),!(V&&w.length===V));x=!0);}catch(B){k=!0,_=B}finally{try{!x&&O.return!=null&&O.return()}finally{if(k)throw _}}return w}}function M(W){if(Array.isArray(W))return W}function j(W){var V=!0,O=L("filename\\*","i").exec(W);if(O){O=O[1];var w=l(O);return w=unescape(w),w=u(w),w=y(w),B(w)}if(O=h(W),O){var x=y(O);return B(x)}if(O=L("filename","i").exec(W),O){O=O[1];var k=l(O);return k=y(k),B(k)}function L(p,c){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',c)}function _(p,c){if(p){if(!/^[\x00-\xFF]+$/.test(c))return c;try{var b=new TextDecoder(p,{fatal:!0}),C=(0,r.stringToBytes)(c);c=b.decode(C),V=!1}catch{if(/^utf-?8$/i.test(p))try{c=decodeURIComponent(escape(c)),V=!1}catch{}}}return c}function B(p){return V&&/[\x80-\xff]/.test(p)&&(p=_("utf-8",p),V&&(p=_("iso-8859-1",p))),p}function h(p){for(var c=[],b,C=L("filename\\*((?!0\\d)\\d+)(\\*?)","ig");(b=C.exec(p))!==null;){var G=b,I=i(G,4),$=I[1],ee=I[2],Z=I[3];if($=parseInt($,10),$ in c){if($===0)break;continue}c[$]=[ee,Z]}for(var ie=[],H=0;H<c.length&&H in c;++H){var X=i(c[H],2),P=X[0],v=X[1];v=l(v),P&&(v=unescape(v),H===0&&(v=u(v))),ie.push(v)}return ie.join("")}function l(p){if(p.startsWith('"')){for(var c=p.slice(1).split('\\"'),b=0;b<c.length;++b){var C=c[b].indexOf('"');C!==-1&&(c[b]=c[b].slice(0,C),c.length=b+1),c[b]=c[b].replace(/\\(.)/g,"$1")}p=c.join('"')}return p}function u(p){var c=p.indexOf("'");if(c===-1)return p;var b=p.slice(0,c),C=p.slice(c+1),G=C.replace(/^[^']*'/,"");return _(b,G)}function y(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(c,b,C,G){if(C==="q"||C==="Q")return G=G.replace(/_/g," "),G=G.replace(/=([0-9a-fA-F]{2})/g,function(I,$){return String.fromCharCode(parseInt($,16))}),_(b,G);try{G=atob(G)}catch{}return _(b,G)})}return""}},(s,n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PDFNetworkStream=void 0;var r=m(e(2)),i=e(4),f=e(154);function m(u){return u&&u.__esModule?u:{default:u}}function S(u,y,p,c,b,C,G){try{var I=u[C](G),$=I.value}catch(ee){p(ee);return}I.done?y($):Promise.resolve($).then(c,b)}function D(u){return function(){var y=this,p=arguments;return new Promise(function(c,b){var C=u.apply(y,p);function G($){S(C,c,b,G,I,"next",$)}function I($){S(C,c,b,G,I,"throw",$)}G(void 0)})}}function M(u,y){var p=typeof Symbol!="undefined"&&u[Symbol.iterator]||u["@@iterator"];if(!p){if(Array.isArray(u)||(p=j(u))||y&&u&&typeof u.length=="number"){p&&(u=p);var c=0,b=function(){};return{s:b,n:function(){return c>=u.length?{done:!0}:{done:!1,value:u[c++]}},e:function(ee){throw ee},f:b}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var C=!0,G=!1,I;return{s:function(){p=p.call(u)},n:function(){var ee=p.next();return C=ee.done,ee},e:function(ee){G=!0,I=ee},f:function(){try{!C&&p.return!=null&&p.return()}finally{if(G)throw I}}}}function j(u,y){if(!!u){if(typeof u=="string")return W(u,y);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return W(u,y)}}function W(u,y){(y==null||y>u.length)&&(y=u.length);for(var p=0,c=new Array(y);p<y;p++)c[p]=u[p];return c}function V(u,y){if(!(u instanceof y))throw new TypeError("Cannot call a class as a function")}function O(u,y){for(var p=0;p<y.length;p++){var c=y[p];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(u,c.key,c)}}function w(u,y,p){return y&&O(u.prototype,y),p&&O(u,p),u}var x=200,k=206;function L(u){var y=u.response;if(typeof y!="string")return y;var p=(0,i.stringToBytes)(y);return p.buffer}var _=function(){function u(y){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};V(this,u),this.url=y,this.isHttp=/^https?:/i.test(y),this.httpHeaders=this.isHttp&&p.httpHeaders||Object.create(null),this.withCredentials=p.withCredentials||!1,this.getXhr=p.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}return w(u,[{key:"requestRange",value:function(p,c,b){var C={begin:p,end:c};for(var G in b)C[G]=b[G];return this.request(C)}},{key:"requestFull",value:function(p){return this.request(p)}},{key:"request",value:function(p){var c=this.getXhr(),b=this.currXhrId++,C=this.pendingRequests[b]={xhr:c};c.open("GET",this.url),c.withCredentials=this.withCredentials;for(var G in this.httpHeaders){var I=this.httpHeaders[G];typeof I!="undefined"&&c.setRequestHeader(G,I)}return this.isHttp&&"begin"in p&&"end"in p?(c.setRequestHeader("Range","bytes=".concat(p.begin,"-").concat(p.end-1)),C.expectedStatus=k):C.expectedStatus=x,c.responseType="arraybuffer",p.onError&&(c.onerror=function($){p.onError(c.status)}),c.onreadystatechange=this.onStateChange.bind(this,b),c.onprogress=this.onProgress.bind(this,b),C.onHeadersReceived=p.onHeadersReceived,C.onDone=p.onDone,C.onError=p.onError,C.onProgress=p.onProgress,c.send(null),b}},{key:"onProgress",value:function(p,c){var b,C=this.pendingRequests[p];!C||(b=C.onProgress)===null||b===void 0||b.call(C,c)}},{key:"onStateChange",value:function(p,c){var b=this.pendingRequests[p];if(!!b){var C=b.xhr;if(C.readyState>=2&&b.onHeadersReceived&&(b.onHeadersReceived(),delete b.onHeadersReceived),C.readyState===4&&p in this.pendingRequests){if(delete this.pendingRequests[p],C.status===0&&this.isHttp){var G;(G=b.onError)===null||G===void 0||G.call(b,C.status);return}var I=C.status||x,$=I===x&&b.expectedStatus===k;if(!$&&I!==b.expectedStatus){var ee;(ee=b.onError)===null||ee===void 0||ee.call(b,C.status);return}var Z=L(C);if(I===k){var ie=C.getResponseHeader("Content-Range"),H=/bytes (\d+)-(\d+)\/(\d+)/.exec(ie);b.onDone({begin:parseInt(H[1],10),chunk:Z})}else if(Z)b.onDone({begin:0,chunk:Z});else{var X;(X=b.onError)===null||X===void 0||X.call(b,C.status)}}}}},{key:"getRequestXhr",value:function(p){return this.pendingRequests[p].xhr}},{key:"isPendingRequest",value:function(p){return p in this.pendingRequests}},{key:"abortRequest",value:function(p){var c=this.pendingRequests[p].xhr;delete this.pendingRequests[p],c.abort()}}]),u}(),B=function(){function u(y){V(this,u),this._source=y,this._manager=new _(y.url,{httpHeaders:y.httpHeaders,withCredentials:y.withCredentials}),this._rangeChunkSize=y.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}return w(u,[{key:"_onRangeRequestReaderClosed",value:function(p){var c=this._rangeRequestReaders.indexOf(p);c>=0&&this._rangeRequestReaders.splice(c,1)}},{key:"getFullReader",value:function(){return(0,i.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new h(this._manager,this._source),this._fullRequestReader}},{key:"getRangeReader",value:function(p,c){var b=new l(this._manager,p,c);return b.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(b),b}},{key:"cancelAllRequests",value:function(p){var c;(c=this._fullRequestReader)===null||c===void 0||c.cancel(p);var b=M(this._rangeRequestReaders.slice(0)),C;try{for(b.s();!(C=b.n()).done;){var G=C.value;G.cancel(p)}}catch(I){b.e(I)}finally{b.f()}}}]),u}();n.PDFNetworkStream=B;var h=function(){function u(y,p){V(this,u),this._manager=y;var c={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=p.url,this._fullRequestId=y.requestFull(c),this._headersReceivedCapability=(0,i.createPromiseCapability)(),this._disableRange=p.disableRange||!1,this._contentLength=p.length,this._rangeChunkSize=p.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}return w(u,[{key:"_onHeadersReceived",value:function(){var p=this._fullRequestId,c=this._manager.getRequestXhr(p),b=function(ee){return c.getResponseHeader(ee)},C=(0,f.validateRangeRequestCapabilities)({getResponseHeader:b,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange}),G=C.allowRangeRequests,I=C.suggestedLength;G&&(this._isRangeSupported=!0),this._contentLength=I||this._contentLength,this._filename=(0,f.extractFilenameFromHeader)(b),this._isRangeSupported&&this._manager.abortRequest(p),this._headersReceivedCapability.resolve()}},{key:"_onDone",value:function(p){if(p)if(this._requests.length>0){var c=this._requests.shift();c.resolve({value:p.chunk,done:!1})}else this._cachedChunks.push(p.chunk);if(this._done=!0,!(this._cachedChunks.length>0)){var b=M(this._requests),C;try{for(b.s();!(C=b.n()).done;){var G=C.value;G.resolve({value:void 0,done:!0})}}catch(I){b.e(I)}finally{b.f()}this._requests.length=0}}},{key:"_onError",value:function(p){this._storedError=(0,f.createResponseStatusError)(p,this._url),this._headersReceivedCapability.reject(this._storedError);var c=M(this._requests),b;try{for(c.s();!(b=c.n()).done;){var C=b.value;C.reject(this._storedError)}}catch(G){c.e(G)}finally{c.f()}this._requests.length=0,this._cachedChunks.length=0}},{key:"_onProgress",value:function(p){var c;(c=this.onProgress)===null||c===void 0||c.call(this,{loaded:p.loaded,total:p.lengthComputable?p.total:this._contentLength})}},{key:"filename",get:function(){return this._filename}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"contentLength",get:function(){return this._contentLength}},{key:"headersReady",get:function(){return this._headersReceivedCapability.promise}},{key:"read",value:function(){var y=D(r.default.mark(function c(){var b,C;return r.default.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(!this._storedError){I.next=2;break}throw this._storedError;case 2:if(!(this._cachedChunks.length>0)){I.next=5;break}return b=this._cachedChunks.shift(),I.abrupt("return",{value:b,done:!1});case 5:if(!this._done){I.next=7;break}return I.abrupt("return",{value:void 0,done:!0});case 7:return C=(0,i.createPromiseCapability)(),this._requests.push(C),I.abrupt("return",C.promise);case 10:case"end":return I.stop()}},c,this)}));function p(){return y.apply(this,arguments)}return p}()},{key:"cancel",value:function(p){this._done=!0,this._headersReceivedCapability.reject(p);var c=M(this._requests),b;try{for(c.s();!(b=c.n()).done;){var C=b.value;C.resolve({value:void 0,done:!0})}}catch(G){c.e(G)}finally{c.f()}this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}]),u}(),l=function(){function u(y,p,c){V(this,u),this._manager=y;var b={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=y.url,this._requestId=y.requestRange(p,c,b),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}return w(u,[{key:"_close",value:function(){var p;(p=this.onClosed)===null||p===void 0||p.call(this,this)}},{key:"_onDone",value:function(p){var c=p.chunk;if(this._requests.length>0){var b=this._requests.shift();b.resolve({value:c,done:!1})}else this._queuedChunk=c;this._done=!0;var C=M(this._requests),G;try{for(C.s();!(G=C.n()).done;){var I=G.value;I.resolve({value:void 0,done:!0})}}catch($){C.e($)}finally{C.f()}this._requests.length=0,this._close()}},{key:"_onError",value:function(p){this._storedError=(0,f.createResponseStatusError)(p,this._url);var c=M(this._requests),b;try{for(c.s();!(b=c.n()).done;){var C=b.value;C.reject(this._storedError)}}catch(G){c.e(G)}finally{c.f()}this._requests.length=0,this._queuedChunk=null}},{key:"_onProgress",value:function(p){if(!this.isStreamingSupported){var c;(c=this.onProgress)===null||c===void 0||c.call(this,{loaded:p.loaded})}}},{key:"isStreamingSupported",get:function(){return!1}},{key:"read",value:function(){var y=D(r.default.mark(function c(){var b,C;return r.default.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(!this._storedError){I.next=2;break}throw this._storedError;case 2:if(this._queuedChunk===null){I.next=6;break}return b=this._queuedChunk,this._queuedChunk=null,I.abrupt("return",{value:b,done:!1});case 6:if(!this._done){I.next=8;break}return I.abrupt("return",{value:void 0,done:!0});case 8:return C=(0,i.createPromiseCapability)(),this._requests.push(C),I.abrupt("return",C.promise);case 11:case"end":return I.stop()}},c,this)}));function p(){return y.apply(this,arguments)}return p}()},{key:"cancel",value:function(p){this._done=!0;var c=M(this._requests),b;try{for(c.s();!(b=c.n()).done;){var C=b.value;C.resolve({value:void 0,done:!0})}}catch(G){c.e(G)}finally{c.f()}this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}]),u}()},(s,n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PDFFetchStream=void 0;var r=m(e(2)),i=e(4),f=e(154);function m(h){return h&&h.__esModule?h:{default:h}}function S(h,l,u,y,p,c,b){try{var C=h[c](b),G=C.value}catch(I){u(I);return}C.done?l(G):Promise.resolve(G).then(y,p)}function D(h){return function(){var l=this,u=arguments;return new Promise(function(y,p){var c=h.apply(l,u);function b(G){S(c,y,p,b,C,"next",G)}function C(G){S(c,y,p,b,C,"throw",G)}b(void 0)})}}function M(h,l){var u=typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(!u){if(Array.isArray(h)||(u=j(h))||l&&h&&typeof h.length=="number"){u&&(h=u);var y=0,p=function(){};return{s:p,n:function(){return y>=h.length?{done:!0}:{done:!1,value:h[y++]}},e:function(I){throw I},f:p}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,b=!1,C;return{s:function(){u=u.call(h)},n:function(){var I=u.next();return c=I.done,I},e:function(I){b=!0,C=I},f:function(){try{!c&&u.return!=null&&u.return()}finally{if(b)throw C}}}}function j(h,l){if(!!h){if(typeof h=="string")return W(h,l);var u=Object.prototype.toString.call(h).slice(8,-1);if(u==="Object"&&h.constructor&&(u=h.constructor.name),u==="Map"||u==="Set")return Array.from(h);if(u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u))return W(h,l)}}function W(h,l){(l==null||l>h.length)&&(l=h.length);for(var u=0,y=new Array(l);u<l;u++)y[u]=h[u];return y}function V(h,l){if(!(h instanceof l))throw new TypeError("Cannot call a class as a function")}function O(h,l){for(var u=0;u<l.length;u++){var y=l[u];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}function w(h,l,u){return l&&O(h.prototype,l),u&&O(h,u),h}function x(h,l,u){return{method:"GET",headers:h,signal:u==null?void 0:u.signal,mode:"cors",credentials:l?"include":"same-origin",redirect:"follow"}}function k(h){var l=new Headers;for(var u in h){var y=h[u];typeof y!="undefined"&&l.append(u,y)}return l}var L=function(){function h(l){V(this,h),this.source=l,this.isHttp=/^https?:/i.test(l.url),this.httpHeaders=this.isHttp&&l.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}return w(h,[{key:"_progressiveDataLength",get:function(){var u,y;return(u=(y=this._fullRequestReader)===null||y===void 0?void 0:y._loaded)!==null&&u!==void 0?u:0}},{key:"getFullReader",value:function(){return(0,i.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new _(this),this._fullRequestReader}},{key:"getRangeReader",value:function(u,y){if(y<=this._progressiveDataLength)return null;var p=new B(this,u,y);return this._rangeRequestReaders.push(p),p}},{key:"cancelAllRequests",value:function(u){this._fullRequestReader&&this._fullRequestReader.cancel(u);var y=M(this._rangeRequestReaders.slice(0)),p;try{for(y.s();!(p=y.n()).done;){var c=p.value;c.cancel(u)}}catch(b){y.e(b)}finally{y.f()}}}]),h}();n.PDFFetchStream=L;var _=function(){function h(l){var u=this;V(this,h),this._stream=l,this._reader=null,this._loaded=0,this._filename=null;var y=l.source;this._withCredentials=y.withCredentials||!1,this._contentLength=y.length,this._headersCapability=(0,i.createPromiseCapability)(),this._disableRange=y.disableRange||!1,this._rangeChunkSize=y.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),typeof AbortController!="undefined"&&(this._abortController=new AbortController),this._isStreamingSupported=!y.disableStream,this._isRangeSupported=!y.disableRange,this._headers=k(this._stream.httpHeaders);var p=y.url;fetch(p,x(this._headers,this._withCredentials,this._abortController)).then(function(c){if(!(0,f.validateResponseStatus)(c.status))throw(0,f.createResponseStatusError)(c.status,p);u._reader=c.body.getReader(),u._headersCapability.resolve();var b=function(ee){return c.headers.get(ee)},C=(0,f.validateRangeRequestCapabilities)({getResponseHeader:b,isHttp:u._stream.isHttp,rangeChunkSize:u._rangeChunkSize,disableRange:u._disableRange}),G=C.allowRangeRequests,I=C.suggestedLength;u._isRangeSupported=G,u._contentLength=I||u._contentLength,u._filename=(0,f.extractFilenameFromHeader)(b),!u._isStreamingSupported&&u._isRangeSupported&&u.cancel(new i.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}return w(h,[{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:function(){var l=D(r.default.mark(function y(){var p,c,b,C;return r.default.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,this._headersCapability.promise;case 2:return I.next=4,this._reader.read();case 4:if(p=I.sent,c=p.value,b=p.done,!b){I.next=9;break}return I.abrupt("return",{value:c,done:b});case 9:return this._loaded+=c.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),C=new Uint8Array(c).buffer,I.abrupt("return",{value:C,done:!1});case 13:case"end":return I.stop()}},y,this)}));function u(){return l.apply(this,arguments)}return u}()},{key:"cancel",value:function(u){this._reader&&this._reader.cancel(u),this._abortController&&this._abortController.abort()}}]),h}(),B=function(){function h(l,u,y){var p=this;V(this,h),this._stream=l,this._reader=null,this._loaded=0;var c=l.source;this._withCredentials=c.withCredentials||!1,this._readCapability=(0,i.createPromiseCapability)(),this._isStreamingSupported=!c.disableStream,typeof AbortController!="undefined"&&(this._abortController=new AbortController),this._headers=k(this._stream.httpHeaders),this._headers.append("Range","bytes=".concat(u,"-").concat(y-1));var b=c.url;fetch(b,x(this._headers,this._withCredentials,this._abortController)).then(function(C){if(!(0,f.validateResponseStatus)(C.status))throw(0,f.createResponseStatusError)(C.status,b);p._readCapability.resolve(),p._reader=C.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}return w(h,[{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:function(){var l=D(r.default.mark(function y(){var p,c,b,C;return r.default.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,this._readCapability.promise;case 2:return I.next=4,this._reader.read();case 4:if(p=I.sent,c=p.value,b=p.done,!b){I.next=9;break}return I.abrupt("return",{value:c,done:b});case 9:return this._loaded+=c.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),C=new Uint8Array(c).buffer,I.abrupt("return",{value:C,done:!1});case 13:case"end":return I.stop()}},y,this)}));function u(){return l.apply(this,arguments)}return u}()},{key:"cancel",value:function(u){this._reader&&this._reader.cancel(u),this._abortController&&this._abortController.abort()}}]),h}()}],__webpack_module_cache__={};function __w_pdfjs_require__(s){var n=__webpack_module_cache__[s];if(n!==void 0)return n.exports;var e=__webpack_module_cache__[s]={id:s,loaded:!1,exports:{}};return __webpack_modules__[s].call(e.exports,e,e.exports,__w_pdfjs_require__),e.loaded=!0,e.exports}__w_pdfjs_require__.nmd=s=>(s.paths=[],s.children||(s.children=[]),s);var __webpack_exports__={};return(()=>{var s=__webpack_exports__;Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"AnnotationLayer",{enumerable:!0,get:function(){return i.AnnotationLayer}}),Object.defineProperty(s,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(s,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(s,"GlobalWorkerOptions",{enumerable:!0,get:function(){return f.GlobalWorkerOptions}}),Object.defineProperty(s,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(s,"LinkTarget",{enumerable:!0,get:function(){return n.LinkTarget}}),Object.defineProperty(s,"LoopbackPort",{enumerable:!0,get:function(){return r.LoopbackPort}}),Object.defineProperty(s,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(s,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(s,"PDFDataRangeTransport",{enumerable:!0,get:function(){return r.PDFDataRangeTransport}}),Object.defineProperty(s,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(s,"PDFWorker",{enumerable:!0,get:function(){return r.PDFWorker}}),Object.defineProperty(s,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(s,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(s,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}}),Object.defineProperty(s,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(s,"SVGGraphics",{enumerable:!0,get:function(){return D.SVGGraphics}}),Object.defineProperty(s,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return e.UNSUPPORTED_FEATURES}}),Object.defineProperty(s,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(s,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(s,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(s,"XfaLayer",{enumerable:!0,get:function(){return M.XfaLayer}}),Object.defineProperty(s,"addLinkAttributes",{enumerable:!0,get:function(){return n.addLinkAttributes}}),Object.defineProperty(s,"build",{enumerable:!0,get:function(){return r.build}}),Object.defineProperty(s,"createObjectURL",{enumerable:!0,get:function(){return e.createObjectURL}}),Object.defineProperty(s,"createPromiseCapability",{enumerable:!0,get:function(){return e.createPromiseCapability}}),Object.defineProperty(s,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(s,"getDocument",{enumerable:!0,get:function(){return r.getDocument}}),Object.defineProperty(s,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(s,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(s,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(s,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(s,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(s,"removeNullCharacters",{enumerable:!0,get:function(){return e.removeNullCharacters}}),Object.defineProperty(s,"renderTextLayer",{enumerable:!0,get:function(){return S.renderTextLayer}}),Object.defineProperty(s,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(s,"version",{enumerable:!0,get:function(){return r.version}});var n=__w_pdfjs_require__(1),e=__w_pdfjs_require__(4),r=__w_pdfjs_require__(136),i=__w_pdfjs_require__(148),f=__w_pdfjs_require__(142),m=__w_pdfjs_require__(6),S=__w_pdfjs_require__(151),D=__w_pdfjs_require__(152),M=__w_pdfjs_require__(150);if(m.isNodeJS){var j=__w_pdfjs_require__(153),W=j.PDFNodeStream;(0,r.setPDFNetworkStreamFactory)(function(k){return new W(k)})}else{var V=__w_pdfjs_require__(156),O=V.PDFNetworkStream,w=__w_pdfjs_require__(157),x=w.PDFFetchStream;(0,r.setPDFNetworkStreamFactory)(function(k){return(0,n.isValidFetchUrl)(k.url)?new x(k):new O(k)})}})(),__webpack_exports__})()})})(pdf);function _typeof(s){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof(s)}function _classCallCheck(s,n){if(!(s instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(s,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(s,r.key,r)}}function _createClass(s,n,e){return n&&_defineProperties(s.prototype,n),e&&_defineProperties(s,e),Object.defineProperty(s,"prototype",{writable:!1}),s}var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function s(r,i,f,m,S,D){if(D!==ReactPropTypesSecret){var M=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw M.name="Invariant Violation",M}}s.isRequired=s;function n(){return s}var e={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:n,element:s,elementType:s,instanceOf:n,node:s,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return e.PropTypes=e,e};propTypes.exports=factoryWithThrowingShims();var PropTypes=propTypes.exports,keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],isProduction$1=!0,prefix="Invariant failed";function invariant(s,n){if(!s){if(isProduction$1)throw new Error(prefix);var e=typeof n=="function"?n():n,r=e?"".concat(prefix,": ").concat(e):prefix;throw new Error(r)}}var isProduction=!0;function warning(s,n){if(!isProduction){if(s)return;var e="Warning: "+n;typeof console!="undefined"&&console.warn(e);try{throw Error(e)}catch{}}}PropTypes.node,PropTypes.oneOf(["error","loading","no-data"]).isRequired;var DEFAULT_LINK_REL="noopener noreferrer nofollow",LinkService=function(){function s(){_classCallCheck(this,s),this.externalLinkTarget=null,this.externalLinkRel=null}return _createClass(s,[{key:"setDocument",value:function(e){this.pdfDocument=e}},{key:"setViewer",value:function(e){this.pdfViewer=e}},{key:"setExternalLinkRel",value:function(e){this.externalLinkRel=e}},{key:"setExternalLinkTarget",value:function(e){this.externalLinkTarget=e}},{key:"setHistory",value:function(){}},{key:"pagesCount",get:function(){return this.pdfDocument?this.pdfDocument.numPages:0}},{key:"page",get:function(){return this.pdfViewer.currentPageNumber},set:function(e){this.pdfViewer.currentPageNumber=e}},{key:"rotation",get:function(){return 0},set:function(e){}},{key:"goToDestination",value:function(e){var r=this;new Promise(function(i){typeof e=="string"?r.pdfDocument.getDestination(e).then(i):Array.isArray(e)?i(e):e.then(i)}).then(function(i){invariant(Array.isArray(i),'"'.concat(i,'" is not a valid destination array.'));var f=i[0];new Promise(function(m){f instanceof Object?r.pdfDocument.getPageIndex(f).then(function(S){m(S)}).catch(function(){invariant(!1,'"'.concat(f,'" is not a valid page reference.'))}):typeof f=="number"?m(f):invariant(!1,'"'.concat(f,'" is not a valid destination reference.'))}).then(function(m){var S=m+1;invariant(S>=1&&S<=r.pagesCount,'"'.concat(S,'" is not a valid page number.')),r.pdfViewer.scrollPageIntoView({dest:e,pageIndex:m,pageNumber:S})})})}},{key:"navigateTo",value:function(e){this.goToDestination(e)}},{key:"goToPage",value:function(){}},{key:"addLinkAttributes",value:function(e,r,i){e.href=r,e.rel=this.externalLinkRel||DEFAULT_LINK_REL,e.target=i?"_blank":this.externalLinkTarget||""}},{key:"getDestinationHash",value:function(){return"#"}},{key:"getAnchorUrl",value:function(){return"#"}},{key:"setHash",value:function(){}},{key:"executeNamedAction",value:function(){}},{key:"cachePageRef",value:function(){}},{key:"isPageVisible",value:function(){return!0}},{key:"isPageCached",value:function(){return!0}}]),s}();function _arrayLikeToArray(s,n){(n==null||n>s.length)&&(n=s.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=s[e];return r}function _unsupportedIterableToArray(s,n){if(!!s){if(typeof s=="string")return _arrayLikeToArray(s,n);var e=Object.prototype.toString.call(s).slice(8,-1);if(e==="Object"&&s.constructor&&(e=s.constructor.name),e==="Map"||e==="Set")return Array.from(s);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return _arrayLikeToArray(s,n)}}var isBrowser=typeof window!="undefined",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(s){return typeof s!="undefined"}var allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayWorkerWarning(){warning(!isLocalFileSystem,"Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ".concat(allowFileAccessFromFilesTip))}function _arrayWithoutHoles(s){if(Array.isArray(s))return _arrayLikeToArray(s)}function _iterableToArray(s){if(typeof Symbol!="undefined"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toConsumableArray(s){return _arrayWithoutHoles(s)||_iterableToArray(s)||_unsupportedIterableToArray(s)||_nonIterableSpread()}var eventProps=function(){var s={};return[].concat(_toConsumableArray(mouseEvents),_toConsumableArray(touchEvents),_toConsumableArray(keyboardEvents)).forEach(function(n){s[n]=PropTypes.func}),s}(),fileTypes=[PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.shape({data:PropTypes.oneOfType([PropTypes.object,PropTypes.string]),httpHeaders:PropTypes.object,range:PropTypes.object,url:PropTypes.string,withCredentials:PropTypes.bool})];typeof File!="undefined"&&fileTypes.push(PropTypes.instanceOf(File));typeof Blob!="undefined"&&fileTypes.push(PropTypes.instanceOf(Blob));var isClassName=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),isFile=PropTypes.oneOfType(fileTypes),isLinkService=PropTypes.instanceOf(LinkService);PropTypes.oneOf(["_self","_blank","_parent","_top"]);var isPage=PropTypes.shape({_transport:PropTypes.shape({fontLoader:PropTypes.object.isRequired}).isRequired,commonObjs:PropTypes.shape({_objs:PropTypes.object.isRequired}).isRequired,getAnnotations:PropTypes.func.isRequired,getTextContent:PropTypes.func.isRequired,getViewport:PropTypes.func.isRequired,render:PropTypes.func.isRequired}),isPageIndex=function s(n,e,r){var i=n[e],f=n.pageNumber,m=n.pdf;if(!isDefined(m))return null;if(isDefined(i)){if(typeof i!="number")return new Error("`".concat(e,"` of type `").concat(_typeof(i),"` supplied to `").concat(r,"`, expected `number`."));if(i<0)return new Error("Expected `".concat(e,"` to be greater or equal to 0."));var S=m.numPages;if(i+1>S)return new Error("Expected `".concat(e,"` to be less or equal to ").concat(S-1,"."))}else if(!isDefined(f))return new Error("`".concat(e,"` not supplied. Either pageIndex or pageNumber must be supplied to `").concat(r,"`."));return null},isPageNumber=function s(n,e,r){var i=n[e],f=n.pageIndex,m=n.pdf;if(!isDefined(m))return null;if(isDefined(i)){if(typeof i!="number")return new Error("`".concat(e,"` of type `").concat(_typeof(i),"` supplied to `").concat(r,"`, expected `number`."));if(i<1)return new Error("Expected `".concat(e,"` to be greater or equal to 1."));var S=m.numPages;if(i>S)return new Error("Expected `".concat(e,"` to be less or equal to ").concat(S,"."))}else if(!isDefined(f))return new Error("`".concat(e,"` not supplied. Either pageIndex or pageNumber must be supplied to `").concat(r,"`."));return null},isPdf=PropTypes.oneOfType([PropTypes.shape({getDestination:PropTypes.func.isRequired,getOutline:PropTypes.func.isRequired,getPage:PropTypes.func.isRequired,numPages:PropTypes.number.isRequired}),PropTypes.bool]),isRef=PropTypes.oneOfType([PropTypes.func,PropTypes.shape({current:PropTypes.any})]),isRenderMode=PropTypes.oneOf(["canvas","none","svg"]),isRotate=PropTypes.oneOf([0,90,180,270]);function ownKeys$2(s,n){var e=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);n&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable})),e.push.apply(e,r)}return e}function _objectSpread$2(s){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?ownKeys$2(Object(e),!0).forEach(function(r){_defineProperty(s,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(e)):ownKeys$2(Object(e)).forEach(function(r){Object.defineProperty(s,r,Object.getOwnPropertyDescriptor(e,r))})}return s}var isFunctionOrNode$1=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);_objectSpread$2(_objectSpread$2({},eventProps),{},{children:PropTypes.node,className:isClassName,error:isFunctionOrNode$1,externalLinkRel:PropTypes.string,externalLinkTarget:PropTypes.string,file:isFile,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode$1,noData:isFunctionOrNode$1,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadProgress:PropTypes.func,onLoadSuccess:PropTypes.func,onPassword:PropTypes.func,onSourceError:PropTypes.func,onSourceSuccess:PropTypes.func,rotate:PropTypes.number});var isDestination=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.any)]);PropTypes.shape({dest:isDestination,items:PropTypes.arrayOf(PropTypes.shape({dest:isDestination,title:PropTypes.string})),title:PropTypes.string}).isRequired,PropTypes.func,isPdf.isRequired;function ownKeys$1(s,n){var e=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);n&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable})),e.push.apply(e,r)}return e}function _objectSpread$1(s){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?ownKeys$1(Object(e),!0).forEach(function(r){_defineProperty(s,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(e)):ownKeys$1(Object(e)).forEach(function(r){Object.defineProperty(s,r,Object.getOwnPropertyDescriptor(e,r))})}return s}_objectSpread$1({className:isClassName,inputRef:isRef,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,pdf:isPdf},eventProps);PropTypes.string,PropTypes.func,PropTypes.func,isPage.isRequired,PropTypes.bool,PropTypes.number.isRequired;PropTypes.func,PropTypes.func,isPage.isRequired,PropTypes.number.isRequired;PropTypes.func,PropTypes.string.isRequired,PropTypes.number.isRequired,isPage.isRequired,PropTypes.number,PropTypes.string.isRequired,PropTypes.arrayOf(PropTypes.number).isRequired,PropTypes.number.isRequired;PropTypes.func,PropTypes.func,isPage.isRequired,PropTypes.number;PropTypes.string,isLinkService.isRequired,PropTypes.func,PropTypes.func,PropTypes.func,PropTypes.func,PropTypes.bool,PropTypes.number;function ownKeys(s,n){var e=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);n&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable})),e.push.apply(e,r)}return e}function _objectSpread(s){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?ownKeys(Object(e),!0).forEach(function(r){_defineProperty(s,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(e)):ownKeys(Object(e)).forEach(function(r){Object.defineProperty(s,r,Object.getOwnPropertyDescriptor(e,r))})}return s}var isFunctionOrNode=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);_objectSpread(_objectSpread({},eventProps),{},{canvasBackground:PropTypes.string,children:PropTypes.node,className:isClassName,customTextRenderer:PropTypes.func,error:isFunctionOrNode,height:PropTypes.number,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode,noData:isFunctionOrNode,onGetTextError:PropTypes.func,onGetTextSuccess:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,pageIndex:isPageIndex,pageNumber:isPageNumber,pdf:isPdf,registerPage:PropTypes.func,renderAnnotationLayer:PropTypes.bool,renderForms:PropTypes.bool,renderInteractiveForms:PropTypes.bool,renderMode:isRenderMode,renderTextLayer:PropTypes.bool,rotate:isRotate,scale:PropTypes.number,unregisterPage:PropTypes.func,width:PropTypes.number});displayWorkerWarning();pdf.exports.GlobalWorkerOptions.workerSrc="pdf.worker.js";pdf.exports.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdf.exports.version}/pdf.worker.js`;function useBgCanvas(s){const{converCanvasToImage:n,checkImageSize:e}=useImageUtil(),{showMsg:r}=useMsgBox(),i=s==null?void 0:s.getContext("2d"),f=useAppDispatch(),m=M=>{const j=M.target.files?M.target.files[0]:null;if(j!=null&&j.type.includes("image"))return S(j);if(j!=null&&j.type.includes("pdf"))return D(j);r({type:Status.ERROR,title:"\u6A94\u6848\u8A0A\u606F",message:"\u6A94\u6848\u683C\u5F0F\u932F\u8AA4\uFF0C\u8ACB\u4E0A\u50B3PDF\u6216\u5716\u6A94"})},S=M=>{if(!e(M.size))return;const j=new Image;j.onload=()=>{!s||(s.height=j.height,s.width=j.width,i.drawImage(j,0,0))},j.src=URL.createObjectURL(M),f(loadBGImg(j.src))},D=M=>{let j=new FileReader;j.onload=function(){const W=new Uint8Array(this.result);pdf.exports.getDocument({data:W}).promise.then(function(w){w.getPage(1).then(k=>{const _=k.getViewport({scale:1});!s||(s.height=_.height,s.width=_.width,k.render({canvasContext:i,viewport:_}).promise.then(()=>{let B=n(s);f(loadBGImg(B))}).catch(B=>console.log(B)))})},function(w){console.log(w)})},j.readAsArrayBuffer(M)};return{bgCanvas:s,handleOnchange:m}}function BGCanvas(s){const{width:n,height:e,BGCanvas:r}=s.BGCanvasObj;return jsx("canvas",{ref:r,className:"signCanvas",width:n,height:e,children:"Your browser does not support th canvas element"})}function SignPageStep1(){const s=react.exports.useRef(null),[n,e]=react.exports.useState(null),r=useAppSelector(M=>M.createSign.BGImg),i=useAppSelector(M=>M.createSign.handMadeSignImg),[f,m]=react.exports.useState("\u9078\u64C7\u6A94\u6848"),{toStep:S}=useSignStep(),{handleOnchange:D}=useBgCanvas(n);return react.exports.useEffect(()=>{e(s.current)},[s]),react.exports.useMemo(()=>{!r||m("\u91CD\u65B0\u9078\u64C7\u6A94\u6848")},[r]),jsxs("main",{children:[jsxs("section",{className:"mt-5",children:[jsx("div",{className:"hidden",children:jsx(BGCanvas,{BGCanvasObj:{BGCanvas:s}})}),r?jsx("img",{className:"mx-auto max-w-[70%] lg:w-[500px]",src:r,alt:"\u6587\u4EF6\u5716\u6A94"}):null]}),jsx("section",{className:"flex flex-col items-center",children:jsxs("div",{className:"flex flex-col lg:flex-row",children:[jsx(Input,{inputObj:{type:InputType.FILE,title:f,handleOnchange:D}}),r&&!i?jsx(Btn,{btnObj:{type:BtnType.PRIMARY,title:"\u4E0B\u4E00\u6B65",clickHandler:()=>S("/SignPage/Step2",2)}}):null,r&&i?jsxs("div",{className:"flex flex-col lg:flex-row",children:[jsx(Btn,{btnObj:{type:BtnType.SECONDARY,title:"\u9032\u884C\u7C3D\u7F72",clickHandler:()=>S("/SignPage/Step2",2)}}),jsx(Btn,{btnObj:{type:BtnType.PRIMARY,title:"\u5408\u4F75\u7C3D\u540D",clickHandler:()=>S("/SignPage/Step3",3)}})]}):null]})})]})}export{SignPageStep1 as default};
